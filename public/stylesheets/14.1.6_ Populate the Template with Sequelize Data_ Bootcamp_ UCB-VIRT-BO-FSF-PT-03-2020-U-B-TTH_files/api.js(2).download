!function(e){function webpackJsonpCallback(t){for(var i,r,a=t[0],o=t[1],u=0,l=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&l.push(n[r][0]),n[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);for(s&&s(t);l.length;)l.shift()()}var t={},n={10:0};function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}__webpack_require__.e=function requireEnsure(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,r){i=n[e]=[t,r]}));t.push(i[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.src=function jsonpScriptSrc(e){return __webpack_require__.p+""+({0:"sub_common",1:"default_common",2:"vendor/react",3:"vendor/mathjs",4:"vendor/mathcore",5:"vendor/xregexp",6:"vendor/d3",7:"utils/audioApi",8:"vendor/chemcore",9:"vendor/jsxgraph",11:"bundles/externalBundles/externalMathcore",12:"bundles/externalBundles/externalReactiveComponents",13:"bundles/features/audioPlayer",14:"bundles/features/counter",15:"bundles/features/customFeature",16:"bundles/features/formulaInput",17:"bundles/features/unknown",18:"bundles/features/videoPlayer",19:"bundles/questionTypes/audio",20:"bundles/questionTypes/audioAdv",21:"bundles/questionTypes/boolean",22:"bundles/questionTypes/chemistry",23:"bundles/questionTypes/chemistryEssay",24:"bundles/questionTypes/cloze",25:"bundles/questionTypes/clozeChemistry",26:"bundles/questionTypes/clozeDropdown",27:"bundles/questionTypes/clozeFormula",28:"bundles/questionTypes/custom",29:"bundles/questionTypes/fileUpload",30:"bundles/questionTypes/fillshape",31:"bundles/questionTypes/formula",32:"bundles/questionTypes/formulaEssay",33:"bundles/questionTypes/formulaV2",34:"bundles/questionTypes/graphPlotting",35:"bundles/questionTypes/gridded",36:"bundles/questionTypes/hotspot",37:"bundles/questionTypes/imageUpload",38:"bundles/questionTypes/longText",39:"bundles/questionTypes/numberLine",40:"bundles/questionTypes/numberLinePlot",41:"bundles/questionTypes/plainText",42:"bundles/questionTypes/score",43:"bundles/questionTypes/simpleChart",44:"bundles/questionTypes/simpleShading",45:"bundles/questionTypes/sortList",46:"bundles/questionTypes/textHighlight",47:"bundles/questionTypes/unknown",48:"bundles/widgets/features/calculator",49:"bundles/widgets/features/imageTool",50:"bundles/widgets/features/lineReader",51:"bundles/widgets/features/scrollablePassage",52:"bundles/widgets/features/sharedPassage",53:"bundles/widgets/questions/association",54:"bundles/widgets/questions/choiceMatrix",55:"bundles/widgets/questions/classification",56:"bundles/widgets/questions/clozeAssociation",57:"bundles/widgets/questions/clozeDropdown",58:"bundles/widgets/questions/clozeText",59:"bundles/widgets/questions/drawing",60:"bundles/widgets/questions/highlight",61:"bundles/widgets/questions/imageclozeassociationV2",62:"bundles/widgets/questions/longTextV2",63:"bundles/widgets/questions/mcq",64:"bundles/widgets/questions/orderList",65:"bundles/widgets/questions/rating",66:"bundles/widgets/questions/shortText",67:"bundles/widgets/questions/tokenHighlight",68:"bundles/widgets/questions/video",69:"bundles/workers/spokenmath.worker",70:"vendor/MathJax/MathJax",71:"vendor/mathquill"}[e]||e)+".js"}(e),0!==s.src.indexOf(window.location.origin+"/")&&(s.crossOrigin="anonymous");var o=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(u);var i=n[e];if(0!==i){if(i){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,i[1](o)}n[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__.oe=function(e){throw console.error(e),e};var i=window.LearnosityAmd=window.LearnosityAmd||[],r=i.push.bind(i);i.push=webpackJsonpCallback,i=i.slice();for(var a=0;a<i.length;a++)webpackJsonpCallback(i[a]);var s=r;__webpack_require__(__webpack_require__.s=59)}([function(e,t,n){(function(e,n){var i;!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},a=r._,s=Array.prototype,o=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,l=s.push,c=s.slice,d=o.toString,p=o.hasOwnProperty,h=Array.isArray,f=Object.keys,g=Object.create,Ctor=function(){},_=function(e){return e instanceof _?e:this instanceof _?void(this._wrapped=e):new _(e)};t.nodeType?r._=_:(!n.nodeType&&n.exports&&(t=n.exports=_),t._=_),_.VERSION="1.9.1";var m,optimizeCb=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)}}return function(){return e.apply(t,arguments)}},cb=function(e,t,n){return _.iteratee!==m?_.iteratee(e,t):null==e?_.identity:_.isFunction(e)?optimizeCb(e,t,n):_.isObject(e)&&!_.isArray(e)?_.matcher(e):_.property(e)};_.iteratee=m=function(e,t){return cb(e,t,1/0)};var restArguments=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var a=Array(t+1);for(r=0;r<t;r++)a[r]=arguments[r];return a[t]=i,e.apply(this,a)}},baseCreate=function(e){if(!_.isObject(e))return{};if(g)return g(e);Ctor.prototype=e;var t=new Ctor;return Ctor.prototype=null,t},shallowProperty=function(e){return function(t){return null==t?void 0:t[e]}},has=function(e,t){return null!=e&&p.call(e,t)},deepGet=function(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0},v=Math.pow(2,53)-1,y=shallowProperty("length"),isArrayLike=function(e){var t=y(e);return"number"==typeof t&&t>=0&&t<=v};_.each=_.forEach=function(e,t,n){var i,r;if(t=optimizeCb(t,n),isArrayLike(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var a=_.keys(e);for(i=0,r=a.length;i<r;i++)t(e[a[i]],a[i],e)}return e},_.map=_.collect=function(e,t,n){t=cb(t,n);for(var i=!isArrayLike(e)&&_.keys(e),r=(i||e).length,a=Array(r),s=0;s<r;s++){var o=i?i[s]:s;a[s]=t(e[o],o,e)}return a};var createReduce=function(e){var reducer=function(t,n,i,r){var a=!isArrayLike(t)&&_.keys(t),s=(a||t).length,o=e>0?0:s-1;for(r||(i=t[a?a[o]:o],o+=e);o>=0&&o<s;o+=e){var u=a?a[o]:o;i=n(i,t[u],u,t)}return i};return function(e,t,n,i){var r=arguments.length>=3;return reducer(e,optimizeCb(t,i,4),n,r)}};_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(e,t,n){var i=(isArrayLike(e)?_.findIndex:_.findKey)(e,t,n);if(void 0!==i&&-1!==i)return e[i]},_.filter=_.select=function(e,t,n){var i=[];return t=cb(t,n),_.each(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i},_.reject=function(e,t,n){return _.filter(e,_.negate(cb(t)),n)},_.every=_.all=function(e,t,n){t=cb(t,n);for(var i=!isArrayLike(e)&&_.keys(e),r=(i||e).length,a=0;a<r;a++){var s=i?i[a]:a;if(!t(e[s],s,e))return!1}return!0},_.some=_.any=function(e,t,n){t=cb(t,n);for(var i=!isArrayLike(e)&&_.keys(e),r=(i||e).length,a=0;a<r;a++){var s=i?i[a]:a;if(t(e[s],s,e))return!0}return!1},_.contains=_.includes=_.include=function(e,t,n,i){return isArrayLike(e)||(e=_.values(e)),("number"!=typeof n||i)&&(n=0),_.indexOf(e,t,n)>=0},_.invoke=restArguments((function(e,t,n){var i,r;return _.isFunction(t)?r=t:_.isArray(t)&&(i=t.slice(0,-1),t=t[t.length-1]),_.map(e,(function(e){var a=r;if(!a){if(i&&i.length&&(e=deepGet(e,i)),null==e)return;a=e[t]}return null==a?a:a.apply(e,n)}))})),_.pluck=function(e,t){return _.map(e,_.property(t))},_.where=function(e,t){return _.filter(e,_.matcher(t))},_.findWhere=function(e,t){return _.find(e,_.matcher(t))},_.max=function(e,t,n){var i,r,a=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var o=0,u=(e=isArrayLike(e)?e:_.values(e)).length;o<u;o++)null!=(i=e[o])&&i>a&&(a=i);else t=cb(t,n),_.each(e,(function(e,n,i){((r=t(e,n,i))>s||r===-1/0&&a===-1/0)&&(a=e,s=r)}));return a},_.min=function(e,t,n){var i,r,a=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var o=0,u=(e=isArrayLike(e)?e:_.values(e)).length;o<u;o++)null!=(i=e[o])&&i<a&&(a=i);else t=cb(t,n),_.each(e,(function(e,n,i){((r=t(e,n,i))<s||r===1/0&&a===1/0)&&(a=e,s=r)}));return a},_.shuffle=function(e){return _.sample(e,1/0)},_.sample=function(e,t,n){if(null==t||n)return isArrayLike(e)||(e=_.values(e)),e[_.random(e.length-1)];var i=isArrayLike(e)?_.clone(e):_.values(e),r=y(i);t=Math.max(Math.min(t,r),0);for(var a=r-1,s=0;s<t;s++){var o=_.random(s,a),u=i[s];i[s]=i[o],i[o]=u}return i.slice(0,t)},_.sortBy=function(e,t,n){var i=0;return t=cb(t,n),_.pluck(_.map(e,(function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")};var group=function(e,t){return function(n,i,r){var a=t?[[],[]]:{};return i=cb(i,r),_.each(n,(function(t,r){var s=i(t,r,n);e(a,t,s)})),a}};_.groupBy=group((function(e,t,n){has(e,n)?e[n].push(t):e[n]=[t]})),_.indexBy=group((function(e,t,n){e[n]=t})),_.countBy=group((function(e,t,n){has(e,n)?e[n]++:e[n]=1}));var b=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(e){return e?_.isArray(e)?c.call(e):_.isString(e)?e.match(b):isArrayLike(e)?_.map(e,_.identity):_.values(e):[]},_.size=function(e){return null==e?0:isArrayLike(e)?e.length:_.keys(e).length},_.partition=group((function(e,t,n){e[n?0:1].push(t)}),!0),_.first=_.head=_.take=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[0]:_.initial(e,e.length-t)},_.initial=function(e,t,n){return c.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},_.last=function(e,t,n){return null==e||e.length<1?null==t?void 0:[]:null==t||n?e[e.length-1]:_.rest(e,Math.max(0,e.length-t))},_.rest=_.tail=_.drop=function(e,t,n){return c.call(e,null==t||n?1:t)},_.compact=function(e){return _.filter(e,Boolean)};var flatten=function(e,t,n,i){for(var r=(i=i||[]).length,a=0,s=y(e);a<s;a++){var o=e[a];if(isArrayLike(o)&&(_.isArray(o)||_.isArguments(o)))if(t)for(var u=0,l=o.length;u<l;)i[r++]=o[u++];else flatten(o,t,n,i),r=i.length;else n||(i[r++]=o)}return i};_.flatten=function(e,t){return flatten(e,t,!1)},_.without=restArguments((function(e,t){return _.difference(e,t)})),_.uniq=_.unique=function(e,t,n,i){_.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=cb(n,i));for(var r=[],a=[],s=0,o=y(e);s<o;s++){var u=e[s],l=n?n(u,s,e):u;t&&!n?(s&&a===l||r.push(u),a=l):n?_.contains(a,l)||(a.push(l),r.push(u)):_.contains(r,u)||r.push(u)}return r},_.union=restArguments((function(e){return _.uniq(flatten(e,!0,!0))})),_.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=y(e);i<r;i++){var a=e[i];if(!_.contains(t,a)){var s;for(s=1;s<n&&_.contains(arguments[s],a);s++);s===n&&t.push(a)}}return t},_.difference=restArguments((function(e,t){return t=flatten(t,!0,!0),_.filter(e,(function(e){return!_.contains(t,e)}))})),_.unzip=function(e){for(var t=e&&_.max(e,y).length||0,n=Array(t),i=0;i<t;i++)n[i]=_.pluck(e,i);return n},_.zip=restArguments(_.unzip),_.object=function(e,t){for(var n={},i=0,r=y(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n};var createPredicateIndexFinder=function(e){return function(t,n,i){n=cb(n,i);for(var r=y(t),a=e>0?0:r-1;a>=0&&a<r;a+=e)if(n(t[a],a,t))return a;return-1}};_.findIndex=createPredicateIndexFinder(1),_.findLastIndex=createPredicateIndexFinder(-1),_.sortedIndex=function(e,t,n,i){for(var r=(n=cb(n,i,1))(t),a=0,s=y(e);a<s;){var o=Math.floor((a+s)/2);n(e[o])<r?a=o+1:s=o}return a};var createIndexFinder=function(e,t,n){return function(i,r,a){var s=0,o=y(i);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+o,s):o=a>=0?Math.min(a+1,o):a+o+1;else if(n&&a&&o)return i[a=n(i,r)]===r?a:-1;if(r!=r)return(a=t(c.call(i,s,o),_.isNaN))>=0?a+s:-1;for(a=e>0?s:o-1;a>=0&&a<o;a+=e)if(i[a]===r)return a;return-1}};_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFinder(-1,_.findLastIndex),_.range=function(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),a=0;a<i;a++,e+=n)r[a]=e;return r},_.chunk=function(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(c.call(e,i,i+=t));return n};var executeBound=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var a=baseCreate(e.prototype),s=e.apply(a,r);return _.isObject(s)?s:a};_.bind=restArguments((function(e,t,n){if(!_.isFunction(e))throw new TypeError("Bind must be called on a function");var i=restArguments((function(r){return executeBound(e,i,t,this,n.concat(r))}));return i})),_.partial=restArguments((function(e,t){var n=_.partial.placeholder,bound=function(){for(var i=0,r=t.length,a=Array(r),s=0;s<r;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return executeBound(e,bound,this,this,a)};return bound})),_.partial.placeholder=_,_.bindAll=restArguments((function(e,t){var n=(t=flatten(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=_.bind(e[i],e)}})),_.memoize=function(e,t){var memoize=function(n){var i=memoize.cache,r=""+(t?t.apply(this,arguments):n);return has(i,r)||(i[r]=e.apply(this,arguments)),i[r]};return memoize.cache={},memoize},_.delay=restArguments((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),_.defer=_.partial(_.delay,_,1),_.throttle=function(e,t,n){var i,r,a,s,o=0;n||(n={});var later=function(){o=!1===n.leading?0:_.now(),i=null,s=e.apply(r,a),i||(r=a=null)},throttled=function(){var u=_.now();o||!1!==n.leading||(o=u);var l=t-(u-o);return r=this,a=arguments,l<=0||l>t?(i&&(clearTimeout(i),i=null),o=u,s=e.apply(r,a),i||(r=a=null)):i||!1===n.trailing||(i=setTimeout(later,l)),s};return throttled.cancel=function(){clearTimeout(i),o=0,i=r=a=null},throttled},_.debounce=function(e,t,n){var i,r,later=function(t,n){i=null,n&&(r=e.apply(t,n))},a=restArguments((function(a){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(later,t),s&&(r=e.apply(this,a))}else i=_.delay(later,t,this,a);return r}));return a.cancel=function(){clearTimeout(i),i=null},a},_.wrap=function(e,t){return _.partial(t,e)},_.negate=function(e){return function(){return!e.apply(this,arguments)}},_.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},_.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},_.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},_.once=_.partial(_.before,2),_.restArguments=restArguments;var S=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],collectNonEnumProps=function(e,t){var n=E.length,i=e.constructor,r=_.isFunction(i)&&i.prototype||o,a="constructor";for(has(e,a)&&!_.contains(t,a)&&t.push(a);n--;)(a=E[n])in e&&e[a]!==r[a]&&!_.contains(t,a)&&t.push(a)};_.keys=function(e){if(!_.isObject(e))return[];if(f)return f(e);var t=[];for(var n in e)has(e,n)&&t.push(n);return S&&collectNonEnumProps(e,t),t},_.allKeys=function(e){if(!_.isObject(e))return[];var t=[];for(var n in e)t.push(n);return S&&collectNonEnumProps(e,t),t},_.values=function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i},_.mapObject=function(e,t,n){t=cb(t,n);for(var i=_.keys(e),r=i.length,a={},s=0;s<r;s++){var o=i[s];a[o]=t(e[o],o,e)}return a},_.pairs=function(e){for(var t=_.keys(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i},_.invert=function(e){for(var t={},n=_.keys(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t},_.functions=_.methods=function(e){var t=[];for(var n in e)_.isFunction(e[n])&&t.push(n);return t.sort()};var createAssigner=function(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var a=arguments[r],s=e(a),o=s.length,u=0;u<o;u++){var l=s[u];t&&void 0!==n[l]||(n[l]=a[l])}return n}};_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(e,t,n){t=cb(t,n);for(var i,r=_.keys(e),a=0,s=r.length;a<s;a++)if(t(e[i=r[a]],i,e))return i};var w,A,keyInObj=function(e,t,n){return t in n};_.pick=restArguments((function(e,t){var n={},i=t[0];if(null==e)return n;_.isFunction(i)?(t.length>1&&(i=optimizeCb(i,t[1])),t=_.allKeys(e)):(i=keyInObj,t=flatten(t,!1,!1),e=Object(e));for(var r=0,a=t.length;r<a;r++){var s=t[r],o=e[s];i(o,s,e)&&(n[s]=o)}return n})),_.omit=restArguments((function(e,t){var n,i=t[0];return _.isFunction(i)?(i=_.negate(i),t.length>1&&(n=t[1])):(t=_.map(flatten(t,!1,!1),String),i=function(e,n){return!_.contains(t,n)}),_.pick(e,i,n)})),_.defaults=createAssigner(_.allKeys,!0),_.create=function(e,t){var n=baseCreate(e);return t&&_.extendOwn(n,t),n},_.clone=function(e){return _.isObject(e)?_.isArray(e)?e.slice():_.extend({},e):e},_.tap=function(e,t){return t(e),e},_.isMatch=function(e,t){var n=_.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),a=0;a<i;a++){var s=n[a];if(t[s]!==r[s]||!(s in r))return!1}return!0},w=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&A(e,t,n,i)},A=function(e,t,n,i){e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return u.valueOf.call(e)===u.valueOf.call(t)}var a="[object Array]"===r;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,o=t.constructor;if(s!==o&&!(_.isFunction(s)&&s instanceof s&&_.isFunction(o)&&o instanceof o)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var l=(n=n||[]).length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),a){if((l=e.length)!==t.length)return!1;for(;l--;)if(!w(e[l],t[l],n,i))return!1}else{var c,p=_.keys(e);if(l=p.length,_.keys(t).length!==l)return!1;for(;l--;)if(c=p[l],!has(t,c)||!w(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0},_.isEqual=function(e,t){return w(e,t)},_.isEmpty=function(e){return null==e||(isArrayLike(e)&&(_.isArray(e)||_.isString(e)||_.isArguments(e))?0===e.length:0===_.keys(e).length)},_.isElement=function(e){return!(!e||1!==e.nodeType)},_.isArray=h||function(e){return"[object Array]"===d.call(e)},_.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},_.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],(function(e){_["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}})),_.isArguments(arguments)||(_.isArguments=function(e){return has(e,"callee")});var T=r.document&&r.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof T&&(_.isFunction=function(e){return"function"==typeof e||!1}),_.isFinite=function(e){return!_.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},_.isNaN=function(e){return _.isNumber(e)&&isNaN(e)},_.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},_.isNull=function(e){return null===e},_.isUndefined=function(e){return void 0===e},_.has=function(e,t){if(!_.isArray(t))return has(e,t);for(var n=t.length,i=0;i<n;i++){var r=t[i];if(null==e||!p.call(e,r))return!1;e=e[r]}return!!n},_.noConflict=function(){return r._=a,this},_.identity=function(e){return e},_.constant=function(e){return function(){return e}},_.noop=function(){},_.property=function(e){return _.isArray(e)?function(t){return deepGet(t,e)}:shallowProperty(e)},_.propertyOf=function(e){return null==e?function(){}:function(t){return _.isArray(t)?deepGet(e,t):e[t]}},_.matcher=_.matches=function(e){return e=_.extendOwn({},e),function(t){return _.isMatch(t,e)}},_.times=function(e,t,n){var i=Array(Math.max(0,e));t=optimizeCb(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i},_.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},_.now=Date.now||function(){return(new Date).getTime()};var x={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},R=_.invert(x),createEscaper=function(e){var escaper=function(t){return e[t]},t="(?:"+_.keys(e).join("|")+")",n=RegExp(t),i=RegExp(t,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,escaper):e}};_.escape=createEscaper(x),_.unescape=createEscaper(R),_.result=function(e,t,n){_.isArray(t)||(t=[t]);var i=t.length;if(!i)return _.isFunction(n)?n.call(e):n;for(var r=0;r<i;r++){var a=null==e?void 0:e[t[r]];void 0===a&&(a=n,r=i),e=_.isFunction(a)?a.call(e):a}return e};var C=0;_.uniqueId=function(e){var t=++C+"";return e?e+t:t},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,I={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(e){return"\\"+I[e]};_.template=function(e,t,n){!t&&n&&(t=n),t=_.defaults({},t,_.templateSettings);var i,r=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(r,(function(t,n,i,r,o){return s+=e.slice(a,o).replace(O,escapeChar),a=o+t.length,n?s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?s+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t})),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(t.variable||"obj","_",s)}catch(e){throw e.source=s,e}var template=function(e){return i.call(this,e,_)},o=t.variable||"obj";return template.source="function("+o+"){\n"+s+"}",template},_.chain=function(e){var t=_(e);return t._chain=!0,t};var chainResult=function(e,t){return e._chain?_(t).chain():t};_.mixin=function(e){return _.each(_.functions(e),(function(t){var n=_[t]=e[t];_.prototype[t]=function(){var e=[this._wrapped];return l.apply(e,arguments),chainResult(this,n.apply(_,e))}})),_},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=s[e];_.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],chainResult(this,n)}})),_.each(["concat","join","slice"],(function(e){var t=s[e];_.prototype[e]=function(){return chainResult(this,t.apply(this._wrapped,arguments))}})),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return String(this._wrapped)},void 0===(i=function(){return _}.apply(t,[]))||(n.exports=i)}()}).call(this,n(31),n(54)(e))},function(e,t,n){var i;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,r){"use strict";var a=[],s=n.document,o=Object.getPrototypeOf,u=a.slice,l=a.concat,c=a.push,d=a.indexOf,p={},h=p.toString,f=p.hasOwnProperty,g=f.toString,m=g.call(Object),v={},y=function isFunction(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function isWindow(e){return null!=e&&e===e.window},S={type:!0,src:!0,nonce:!0,noModule:!0};function DOMEval(e,t,n){var i,r,a=(n=n||s).createElement("script");if(a.text=e,t)for(i in S)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,r);n.head.appendChild(a).parentNode.removeChild(a)}function toType(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?p[h.call(e)]||"object":typeof e}var jQuery=function(e,t){return new jQuery.fn.init(e,t)},E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function isArrayLike(e){var t=!!e&&"length"in e&&e.length,n=toType(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}jQuery.fn=jQuery.prototype={jquery:"3.4.1",constructor:jQuery,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=jQuery.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return jQuery.each(this,e)},map:function(e){return this.pushStack(jQuery.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},jQuery.extend=jQuery.fn.extend=function(){var e,t,n,i,r,a,s=arguments[0]||{},o=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[o]||{},o++),"object"==typeof s||y(s)||(s={}),o===u&&(s=this,o--);o<u;o++)if(null!=(e=arguments[o]))for(t in e)i=e[t],"__proto__"!==t&&s!==i&&(l&&i&&(jQuery.isPlainObject(i)||(r=Array.isArray(i)))?(n=s[t],a=r&&!Array.isArray(n)?[]:r||jQuery.isPlainObject(n)?n:{},r=!1,s[t]=jQuery.extend(l,a,i)):void 0!==i&&(s[t]=i));return s},jQuery.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e))&&(!(t=o(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&g.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){DOMEval(e,{nonce:t&&t.nonce})},each:function(e,t){var n,i=0;if(isArrayLike(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(E,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(isArrayLike(Object(e))?jQuery.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,s=!n;r<a;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,s=[];if(isArrayLike(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&s.push(r);return l.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(jQuery.fn[Symbol.iterator]=a[Symbol.iterator]),jQuery.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){p["[object "+t+"]"]=t.toLowerCase()}));var _=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(e){var t,n,i,r,a,s,o,u,l,c,d,p,h,f,g,m,v,y,b,S="sizzle"+1*new Date,E=e.document,_=0,w=0,A=createCache(),T=createCache(),x=createCache(),R=createCache(),sortOrder=function(e,t){return e===t&&(d=!0),0},C={}.hasOwnProperty,M=[],I=M.pop,O=M.push,N=M.push,k=M.slice,indexOf=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",D="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+L+"*("+D+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+L+"*\\]",q=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",V=new RegExp(L+"+","g"),U=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),j=new RegExp("^"+L+"*,"+L+"*"),B=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),H=new RegExp(L+"|>"),Q=new RegExp(q),z=new RegExp("^"+D+"$"),G={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},W=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),funescape=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ee=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,fcssescape=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},unloadHandler=function(){p()},te=addCombinator((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{N.apply(M=k.call(E.childNodes),E.childNodes),M[E.childNodes.length].nodeType}catch(e){N={apply:M.length?function(e,t){O.apply(e,k.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function Sizzle(e,t,i,r){var a,o,l,c,d,f,v,y=t&&t.ownerDocument,_=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==_&&9!==_&&11!==_)return i;if(!r&&((t?t.ownerDocument||t:E)!==h&&p(t),t=t||h,g)){if(11!==_&&(d=X.exec(e)))if(a=d[1]){if(9===_){if(!(l=t.getElementById(a)))return i;if(l.id===a)return i.push(l),i}else if(y&&(l=y.getElementById(a))&&b(t,l)&&l.id===a)return i.push(l),i}else{if(d[2])return N.apply(i,t.getElementsByTagName(e)),i;if((a=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return N.apply(i,t.getElementsByClassName(a)),i}if(n.qsa&&!R[e+" "]&&(!m||!m.test(e))&&(1!==_||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===_&&H.test(e)){for((c=t.getAttribute("id"))?c=c.replace(ee,fcssescape):t.setAttribute("id",c=S),o=(f=s(e)).length;o--;)f[o]="#"+c+" "+toSelector(f[o]);v=f.join(","),y=K.test(e)&&testContext(t.parentNode)||t}try{return N.apply(i,y.querySelectorAll(v)),i}catch(t){R(e,!0)}finally{c===S&&t.removeAttribute("id")}}}return u(e.replace(U,"$1"),t,i,r)}function createCache(){var e=[];return function cache(t,n){return e.push(t+" ")>i.cacheLength&&delete cache[e.shift()],cache[t+" "]=n}}function markFunction(e){return e[S]=!0,e}function assert(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function addHandle(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function siblingCheck(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function createInputPseudo(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function createButtonPseudo(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function createDisabledPseudo(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&te(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function createPositionalPseudo(e){return markFunction((function(t){return t=+t,markFunction((function(n,i){for(var r,a=e([],n.length,t),s=a.length;s--;)n[r=a[s]]&&(n[r]=!(i[r]=n[r]))}))}))}function testContext(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=Sizzle.support={},a=Sizzle.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!W.test(t||n&&n.nodeName||"HTML")},p=Sizzle.setDocument=function(e){var t,r,s=e?e.ownerDocument||e:E;return s!==h&&9===s.nodeType&&s.documentElement?(f=(h=s).documentElement,g=!a(h),E!==h&&(r=h.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",unloadHandler,!1):r.attachEvent&&r.attachEvent("onunload",unloadHandler)),n.attributes=assert((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=assert((function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(h.getElementsByClassName),n.getById=assert((function(e){return f.appendChild(e).id=S,!h.getElementsByName||!h.getElementsByName(S).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(Z,funescape);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(Z,funescape);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,i,r,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(r=t.getElementsByName(e),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=J.test(h.querySelectorAll))&&(assert((function(e){f.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+S+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||m.push(".#.+[+~]")})),assert((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&assert((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",q)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(f.compareDocumentPosition),b=t||J.test(f.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},sortOrder=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e===h||e.ownerDocument===E&&b(E,e)?-1:t===h||t.ownerDocument===E&&b(E,t)?1:c?indexOf(c,e)-indexOf(c,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a)return e===h?-1:t===h?1:r?-1:a?1:c?indexOf(c,e)-indexOf(c,t):0;if(r===a)return siblingCheck(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)o.unshift(n);for(;s[i]===o[i];)i++;return i?siblingCheck(s[i],o[i]):s[i]===E?-1:o[i]===E?1:0},h):h},Sizzle.matches=function(e,t){return Sizzle(e,null,null,t)},Sizzle.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&p(e),n.matchesSelector&&g&&!R[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){R(t,!0)}return Sizzle(t,h,null,[e]).length>0},Sizzle.contains=function(e,t){return(e.ownerDocument||e)!==h&&p(e),b(e,t)},Sizzle.attr=function(e,t){(e.ownerDocument||e)!==h&&p(e);var r=i.attrHandle[t.toLowerCase()],a=r&&C.call(i.attrHandle,t.toLowerCase())?r(e,t,!g):void 0;return void 0!==a?a:n.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},Sizzle.escape=function(e){return(e+"").replace(ee,fcssescape)},Sizzle.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},Sizzle.uniqueSort=function(e){var t,i=[],r=0,a=0;if(d=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(sortOrder),d){for(;t=e[a++];)t===e[a]&&(r=i.push(a));for(;r--;)e.splice(i[r],1)}return c=null,e},r=Sizzle.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,funescape),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,funescape),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Sizzle.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Sizzle.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Q.test(n)&&(t=s(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,funescape).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&A(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=Sizzle.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,p,h,f,g=a!==s?"nextSibling":"previousSibling",m=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!u&&!o,b=!1;if(m){if(a){for(;g;){for(p=t;p=p[g];)if(o?p.nodeName.toLowerCase()===v:1===p.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(b=(h=(l=(c=(d=(p=m)[S]||(p[S]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===_&&l[1])&&l[2],p=h&&m.childNodes[h];p=++h&&p&&p[g]||(b=h=0)||f.pop();)if(1===p.nodeType&&++b&&p===t){c[e]=[_,h,b];break}}else if(y&&(b=h=(l=(c=(d=(p=t)[S]||(p[S]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]||[])[0]===_&&l[1]),!1===b)for(;(p=++h&&p&&p[g]||(b=h=0)||f.pop())&&((o?p.nodeName.toLowerCase()!==v:1!==p.nodeType)||!++b||(y&&((c=(d=p[S]||(p[S]={}))[p.uniqueID]||(d[p.uniqueID]={}))[e]=[_,b]),p!==t)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||Sizzle.error("unsupported pseudo: "+e);return r[S]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?markFunction((function(e,n){for(var i,a=r(e,t),s=a.length;s--;)e[i=indexOf(e,a[s])]=!(n[i]=a[s])})):function(e){return r(e,0,n)}):r}},pseudos:{not:markFunction((function(e){var t=[],n=[],i=o(e.replace(U,"$1"));return i[S]?markFunction((function(e,t,n,r){for(var a,s=i(e,null,r,[]),o=e.length;o--;)(a=s[o])&&(e[o]=!(t[o]=a))})):function(e,r,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}})),has:markFunction((function(e){return function(t){return Sizzle(e,t).length>0}})),contains:markFunction((function(e){return e=e.replace(Z,funescape),function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:markFunction((function(e){return z.test(e||"")||Sizzle.error("unsupported lang: "+e),e=e.replace(Z,funescape).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Y.test(e.nodeName)},input:function(e){return $.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:createPositionalPseudo((function(){return[0]})),last:createPositionalPseudo((function(e,t){return[t-1]})),eq:createPositionalPseudo((function(e,t,n){return[n<0?n+t:n]})),even:createPositionalPseudo((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:createPositionalPseudo((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:createPositionalPseudo((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:createPositionalPseudo((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=createInputPseudo(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=createButtonPseudo(t);function setFilters(){}function toSelector(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function addCombinator(e,t,n){var i=t.dir,r=t.next,a=r||i,s=n&&"parentNode"===a,o=w++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r);return!1}:function(t,n,u){var l,c,d,p=[_,o];if(u){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,u))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(c=(d=t[S]||(t[S]={}))[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((l=c[a])&&l[0]===_&&l[1]===o)return p[2]=l[2];if(c[a]=p,p[2]=e(t,n,u))return!0}return!1}}function elementMatcher(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function condense(e,t,n,i,r){for(var a,s=[],o=0,u=e.length,l=null!=t;o<u;o++)(a=e[o])&&(n&&!n(a,i,r)||(s.push(a),l&&t.push(o)));return s}function setMatcher(e,t,n,i,r,a){return i&&!i[S]&&(i=setMatcher(i)),r&&!r[S]&&(r=setMatcher(r,a)),markFunction((function(a,s,o,u){var l,c,d,p=[],h=[],f=s.length,g=a||function multipleContexts(e,t,n){for(var i=0,r=t.length;i<r;i++)Sizzle(e,t[i],n);return n}(t||"*",o.nodeType?[o]:o,[]),m=!e||!a&&t?g:condense(g,p,e,o,u),v=n?r||(a?e:f||i)?[]:s:m;if(n&&n(m,v,o,u),i)for(l=condense(v,h),i(l,[],o,u),c=l.length;c--;)(d=l[c])&&(v[h[c]]=!(m[h[c]]=d));if(a){if(r||e){if(r){for(l=[],c=v.length;c--;)(d=v[c])&&l.push(m[c]=d);r(null,v=[],l,u)}for(c=v.length;c--;)(d=v[c])&&(l=r?indexOf(a,d):p[c])>-1&&(a[l]=!(s[l]=d))}}else v=condense(v===s?v.splice(f,v.length):v),r?r(null,s,v,u):N.apply(s,v)}))}function matcherFromTokens(e){for(var t,n,r,a=e.length,s=i.relative[e[0].type],o=s||i.relative[" "],u=s?1:0,c=addCombinator((function(e){return e===t}),o,!0),d=addCombinator((function(e){return indexOf(t,e)>-1}),o,!0),p=[function(e,n,i){var r=!s&&(i||n!==l)||((t=n).nodeType?c(e,n,i):d(e,n,i));return t=null,r}];u<a;u++)if(n=i.relative[e[u].type])p=[addCombinator(elementMatcher(p),n)];else{if((n=i.filter[e[u].type].apply(null,e[u].matches))[S]){for(r=++u;r<a&&!i.relative[e[r].type];r++);return setMatcher(u>1&&elementMatcher(p),u>1&&toSelector(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(U,"$1"),n,u<r&&matcherFromTokens(e.slice(u,r)),r<a&&matcherFromTokens(e=e.slice(r)),r<a&&toSelector(e))}p.push(n)}return elementMatcher(p)}return setFilters.prototype=i.filters=i.pseudos,i.setFilters=new setFilters,s=Sizzle.tokenize=function(e,t){var n,r,a,s,o,u,l,c=T[e+" "];if(c)return t?0:c.slice(0);for(o=e,u=[],l=i.preFilter;o;){for(s in n&&!(r=j.exec(o))||(r&&(o=o.slice(r[0].length)||o),u.push(a=[])),n=!1,(r=B.exec(o))&&(n=r.shift(),a.push({value:n,type:r[0].replace(U," ")}),o=o.slice(n.length)),i.filter)!(r=G[s].exec(o))||l[s]&&!(r=l[s](r))||(n=r.shift(),a.push({value:n,type:s,matches:r}),o=o.slice(n.length));if(!n)break}return t?o.length:o?Sizzle.error(e):T(e,u).slice(0)},o=Sizzle.compile=function(e,t){var n,r=[],a=[],o=x[e+" "];if(!o){for(t||(t=s(e)),n=t.length;n--;)(o=matcherFromTokens(t[n]))[S]?r.push(o):a.push(o);(o=x(e,function matcherFromGroupMatchers(e,t){var n=t.length>0,r=e.length>0,superMatcher=function(a,s,o,u,c){var d,f,m,v=0,y="0",b=a&&[],S=[],E=l,w=a||r&&i.find.TAG("*",c),A=_+=null==E?1:Math.random()||.1,T=w.length;for(c&&(l=s===h||s||c);y!==T&&null!=(d=w[y]);y++){if(r&&d){for(f=0,s||d.ownerDocument===h||(p(d),o=!g);m=e[f++];)if(m(d,s||h,o)){u.push(d);break}c&&(_=A)}n&&((d=!m&&d)&&v--,a&&b.push(d))}if(v+=y,n&&y!==v){for(f=0;m=t[f++];)m(b,S,s,o);if(a){if(v>0)for(;y--;)b[y]||S[y]||(S[y]=I.call(u));S=condense(S)}N.apply(u,S),c&&!a&&S.length>0&&v+t.length>1&&Sizzle.uniqueSort(u)}return c&&(_=A,l=E),b};return n?markFunction(superMatcher):superMatcher}(a,r))).selector=e}return o},u=Sizzle.select=function(e,t,n,r){var a,u,l,c,d,p="function"==typeof e&&e,h=!r&&s(e=p.selector||e);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&i.relative[u[1].type]){if(!(t=(i.find.ID(l.matches[0].replace(Z,funescape),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(a=G.needsContext.test(e)?0:u.length;a--&&(l=u[a],!i.relative[c=l.type]);)if((d=i.find[c])&&(r=d(l.matches[0].replace(Z,funescape),K.test(u[0].type)&&testContext(t.parentNode)||t))){if(u.splice(a,1),!(e=r.length&&toSelector(u)))return N.apply(n,r),n;break}}return(p||o(e,h))(r,t,!g,n,!t||K.test(e)&&testContext(t.parentNode)||t),n},n.sortStable=S.split("").sort(sortOrder).join("")===S,n.detectDuplicates=!!d,p(),n.sortDetached=assert((function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))})),assert((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||addHandle("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&assert((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||addHandle("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),assert((function(e){return null==e.getAttribute("disabled")}))||addHandle(P,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),Sizzle}(n);jQuery.find=_,jQuery.expr=_.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.uniqueSort=jQuery.unique=_.uniqueSort,jQuery.text=_.getText,jQuery.isXMLDoc=_.isXML,jQuery.contains=_.contains,jQuery.escapeSelector=_.escape;var dir=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&jQuery(e).is(n))break;i.push(e)}return i},siblings=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},w=jQuery.expr.match.needsContext;function nodeName(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function winnow(e,t,n){return y(t)?jQuery.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?jQuery.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?jQuery.grep(e,(function(e){return d.call(t,e)>-1!==n})):jQuery.filter(t,e,n)}jQuery.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?jQuery.find.matchesSelector(i,e)?[i]:[]:jQuery.find.matches(e,jQuery.grep(t,(function(e){return 1===e.nodeType})))},jQuery.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(jQuery(e).filter((function(){for(t=0;t<i;t++)if(jQuery.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)jQuery.find(e,r[t],n);return i>1?jQuery.uniqueSort(n):n},filter:function(e){return this.pushStack(winnow(this,e||[],!1))},not:function(e){return this.pushStack(winnow(this,e||[],!0))},is:function(e){return!!winnow(this,"string"==typeof e&&w.test(e)?jQuery(e):e||[],!1).length}});var T,x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(jQuery.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||T,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:x.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof jQuery?t[0]:t,jQuery.merge(this,jQuery.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:s,!0)),A.test(i[1])&&jQuery.isPlainObject(t))for(i in t)y(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=s.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(jQuery):jQuery.makeArray(e,this)}).prototype=jQuery.fn,T=jQuery(s);var R=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};function sibling(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}jQuery.fn.extend({has:function(e){var t=jQuery(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(jQuery.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,a=[],s="string"!=typeof e&&jQuery(e);if(!w.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&jQuery.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?jQuery.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?d.call(jQuery(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(jQuery.uniqueSort(jQuery.merge(this.get(),jQuery(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),jQuery.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return dir(e,"parentNode")},parentsUntil:function(e,t,n){return dir(e,"parentNode",n)},next:function(e){return sibling(e,"nextSibling")},prev:function(e){return sibling(e,"previousSibling")},nextAll:function(e){return dir(e,"nextSibling")},prevAll:function(e){return dir(e,"previousSibling")},nextUntil:function(e,t,n){return dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return dir(e,"previousSibling",n)},siblings:function(e){return siblings((e.parentNode||{}).firstChild,e)},children:function(e){return siblings(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(nodeName(e,"template")&&(e=e.content||e),jQuery.merge([],e.childNodes))}},(function(e,t){jQuery.fn[e]=function(n,i){var r=jQuery.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=jQuery.filter(i,r)),this.length>1&&(C[e]||jQuery.uniqueSort(r),R.test(e)&&r.reverse()),this.pushStack(r)}}));var M=/[^\x20\t\r\n\f]+/g;function Identity(e){return e}function Thrower(e){throw e}function adoptValue(e,t,n,i){var r;try{e&&y(r=e.promise)?r.call(e).done(t).fail(n):e&&y(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}jQuery.Callbacks=function(e){e="string"==typeof e?function createOptions(e){var t={};return jQuery.each(e.match(M)||[],(function(e,n){t[n]=!0})),t}(e):jQuery.extend({},e);var t,n,i,r,a=[],s=[],o=-1,fire=function(){for(r=r||e.once,i=t=!0;s.length;o=-1)for(n=s.shift();++o<a.length;)!1===a[o].apply(n[0],n[1])&&e.stopOnFalse&&(o=a.length,n=!1);e.memory||(n=!1),t=!1,r&&(a=n?[]:"")},u={add:function(){return a&&(n&&!t&&(o=a.length-1,s.push(n)),function add(t){jQuery.each(t,(function(t,n){y(n)?e.unique&&u.has(n)||a.push(n):n&&n.length&&"string"!==toType(n)&&add(n)}))}(arguments),n&&!t&&fire()),this},remove:function(){return jQuery.each(arguments,(function(e,t){for(var n;(n=jQuery.inArray(t,a,n))>-1;)a.splice(n,1),n<=o&&o--})),this},has:function(e){return e?jQuery.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||t||(a=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],s.push(n),t||fire()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},jQuery.extend({Deferred:function(e){var t=[["notify","progress",jQuery.Callbacks("memory"),jQuery.Callbacks("memory"),2],["resolve","done",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),0,"resolved"],["reject","fail",jQuery.Callbacks("once memory"),jQuery.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return jQuery.Deferred((function(n){jQuery.each(t,(function(t,i){var r=y(e[i[4]])&&e[i[4]];a[i[1]]((function(){var e=r&&r.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(e,i,r){var a=0;function resolve(e,t,i,r){return function(){var s=this,o=arguments,mightThrow=function(){var n,u;if(!(e<a)){if((n=i.apply(s,o))===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(u)?r?u.call(n,resolve(a,t,Identity,r),resolve(a,t,Thrower,r)):(a++,u.call(n,resolve(a,t,Identity,r),resolve(a,t,Thrower,r),resolve(a,t,Identity,t.notifyWith))):(i!==Identity&&(s=void 0,o=[n]),(r||t.resolveWith)(s,o))}},u=r?mightThrow:function(){try{mightThrow()}catch(n){jQuery.Deferred.exceptionHook&&jQuery.Deferred.exceptionHook(n,u.stackTrace),e+1>=a&&(i!==Thrower&&(s=void 0,o=[n]),t.rejectWith(s,o))}};e?u():(jQuery.Deferred.getStackHook&&(u.stackTrace=jQuery.Deferred.getStackHook()),n.setTimeout(u))}}return jQuery.Deferred((function(n){t[0][3].add(resolve(0,n,y(r)?r:Identity,n.notifyWith)),t[1][3].add(resolve(0,n,y(e)?e:Identity)),t[2][3].add(resolve(0,n,y(i)?i:Thrower))})).promise()},promise:function(e){return null!=e?jQuery.extend(e,r):r}},a={};return jQuery.each(t,(function(e,n){var s=n[2],o=n[5];r[n[1]]=s.add,o&&s.add((function(){i=o}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),s.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=s.fireWith})),r.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,i=Array(n),r=u.call(arguments),a=jQuery.Deferred(),updateFunc=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?u.call(arguments):n,--t||a.resolveWith(i,r)}};if(t<=1&&(adoptValue(e,a.done(updateFunc(n)).resolve,a.reject,!t),"pending"===a.state()||y(r[n]&&r[n].then)))return a.then();for(;n--;)adoptValue(r[n],updateFunc(n),a.reject);return a.promise()}});var I=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;jQuery.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&I.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},jQuery.readyException=function(e){n.setTimeout((function(){throw e}))};var O=jQuery.Deferred();function completed(){s.removeEventListener("DOMContentLoaded",completed),n.removeEventListener("load",completed),jQuery.ready()}jQuery.fn.ready=function(e){return O.then(e).catch((function(e){jQuery.readyException(e)})),this},jQuery.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==e&&--jQuery.readyWait>0||O.resolveWith(s,[jQuery]))}}),jQuery.ready.then=O.then,"complete"===s.readyState||"loading"!==s.readyState&&!s.documentElement.doScroll?n.setTimeout(jQuery.ready):(s.addEventListener("DOMContentLoaded",completed),n.addEventListener("load",completed));var access=function(e,t,n,i,r,a,s){var o=0,u=e.length,l=null==n;if("object"===toType(n))for(o in r=!0,n)access(e,t,o,n[o],!0,a,s);else if(void 0!==i&&(r=!0,y(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(jQuery(e),n)})),t))for(;o<u;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:l?t.call(e):u?t(e[0],n):a},N=/^-ms-/,k=/-([a-z])/g;function fcamelCase(e,t){return t.toUpperCase()}function camelCase(e){return e.replace(N,"ms-").replace(k,fcamelCase)}var acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Data(){this.expando=jQuery.expando+Data.uid++}Data.uid=1,Data.prototype={cache:function(e){var t=e[this.expando];return t||(t={},acceptData(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[camelCase(t)]=n;else for(i in t)r[camelCase(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(camelCase):(t=camelCase(t))in i?[t]:t.match(M)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||jQuery.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!jQuery.isEmptyObject(t)}};var P=new Data,L=new Data,D=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,F=/[A-Z]/g;function dataAttr(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(F,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function getData(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:D.test(e)?JSON.parse(e):e)}(n)}catch(e){}L.set(e,t,n)}else n=void 0;return n}jQuery.extend({hasData:function(e){return L.hasData(e)||P.hasData(e)},data:function(e,t,n){return L.access(e,t,n)},removeData:function(e,t){L.remove(e,t)},_data:function(e,t,n){return P.access(e,t,n)},_removeData:function(e,t){P.remove(e,t)}}),jQuery.fn.extend({data:function(e,t){var n,i,r,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(r=L.get(a),1===a.nodeType&&!P.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&(i=camelCase(i.slice(5)),dataAttr(a,i,r[i]));P.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){L.set(this,e)})):access(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=L.get(a,e))?n:void 0!==(n=dataAttr(a,e))?n:void 0;this.each((function(){L.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){L.remove(this,e)}))}}),jQuery.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=P.get(e,t),n&&(!i||Array.isArray(n)?i=P.access(e,t,jQuery.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=jQuery.queue(e,t),i=n.length,r=n.shift(),a=jQuery._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,(function(){jQuery.dequeue(e,t)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return P.get(e,n)||P.access(e,n,{empty:jQuery.Callbacks("once memory").add((function(){P.remove(e,[t+"queue",n])}))})}}),jQuery.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?jQuery.queue(this[0],e):void 0===t?this:this.each((function(){var n=jQuery.queue(this,e,t);jQuery._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&jQuery.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){jQuery.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=jQuery.Deferred(),a=this,s=this.length,resolve=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(n=P.get(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(resolve));return resolve(),r.promise(t)}});var q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=new RegExp("^(?:([+-])=|)("+q+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],j=s.documentElement,isAttached=function(e){return jQuery.contains(e.ownerDocument,e)},B={composed:!0};j.getRootNode&&(isAttached=function(e){return jQuery.contains(e.ownerDocument,e)||e.getRootNode(B)===e.ownerDocument});var isHiddenWithinTree=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&isAttached(e)&&"none"===jQuery.css(e,"display")},swap=function(e,t,n,i){var r,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=s[a];return r};function adjustCSS(e,t,n,i){var r,a,s=20,o=i?function(){return i.cur()}:function(){return jQuery.css(e,t,"")},u=o(),l=n&&n[3]||(jQuery.cssNumber[t]?"":"px"),c=e.nodeType&&(jQuery.cssNumber[t]||"px"!==l&&+u)&&V.exec(jQuery.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;s--;)jQuery.style(e,t,c+l),(1-a)*(1-(a=o()/u||.5))<=0&&(s=0),c/=a;c*=2,jQuery.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}var H={};function getDefaultDisplay(e){var t,n=e.ownerDocument,i=e.nodeName,r=H[i];return r||(t=n.body.appendChild(n.createElement(i)),r=jQuery.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),H[i]=r,r)}function showHide(e,t){for(var n,i,r=[],a=0,s=e.length;a<s;a++)(i=e[a]).style&&(n=i.style.display,t?("none"===n&&(r[a]=P.get(i,"display")||null,r[a]||(i.style.display="")),""===i.style.display&&isHiddenWithinTree(i)&&(r[a]=getDefaultDisplay(i))):"none"!==n&&(r[a]="none",P.set(i,"display",n)));for(a=0;a<s;a++)null!=r[a]&&(e[a].style.display=r[a]);return e}jQuery.fn.extend({show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){isHiddenWithinTree(this)?jQuery(this).show():jQuery(this).hide()}))}});var Q=/^(?:checkbox|radio)$/i,z=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,G=/^$|^module$|\/(?:java|ecma)script/i,W={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function getAll(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&nodeName(e,t)?jQuery.merge([e],n):n}function setGlobalEval(e,t){for(var n=0,i=e.length;n<i;n++)P.set(e[n],"globalEval",!t||P.get(t[n],"globalEval"))}W.optgroup=W.option,W.tbody=W.tfoot=W.colgroup=W.caption=W.thead,W.th=W.td;var $,Y,J=/<|&#?\w+;/;function buildFragment(e,t,n,i,r){for(var a,s,o,u,l,c,d=t.createDocumentFragment(),p=[],h=0,f=e.length;h<f;h++)if((a=e[h])||0===a)if("object"===toType(a))jQuery.merge(p,a.nodeType?[a]:a);else if(J.test(a)){for(s=s||d.appendChild(t.createElement("div")),o=(z.exec(a)||["",""])[1].toLowerCase(),u=W[o]||W._default,s.innerHTML=u[1]+jQuery.htmlPrefilter(a)+u[2],c=u[0];c--;)s=s.lastChild;jQuery.merge(p,s.childNodes),(s=d.firstChild).textContent=""}else p.push(t.createTextNode(a));for(d.textContent="",h=0;a=p[h++];)if(i&&jQuery.inArray(a,i)>-1)r&&r.push(a);else if(l=isAttached(a),s=getAll(d.appendChild(a),"script"),l&&setGlobalEval(s),n)for(c=0;a=s[c++];)G.test(a.type||"")&&n.push(a);return d}$=s.createDocumentFragment().appendChild(s.createElement("div")),(Y=s.createElement("input")).setAttribute("type","radio"),Y.setAttribute("checked","checked"),Y.setAttribute("name","t"),$.appendChild(Y),v.checkClone=$.cloneNode(!0).cloneNode(!0).lastChild.checked,$.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!$.cloneNode(!0).lastChild.defaultValue;var X=/^key/,K=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Z=/^([^.]*)(?:\.(.+)|)/;function returnTrue(){return!0}function returnFalse(){return!1}function expectSync(e,t){return e===function safeActiveElement(){try{return s.activeElement}catch(e){}}()==("focus"===t)}function on(e,t,n,i,r,a){var s,o;if("object"==typeof t){for(o in"string"!=typeof n&&(i=i||n,n=void 0),t)on(e,o,n,i,t[o],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=returnFalse;else if(!r)return e;return 1===a&&(s=r,(r=function(e){return jQuery().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=jQuery.guid++)),e.each((function(){jQuery.event.add(this,t,r,i,n)}))}function leverageNative(e,t,n){n?(P.set(e,t,!1),jQuery.event.add(e,t,{namespace:!1,handler:function(e){var i,r,a=P.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(jQuery.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=u.call(arguments),P.set(this,t,a),i=n(this,t),this[t](),a!==(r=P.get(this,t))||i?P.set(this,t,!1):r={},a!==r)return e.stopImmediatePropagation(),e.preventDefault(),r.value}else a.length&&(P.set(this,t,{value:jQuery.event.trigger(jQuery.extend(a[0],jQuery.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===P.get(e,t)&&jQuery.event.add(e,t,returnTrue)}jQuery.event={global:{},add:function(e,t,n,i,r){var a,s,o,u,l,c,d,p,h,f,g,m=P.get(e);if(m)for(n.handler&&(n=(a=n).handler,r=a.selector),r&&jQuery.find.matchesSelector(j,r),n.guid||(n.guid=jQuery.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return void 0!==jQuery&&jQuery.event.triggered!==t.type?jQuery.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(M)||[""]).length;l--;)h=g=(o=Z.exec(t[l])||[])[1],f=(o[2]||"").split(".").sort(),h&&(d=jQuery.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,d=jQuery.event.special[h]||{},c=jQuery.extend({type:h,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&jQuery.expr.match.needsContext.test(r),namespace:f.join(".")},a),(p=u[h])||((p=u[h]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,s)||e.addEventListener&&e.addEventListener(h,s)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),jQuery.event.global[h]=!0)},remove:function(e,t,n,i,r){var a,s,o,u,l,c,d,p,h,f,g,m=P.hasData(e)&&P.get(e);if(m&&(u=m.events)){for(l=(t=(t||"").match(M)||[""]).length;l--;)if(h=g=(o=Z.exec(t[l])||[])[1],f=(o[2]||"").split(".").sort(),h){for(d=jQuery.event.special[h]||{},p=u[h=(i?d.delegateType:d.bindType)||h]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=p.length;a--;)c=p[a],!r&&g!==c.origType||n&&n.guid!==c.guid||o&&!o.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(a,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(e,c));s&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||jQuery.removeEvent(e,h,m.handle),delete u[h])}else for(h in u)jQuery.event.remove(e,h+t[l],n,i,!0);jQuery.isEmptyObject(u)&&P.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,a,s,o=jQuery.event.fix(e),u=new Array(arguments.length),l=(P.get(this,"events")||{})[o.type]||[],c=jQuery.event.special[o.type]||{};for(u[0]=o,t=1;t<arguments.length;t++)u[t]=arguments[t];if(o.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,o)){for(s=jQuery.event.handlers.call(this,o,l),t=0;(r=s[t++])&&!o.isPropagationStopped();)for(o.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!1!==a.namespace&&!o.rnamespace.test(a.namespace)||(o.handleObj=a,o.data=a.data,void 0!==(i=((jQuery.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,u))&&!1===(o.result=i)&&(o.preventDefault(),o.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,o),o.result}},handlers:function(e,t){var n,i,r,a,s,o=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(a=[],s={},n=0;n<u;n++)void 0===s[r=(i=t[n]).selector+" "]&&(s[r]=i.needsContext?jQuery(r,this).index(l)>-1:jQuery.find(r,this,null,[l]).length),s[r]&&a.push(i);a.length&&o.push({elem:l,handlers:a})}return l=this,u<t.length&&o.push({elem:l,handlers:t.slice(u)}),o},addProp:function(e,t){Object.defineProperty(jQuery.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[jQuery.expando]?e:new jQuery.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Q.test(t.type)&&t.click&&nodeName(t,"input")&&leverageNative(t,"click",returnTrue),!1},trigger:function(e){var t=this||e;return Q.test(t.type)&&t.click&&nodeName(t,"input")&&leverageNative(t,"click"),!0},_default:function(e){var t=e.target;return Q.test(t.type)&&t.click&&nodeName(t,"input")&&P.get(t,"click")||nodeName(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},jQuery.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},jQuery.Event=function(e,t){if(!(this instanceof jQuery.Event))return new jQuery.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?returnTrue:returnFalse,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&jQuery.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={constructor:jQuery.Event,isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&X.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&K.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},jQuery.event.addProp),jQuery.each({focus:"focusin",blur:"focusout"},(function(e,t){jQuery.event.special[e]={setup:function(){return leverageNative(this,e,expectSync),!1},trigger:function(){return leverageNative(this,e),!0},delegateType:t}})),jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){jQuery.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,a=e.handleObj;return r&&(r===i||jQuery.contains(i,r))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),jQuery.fn.extend({on:function(e,t,n,i){return on(this,e,t,n,i)},one:function(e,t,n,i){return on(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,jQuery(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=returnFalse),this.each((function(){jQuery.event.remove(this,e,n,t)}))}});var ee=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,te=/<script|<style|<link/i,ne=/checked\s*(?:[^=]|=\s*.checked.)/i,ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function manipulationTarget(e,t){return nodeName(e,"table")&&nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&jQuery(e).children("tbody")[0]||e}function disableScript(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function restoreScript(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function cloneCopyEvent(e,t){var n,i,r,a,s,o,u,l;if(1===t.nodeType){if(P.hasData(e)&&(a=P.access(e),s=P.set(t,a),l=a.events))for(r in delete s.handle,s.events={},l)for(n=0,i=l[r].length;n<i;n++)jQuery.event.add(t,r,l[r][n]);L.hasData(e)&&(o=L.access(e),u=jQuery.extend({},o),L.set(t,u))}}function fixInput(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Q.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function domManip(e,t,n,i){t=l.apply([],t);var r,a,s,o,u,c,d=0,p=e.length,h=p-1,f=t[0],g=y(f);if(g||p>1&&"string"==typeof f&&!v.checkClone&&ne.test(f))return e.each((function(r){var a=e.eq(r);g&&(t[0]=f.call(this,r,a.html())),domManip(a,t,n,i)}));if(p&&(a=(r=buildFragment(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=a),a||i)){for(o=(s=jQuery.map(getAll(r,"script"),disableScript)).length;d<p;d++)u=r,d!==h&&(u=jQuery.clone(u,!0,!0),o&&jQuery.merge(s,getAll(u,"script"))),n.call(e[d],u,d);if(o)for(c=s[s.length-1].ownerDocument,jQuery.map(s,restoreScript),d=0;d<o;d++)u=s[d],G.test(u.type||"")&&!P.access(u,"globalEval")&&jQuery.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?jQuery._evalUrl&&!u.noModule&&jQuery._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):DOMEval(u.textContent.replace(ie,""),u,c))}return e}function remove(e,t,n){for(var i,r=t?jQuery.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||jQuery.cleanData(getAll(i)),i.parentNode&&(n&&isAttached(i)&&setGlobalEval(getAll(i,"script")),i.parentNode.removeChild(i));return e}jQuery.extend({htmlPrefilter:function(e){return e.replace(ee,"<$1></$2>")},clone:function(e,t,n){var i,r,a,s,o=e.cloneNode(!0),u=isAttached(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||jQuery.isXMLDoc(e)))for(s=getAll(o),i=0,r=(a=getAll(e)).length;i<r;i++)fixInput(a[i],s[i]);if(t)if(n)for(a=a||getAll(e),s=s||getAll(o),i=0,r=a.length;i<r;i++)cloneCopyEvent(a[i],s[i]);else cloneCopyEvent(e,o);return(s=getAll(o,"script")).length>0&&setGlobalEval(s,!u&&getAll(e,"script")),o},cleanData:function(e){for(var t,n,i,r=jQuery.event.special,a=0;void 0!==(n=e[a]);a++)if(acceptData(n)){if(t=n[P.expando]){if(t.events)for(i in t.events)r[i]?jQuery.event.remove(n,i):jQuery.removeEvent(n,i,t.handle);n[P.expando]=void 0}n[L.expando]&&(n[L.expando]=void 0)}}}),jQuery.fn.extend({detach:function(e){return remove(this,e,!0)},remove:function(e){return remove(this,e)},text:function(e){return access(this,(function(e){return void 0===e?jQuery.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return domManip(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,e).appendChild(e)}))},prepend:function(){return domManip(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=manipulationTarget(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return domManip(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return domManip(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(jQuery.cleanData(getAll(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return jQuery.clone(this,e,t)}))},html:function(e){return access(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!te.test(e)&&!W[(z.exec(e)||["",""])[1].toLowerCase()]){e=jQuery.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(jQuery.cleanData(getAll(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return domManip(this,arguments,(function(t){var n=this.parentNode;jQuery.inArray(this,e)<0&&(jQuery.cleanData(getAll(this)),n&&n.replaceChild(t,this))}),e)}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){jQuery.fn[e]=function(e){for(var n,i=[],r=jQuery(e),a=r.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),jQuery(r[s])[t](n),c.apply(i,n.get());return this.pushStack(i)}}));var re=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),getStyles=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},ae=new RegExp(U.join("|"),"i");function curCSS(e,t,n){var i,r,a,s,o=e.style;return(n=n||getStyles(e))&&(""!==(s=n.getPropertyValue(t)||n[t])||isAttached(e)||(s=jQuery.style(e,t)),!v.pixelBoxStyles()&&re.test(s)&&ae.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a)),void 0!==s?s+"":s}function addGetHookIf(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function computeStyleTests(){if(u){o.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",j.appendChild(o).appendChild(u);var s=n.getComputedStyle(u);e="1%"!==s.top,a=12===roundPixelMeasures(s.marginLeft),u.style.right="60%",r=36===roundPixelMeasures(s.right),t=36===roundPixelMeasures(s.width),u.style.position="absolute",i=12===roundPixelMeasures(u.offsetWidth/3),j.removeChild(o),u=null}}function roundPixelMeasures(e){return Math.round(parseFloat(e))}var e,t,i,r,a,o=s.createElement("div"),u=s.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,jQuery.extend(v,{boxSizingReliable:function(){return computeStyleTests(),t},pixelBoxStyles:function(){return computeStyleTests(),r},pixelPosition:function(){return computeStyleTests(),e},reliableMarginLeft:function(){return computeStyleTests(),a},scrollboxSize:function(){return computeStyleTests(),i}}))}();var se=["Webkit","Moz","ms"],oe=s.createElement("div").style,ue={};function finalPropName(e){var t=jQuery.cssProps[e]||ue[e];return t||(e in oe?e:ue[e]=function vendorPropName(e){for(var t=e[0].toUpperCase()+e.slice(1),n=se.length;n--;)if((e=se[n]+t)in oe)return e}(e)||e)}var le=/^(none|table(?!-c[ea]).+)/,ce=/^--/,de={position:"absolute",visibility:"hidden",display:"block"},pe={letterSpacing:"0",fontWeight:"400"};function setPositiveNumber(e,t,n){var i=V.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function boxModelAdjustment(e,t,n,i,r,a){var s="width"===t?1:0,o=0,u=0;if(n===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=jQuery.css(e,n+U[s],!0,r)),i?("content"===n&&(u-=jQuery.css(e,"padding"+U[s],!0,r)),"margin"!==n&&(u-=jQuery.css(e,"border"+U[s]+"Width",!0,r))):(u+=jQuery.css(e,"padding"+U[s],!0,r),"padding"!==n?u+=jQuery.css(e,"border"+U[s]+"Width",!0,r):o+=jQuery.css(e,"border"+U[s]+"Width",!0,r));return!i&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-o-.5))||0),u}function getWidthOrHeight(e,t,n){var i=getStyles(e),r=(!v.boxSizingReliable()||n)&&"border-box"===jQuery.css(e,"boxSizing",!1,i),a=r,s=curCSS(e,t,i),o="offset"+t[0].toUpperCase()+t.slice(1);if(re.test(s)){if(!n)return s;s="auto"}return(!v.boxSizingReliable()&&r||"auto"===s||!parseFloat(s)&&"inline"===jQuery.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===jQuery.css(e,"boxSizing",!1,i),(a=o in e)&&(s=e[o])),(s=parseFloat(s)||0)+boxModelAdjustment(e,t,n||(r?"border":"content"),a,i,s)+"px"}function Tween(e,t,n,i,r){return new Tween.prototype.init(e,t,n,i,r)}jQuery.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=curCSS(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=camelCase(t),u=ce.test(t),l=e.style;if(u||(t=finalPropName(o)),s=jQuery.cssHooks[t]||jQuery.cssHooks[o],void 0===n)return s&&"get"in s&&void 0!==(r=s.get(e,!1,i))?r:l[t];"string"===(a=typeof n)&&(r=V.exec(n))&&r[1]&&(n=adjustCSS(e,t,r),a="number"),null!=n&&n==n&&("number"!==a||u||(n+=r&&r[3]||(jQuery.cssNumber[o]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,i){var r,a,s,o=camelCase(t);return ce.test(t)||(t=finalPropName(o)),(s=jQuery.cssHooks[t]||jQuery.cssHooks[o])&&"get"in s&&(r=s.get(e,!0,n)),void 0===r&&(r=curCSS(e,t,i)),"normal"===r&&t in pe&&(r=pe[t]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),jQuery.each(["height","width"],(function(e,t){jQuery.cssHooks[t]={get:function(e,n,i){if(n)return!le.test(jQuery.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?getWidthOrHeight(e,t,i):swap(e,de,(function(){return getWidthOrHeight(e,t,i)}))},set:function(e,n,i){var r,a=getStyles(e),s=!v.scrollboxSize()&&"absolute"===a.position,o=(s||i)&&"border-box"===jQuery.css(e,"boxSizing",!1,a),u=i?boxModelAdjustment(e,t,i,o,a):0;return o&&s&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-boxModelAdjustment(e,t,"border",!1,a)-.5)),u&&(r=V.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=jQuery.css(e,t)),setPositiveNumber(0,n,u)}}})),jQuery.cssHooks.marginLeft=addGetHookIf(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(curCSS(e,"marginLeft"))||e.getBoundingClientRect().left-swap(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),jQuery.each({margin:"",padding:"",border:"Width"},(function(e,t){jQuery.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+U[i]+t]=a[i]||a[i-2]||a[0];return r}},"margin"!==e&&(jQuery.cssHooks[e+t].set=setPositiveNumber)})),jQuery.fn.extend({css:function(e,t){return access(this,(function(e,t,n){var i,r,a={},s=0;if(Array.isArray(t)){for(i=getStyles(e),r=t.length;s<r;s++)a[t[s]]=jQuery.css(e,t[s],!1,i);return a}return void 0!==n?jQuery.style(e,t,n):jQuery.css(e,t)}),e,t,arguments.length>1)}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||jQuery.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(jQuery.cssNumber[n]?"":"px")},cur:function(){var e=Tween.propHooks[this.prop];return e&&e.get?e.get(this):Tween.propHooks._default.get(this)},run:function(e){var t,n=Tween.propHooks[this.prop];return this.options.duration?this.pos=t=jQuery.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=jQuery.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){jQuery.fx.step[e.prop]?jQuery.fx.step[e.prop](e):1!==e.elem.nodeType||!jQuery.cssHooks[e.prop]&&null==e.elem.style[finalPropName(e.prop)]?e.elem[e.prop]=e.now:jQuery.style(e.elem,e.prop,e.now+e.unit)}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},jQuery.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var he,fe,ge=/^(?:toggle|show|hide)$/,me=/queueHooks$/;function schedule(){fe&&(!1===s.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(schedule):n.setTimeout(schedule,jQuery.fx.interval),jQuery.fx.tick())}function createFxNow(){return n.setTimeout((function(){he=void 0})),he=Date.now()}function genFx(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=U[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function createTween(e,t,n){for(var i,r=(Animation.tweeners[t]||[]).concat(Animation.tweeners["*"]),a=0,s=r.length;a<s;a++)if(i=r[a].call(n,t,e))return i}function Animation(e,t,n){var i,r,a=0,s=Animation.prefilters.length,o=jQuery.Deferred().always((function(){delete tick.elem})),tick=function(){if(r)return!1;for(var t=he||createFxNow(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),a=0,s=u.tweens.length;a<s;a++)u.tweens[a].run(i);return o.notifyWith(e,[u,i,n]),i<1&&s?n:(s||o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u]),!1)},u=o.promise({elem:e,props:jQuery.extend({},t),opts:jQuery.extend(!0,{specialEasing:{},easing:jQuery.easing._default},n),originalProperties:t,originalOptions:n,startTime:he||createFxNow(),duration:n.duration,tweens:[],createTween:function(t,n){var i=jQuery.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(o.notifyWith(e,[u,1,0]),o.resolveWith(e,[u,t])):o.rejectWith(e,[u,t]),this}}),l=u.props;for(!function propFilter(e,t){var n,i,r,a,s;for(n in e)if(r=t[i=camelCase(n)],a=e[n],Array.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=jQuery.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(l,u.opts.specialEasing);a<s;a++)if(i=Animation.prefilters[a].call(u,e,l,u.opts))return y(i.stop)&&(jQuery._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return jQuery.map(l,createTween,u),y(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),jQuery.fx.timer(jQuery.extend(tick,{elem:e,anim:u,queue:u.opts.queue})),u}jQuery.Animation=jQuery.extend(Animation,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return adjustCSS(n.elem,e,V.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(M);for(var n,i=0,r=e.length;i<r;i++)n=e[i],Animation.tweeners[n]=Animation.tweeners[n]||[],Animation.tweeners[n].unshift(t)},prefilters:[function defaultPrefilter(e,t,n){var i,r,a,s,o,u,l,c,d="width"in t||"height"in t,p=this,h={},f=e.style,g=e.nodeType&&isHiddenWithinTree(e),m=P.get(e,"fxshow");for(i in n.queue||(null==(s=jQuery._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,p.always((function(){p.always((function(){s.unqueued--,jQuery.queue(e,"fx").length||s.empty.fire()}))}))),t)if(r=t[i],ge.test(r)){if(delete t[i],a=a||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}h[i]=m&&m[i]||jQuery.style(e,i)}if((u=!jQuery.isEmptyObject(t))||!jQuery.isEmptyObject(h))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=m&&m.display)&&(l=P.get(e,"display")),"none"===(c=jQuery.css(e,"display"))&&(l?c=l:(showHide([e],!0),l=e.style.display||l,c=jQuery.css(e,"display"),showHide([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===jQuery.css(e,"float")&&(u||(p.done((function(){f.display=l})),null==l&&(c=f.display,l="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),u=!1,h)u||(m?"hidden"in m&&(g=m.hidden):m=P.access(e,"fxshow",{display:l}),a&&(m.hidden=!g),g&&showHide([e],!0),p.done((function(){for(i in g||showHide([e]),P.remove(e,"fxshow"),h)jQuery.style(e,i,h[i])}))),u=createTween(g?m[i]:0,i,p),i in m||(m[i]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?Animation.prefilters.unshift(e):Animation.prefilters.push(e)}}),jQuery.speed=function(e,t,n){var i=e&&"object"==typeof e?jQuery.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return jQuery.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in jQuery.fx.speeds?i.duration=jQuery.fx.speeds[i.duration]:i.duration=jQuery.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&jQuery.dequeue(this,i.queue)},i},jQuery.fn.extend({fadeTo:function(e,t,n,i){return this.filter(isHiddenWithinTree).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=jQuery.isEmptyObject(e),a=jQuery.speed(t,n,i),doAnimation=function(){var t=Animation(this,jQuery.extend({},e),a);(r||P.get(this,"finish"))&&t.stop(!0)};return doAnimation.finish=doAnimation,r||!1===a.queue?this.each(doAnimation):this.queue(a.queue,doAnimation)},stop:function(e,t,n){var stopQueue=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",r=jQuery.timers,a=P.get(this);if(i)a[i]&&a[i].stop&&stopQueue(a[i]);else for(i in a)a[i]&&a[i].stop&&me.test(i)&&stopQueue(a[i]);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(r[i].anim.stop(n),t=!1,r.splice(i,1));!t&&n||jQuery.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=P.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=jQuery.timers,s=i?i.length:0;for(n.finish=!0,jQuery.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),jQuery.each(["toggle","show","hide"],(function(e,t){var n=jQuery.fn[t];jQuery.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(genFx(t,!0),e,i,r)}})),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){jQuery.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),jQuery.timers=[],jQuery.fx.tick=function(){var e,t=0,n=jQuery.timers;for(he=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||jQuery.fx.stop(),he=void 0},jQuery.fx.timer=function(e){jQuery.timers.push(e),jQuery.fx.start()},jQuery.fx.interval=13,jQuery.fx.start=function(){fe||(fe=!0,schedule())},jQuery.fx.stop=function(){fe=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(e,t){return e=jQuery.fx&&jQuery.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}}))},function(){var e=s.createElement("input"),t=s.createElement("select").appendChild(s.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=s.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ve,ye=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(e,t){return access(this,jQuery.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){jQuery.removeAttr(this,e)}))}}),jQuery.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?jQuery.prop(e,t,n):(1===a&&jQuery.isXMLDoc(e)||(r=jQuery.attrHooks[t.toLowerCase()]||(jQuery.expr.match.bool.test(t)?ve:void 0)),void 0!==n?null===n?void jQuery.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=jQuery.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(M);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),ve={set:function(e,t,n){return!1===t?jQuery.removeAttr(e,n):e.setAttribute(n,n),n}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=ye[t]||jQuery.find.attr;ye[t]=function(e,t,i){var r,a,s=t.toLowerCase();return i||(a=ye[s],ye[s]=r,r=null!=n(e,t,i)?s:null,ye[s]=a),r}}));var be=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;function stripAndCollapse(e){return(e.match(M)||[]).join(" ")}function getClass(e){return e.getAttribute&&e.getAttribute("class")||""}function classesToArray(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(M)||[]}jQuery.fn.extend({prop:function(e,t){return access(this,jQuery.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[jQuery.propFix[e]||e]}))}}),jQuery.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&jQuery.isXMLDoc(e)||(t=jQuery.propFix[t]||t,r=jQuery.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=jQuery.find.attr(e,"tabindex");return t?parseInt(t,10):be.test(e.nodeName)||Se.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(jQuery.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){jQuery.propFix[this.toLowerCase()]=this})),jQuery.fn.extend({addClass:function(e){var t,n,i,r,a,s,o,u=0;if(y(e))return this.each((function(t){jQuery(this).addClass(e.call(this,t,getClass(this)))}));if((t=classesToArray(e)).length)for(;n=this[u++];)if(r=getClass(n),i=1===n.nodeType&&" "+stripAndCollapse(r)+" "){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(o=stripAndCollapse(i))&&n.setAttribute("class",o)}return this},removeClass:function(e){var t,n,i,r,a,s,o,u=0;if(y(e))return this.each((function(t){jQuery(this).removeClass(e.call(this,t,getClass(this)))}));if(!arguments.length)return this.attr("class","");if((t=classesToArray(e)).length)for(;n=this[u++];)if(r=getClass(n),i=1===n.nodeType&&" "+stripAndCollapse(r)+" "){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r!==(o=stripAndCollapse(i))&&n.setAttribute("class",o)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(n){jQuery(this).toggleClass(e.call(this,n,getClass(this),t),t)})):this.each((function(){var t,r,a,s;if(i)for(r=0,a=jQuery(this),s=classesToArray(e);t=s[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=getClass(this))&&P.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":P.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+stripAndCollapse(getClass(n))+" ").indexOf(t)>-1)return!0;return!1}});var Ee=/\r/g;jQuery.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=y(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,jQuery(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=jQuery.map(r,(function(e){return null==e?"":e+""}))),(t=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=jQuery.valHooks[r.type]||jQuery.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Ee,""):null==n?"":n:void 0}}),jQuery.extend({valHooks:{option:{get:function(e){var t=jQuery.find.attr(e,"value");return null!=t?t:stripAndCollapse(jQuery.text(e))}},select:{get:function(e){var t,n,i,r=e.options,a=e.selectedIndex,s="select-one"===e.type,o=s?null:[],u=s?a+1:r.length;for(i=a<0?u:s?a:0;i<u;i++)if(((n=r[i]).selected||i===a)&&!n.disabled&&(!n.parentNode.disabled||!nodeName(n.parentNode,"optgroup"))){if(t=jQuery(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=jQuery.makeArray(t),s=r.length;s--;)((i=r[s]).selected=jQuery.inArray(jQuery.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),jQuery.each(["radio","checkbox"],(function(){jQuery.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=jQuery.inArray(jQuery(e).val(),t)>-1}},v.checkOn||(jQuery.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),v.focusin="onfocusin"in n;var _e=/^(?:focusinfocus|focusoutblur)$/,stopPropagationCallback=function(e){e.stopPropagation()};jQuery.extend(jQuery.event,{trigger:function(e,t,i,r){var a,o,u,l,c,d,p,h,g=[i||s],m=f.call(e,"type")?e.type:e,v=f.call(e,"namespace")?e.namespace.split("."):[];if(o=h=u=i=i||s,3!==i.nodeType&&8!==i.nodeType&&!_e.test(m+jQuery.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[jQuery.expando]?e:new jQuery.Event(m,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:jQuery.makeArray(t,[e]),p=jQuery.event.special[m]||{},r||!p.trigger||!1!==p.trigger.apply(i,t))){if(!r&&!p.noBubble&&!b(i)){for(l=p.delegateType||m,_e.test(l+m)||(o=o.parentNode);o;o=o.parentNode)g.push(o),u=o;u===(i.ownerDocument||s)&&g.push(u.defaultView||u.parentWindow||n)}for(a=0;(o=g[a++])&&!e.isPropagationStopped();)h=o,e.type=a>1?l:p.bindType||m,(d=(P.get(o,"events")||{})[e.type]&&P.get(o,"handle"))&&d.apply(o,t),(d=c&&o[c])&&d.apply&&acceptData(o)&&(e.result=d.apply(o,t),!1===e.result&&e.preventDefault());return e.type=m,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(g.pop(),t)||!acceptData(i)||c&&y(i[m])&&!b(i)&&((u=i[c])&&(i[c]=null),jQuery.event.triggered=m,e.isPropagationStopped()&&h.addEventListener(m,stopPropagationCallback),i[m](),e.isPropagationStopped()&&h.removeEventListener(m,stopPropagationCallback),jQuery.event.triggered=void 0,u&&(i[c]=u)),e.result}},simulate:function(e,t,n){var i=jQuery.extend(new jQuery.Event,n,{type:e,isSimulated:!0});jQuery.event.trigger(i,null,t)}}),jQuery.fn.extend({trigger:function(e,t){return this.each((function(){jQuery.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return jQuery.event.trigger(e,t,n,!0)}}),v.focusin||jQuery.each({focus:"focusin",blur:"focusout"},(function(e,t){var handler=function(e){jQuery.event.simulate(t,e.target,jQuery.event.fix(e))};jQuery.event.special[t]={setup:function(){var n=this.ownerDocument||this,i=P.access(n,t);i||n.addEventListener(e,handler,!0),P.access(n,t,(i||0)+1)},teardown:function(){var n=this.ownerDocument||this,i=P.access(n,t)-1;i?P.access(n,t,i):(n.removeEventListener(e,handler,!0),P.remove(n,t))}}}));var we=n.location,Ae=Date.now(),Te=/\?/;jQuery.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+e),t};var xe=/\[\]$/,Re=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,Me=/^(?:input|select|textarea|keygen)/i;function buildParams(e,t,n,i){var r;if(Array.isArray(t))jQuery.each(t,(function(t,r){n||xe.test(e)?i(e,r):buildParams(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==toType(t))i(e,t);else for(r in t)buildParams(e+"["+r+"]",t[r],n,i)}jQuery.param=function(e,t){var n,i=[],add=function(e,t){var n=y(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!jQuery.isPlainObject(e))jQuery.each(e,(function(){add(this.name,this.value)}));else for(n in e)buildParams(n,e[n],t,add);return i.join("&")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=jQuery.prop(this,"elements");return e?jQuery.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!jQuery(this).is(":disabled")&&Me.test(this.nodeName)&&!Ce.test(e)&&(this.checked||!Q.test(e))})).map((function(e,t){var n=jQuery(this).val();return null==n?null:Array.isArray(n)?jQuery.map(n,(function(e){return{name:t.name,value:e.replace(Re,"\r\n")}})):{name:t.name,value:n.replace(Re,"\r\n")}})).get()}});var Ie=/%20/g,Oe=/#.*$/,Ne=/([?&])_=[^&]*/,ke=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pe=/^(?:GET|HEAD)$/,Le=/^\/\//,De={},Fe={},qe="*/".concat("*"),Ve=s.createElement("a");function addToPrefiltersOrTransports(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(M)||[];if(y(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function inspectPrefiltersOrTransports(e,t,n,i){var r={},a=e===Fe;function inspect(s){var o;return r[s]=!0,jQuery.each(e[s]||[],(function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||r[u]?a?!(o=u):void 0:(t.dataTypes.unshift(u),inspect(u),!1)})),o}return inspect(t.dataTypes[0])||!r["*"]&&inspect("*")}function ajaxExtend(e,t){var n,i,r=jQuery.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&jQuery.extend(!0,e,i),e}Ve.href=we.href,jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(we.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ajaxExtend(ajaxExtend(e,jQuery.ajaxSettings),t):ajaxExtend(jQuery.ajaxSettings,e)},ajaxPrefilter:addToPrefiltersOrTransports(De),ajaxTransport:addToPrefiltersOrTransports(Fe),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,a,o,u,l,c,d,p,h,f=jQuery.ajaxSetup({},t),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?jQuery(g):jQuery.event,v=jQuery.Deferred(),y=jQuery.Callbacks("once memory"),b=f.statusCode||{},S={},E={},_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o)for(o={};t=ke.exec(a);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,S[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)w.always(e[w.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||_;return i&&i.abort(t),done(0,t),this}};if(v.promise(w),f.url=((e||f.url||we.href)+"").replace(Le,we.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(M)||[""],null==f.crossDomain){l=s.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Ve.protocol+"//"+Ve.host!=l.protocol+"//"+l.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=jQuery.param(f.data,f.traditional)),inspectPrefiltersOrTransports(De,f,t,w),c)return w;for(p in(d=jQuery.event&&f.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Pe.test(f.type),r=f.url.replace(Oe,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ie,"+")):(h=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Te.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(Ne,"$1"),h=(Te.test(r)?"&":"?")+"_="+Ae+++h),f.url=r+h),f.ifModified&&(jQuery.lastModified[r]&&w.setRequestHeader("If-Modified-Since",jQuery.lastModified[r]),jQuery.etag[r]&&w.setRequestHeader("If-None-Match",jQuery.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+qe+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(!1===f.beforeSend.call(g,w,f)||c))return w.abort();if(_="abort",y.add(f.complete),w.done(f.success),w.fail(f.error),i=inspectPrefiltersOrTransports(Fe,f,t,w)){if(w.readyState=1,d&&m.trigger("ajaxSend",[w,f]),c)return w;f.async&&f.timeout>0&&(u=n.setTimeout((function(){w.abort("timeout")}),f.timeout));try{c=!1,i.send(S,done)}catch(e){if(c)throw e;done(-1,e)}}else done(-1,"No Transport");function done(e,t,s,o){var l,p,h,S,E,_=t;c||(c=!0,u&&n.clearTimeout(u),i=void 0,a=o||"",w.readyState=e>0?4:0,l=e>=200&&e<300||304===e,s&&(S=function ajaxHandleResponses(e,t,n){for(var i,r,a,s,o=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){u.unshift(r);break}if(u[0]in n)a=u[0];else{for(r in n){if(!u[0]||e.converters[r+" "+u[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==u[0]&&u.unshift(a),n[a]}(f,w,s)),S=function ajaxConvert(e,t,n,i){var r,a,s,o,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(s=l[u+" "+a]||l["* "+a]))for(r in l)if((o=r.split(" "))[1]===a&&(s=l[u+" "+o[0]]||l["* "+o[0]])){!0===s?s=l[r]:!0!==l[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}(f,S,w,l),l?(f.ifModified&&((E=w.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[r]=E),(E=w.getResponseHeader("etag"))&&(jQuery.etag[r]=E)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=S.state,p=S.data,l=!(h=S.error))):(h=_,!e&&_||(_="error",e<0&&(e=0))),w.status=e,w.statusText=(t||_)+"",l?v.resolveWith(g,[p,_,w]):v.rejectWith(g,[w,_,h]),w.statusCode(b),b=void 0,d&&m.trigger(l?"ajaxSuccess":"ajaxError",[w,f,l?p:h]),y.fireWith(g,[w,_]),d&&(m.trigger("ajaxComplete",[w,f]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,n){return jQuery.get(e,t,n,"json")},getScript:function(e,t){return jQuery.get(e,void 0,t,"script")}}),jQuery.each(["get","post"],(function(e,t){jQuery[t]=function(e,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),jQuery.ajax(jQuery.extend({url:e,type:t,dataType:r,data:n,success:i},jQuery.isPlainObject(e)&&e))}})),jQuery._evalUrl=function(e,t){return jQuery.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){jQuery.globalEval(e,t)}})},jQuery.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=jQuery(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){jQuery(this).wrapInner(e.call(this,t))})):this.each((function(){var t=jQuery(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){jQuery(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){jQuery(this).replaceWith(this.childNodes)})),this}}),jQuery.expr.pseudos.hidden=function(e){return!jQuery.expr.pseudos.visible(e)},jQuery.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},jQuery.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Ue={0:200,1223:204},je=jQuery.ajaxSettings.xhr();v.cors=!!je&&"withCredentials"in je,v.ajax=je=!!je,jQuery.ajaxTransport((function(e){var t,i;if(v.cors||je&&!e.crossDomain)return{send:function(r,a){var s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(s in e.xhrFields)o[s]=e.xhrFields[s];for(s in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(s,r[s]);t=function(e){return function(){t&&(t=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(Ue[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=t(),i=o.onerror=o.ontimeout=t("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&n.setTimeout((function(){t&&i()}))},t=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),jQuery.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return jQuery.globalEval(e),e}}}),jQuery.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),jQuery.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=jQuery("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),s.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Be,He=[],Qe=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=He.pop()||jQuery.expando+"_"+Ae++;return this[e]=!0,e}}),jQuery.ajaxPrefilter("json jsonp",(function(e,t,i){var r,a,s,o=!1!==e.jsonp&&(Qe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qe.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Qe,"$1"+r):!1!==e.jsonp&&(e.url+=(Te.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||jQuery.error(r+" was not called"),s[0]},e.dataTypes[0]="json",a=n[r],n[r]=function(){s=arguments},i.always((function(){void 0===a?jQuery(n).removeProp(r):n[r]=a,e[r]&&(e.jsonpCallback=t.jsonpCallback,He.push(r)),s&&y(a)&&a(s[0]),s=a=void 0})),"script"})),v.createHTMLDocument=((Be=s.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Be.childNodes.length),jQuery.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((i=(t=s.implementation.createHTMLDocument("")).createElement("base")).href=s.location.href,t.head.appendChild(i)):t=s),a=!n&&[],(r=A.exec(e))?[t.createElement(r[1])]:(r=buildFragment([e],t,a),a&&a.length&&jQuery(a).remove(),jQuery.merge([],r.childNodes)));var i,r,a},jQuery.fn.load=function(e,t,n){var i,r,a,s=this,o=e.indexOf(" ");return o>-1&&(i=stripAndCollapse(e.slice(o)),e=e.slice(0,o)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&jQuery.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){a=arguments,s.html(i?jQuery("<div>").append(jQuery.parseHTML(e)).find(i):e)})).always(n&&function(e,t){s.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){jQuery.fn[t]=function(e){return this.on(t,e)}})),jQuery.expr.pseudos.animated=function(e){return jQuery.grep(jQuery.timers,(function(t){return e===t.elem})).length},jQuery.offset={setOffset:function(e,t,n){var i,r,a,s,o,u,l=jQuery.css(e,"position"),c=jQuery(e),d={};"static"===l&&(e.style.position="relative"),o=c.offset(),a=jQuery.css(e,"top"),u=jQuery.css(e,"left"),("absolute"===l||"fixed"===l)&&(a+u).indexOf("auto")>-1?(s=(i=c.position()).top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(u)||0),y(t)&&(t=t.call(e,n,jQuery.extend({},o))),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):c.css(d)}},jQuery.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){jQuery.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===jQuery.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===jQuery.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=jQuery(e).offset()).top+=jQuery.css(e,"borderTopWidth",!0),r.left+=jQuery.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-jQuery.css(i,"marginTop",!0),left:t.left-r.left-jQuery.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===jQuery.css(e,"position");)e=e.offsetParent;return e||j}))}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;jQuery.fn[e]=function(i){return access(this,(function(e,i,r){var a;if(b(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===r)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):e[i]=r}),e,i,arguments.length)}})),jQuery.each(["top","left"],(function(e,t){jQuery.cssHooks[t]=addGetHookIf(v.pixelPosition,(function(e,n){if(n)return n=curCSS(e,t),re.test(n)?jQuery(e).position()[t]+"px":n}))})),jQuery.each({Height:"height",Width:"width"},(function(e,t){jQuery.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){jQuery.fn[i]=function(r,a){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===a?"margin":"border");return access(this,(function(t,n,r){var a;return b(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?jQuery.css(t,n,o):jQuery.style(t,n,r,o)}),t,s?r:void 0,s)}}))})),jQuery.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){jQuery.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),jQuery.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),jQuery.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),jQuery.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return i=u.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(u.call(arguments)))}).guid=e.guid=e.guid||jQuery.guid++,r},jQuery.holdReady=function(e){e?jQuery.readyWait++:jQuery.ready(!0)},jQuery.isArray=Array.isArray,jQuery.parseJSON=JSON.parse,jQuery.nodeName=nodeName,jQuery.isFunction=y,jQuery.isWindow=b,jQuery.camelCase=camelCase,jQuery.type=toType,jQuery.now=Date.now,jQuery.isNumeric=function(e){var t=jQuery.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(i=function(){return jQuery}.apply(t,[]))||(e.exports=i);var ze=n.jQuery,Ge=n.$;return jQuery.noConflict=function(e){return n.$===jQuery&&(n.$=Ge),e&&n.jQuery===jQuery&&(n.jQuery=ze),jQuery},r||(n.jQuery=n.$=jQuery),jQuery}))},function(e,t){e.exports={QUESTION_TYPES:{ASSOCIATION:"association",AUDIO:"audio",AUDIOADV:"audioadv",BOOLEAN:"boolean",CHEMISTRY:"chemistry",CHOICEMATRIX:"choicematrix",CLASSIFICATION:"classification",CLOZEASSOCIATION:"clozeassociation",CLOZEDROPDOWN:"clozedropdown",CLOZEFORMULA:"clozeformula",CLOZEINLINETEXT:"clozeinlinetext",CLOZETEXT:"clozetext",CLOZECHEMISTRY:"clozechemistry",CUSTOM:"custom",DRAWING:"drawing",FILEUPLOAD:"fileupload",FILLSHAPE:"fillshape",FORMULA:"formula",FORMULA_DEV:"formula_dev",FORMULAESSAY:"formulaessay",CHEMISTRYESSAY:"chemistryessay",FORMULAV2:"formulaV2",GRAPHPLOTTING:"graphplotting",GRIDDED:"gridded",HIGHLIGHT:"highlight",HOTSPOT:"hotspot",IMAGECLOZEASSOCIATION:"imageclozeassociation",IMAGECLOZEASSOCIATIONV2:"imageclozeassociationV2",IMAGECLOZEDROPDOWN:"imageclozedropdown",IMAGECLOZEFORMULA:"imageclozeformula",IMAGECLOZECHEMISTRY:"imageclozechemistry",IMAGECLOZETEXT:"imageclozetext",IMAGEUPLOAD:"imageupload",LONGTEXT:"longtext",LONGTEXTV2:"longtextV2",MCQ:"mcq",NUMBERLINE:"numberline",NUMBERLINEPLOT:"numberlineplot",ORDERLIST:"orderlist",PLAINTEXT:"plaintext",RATING:"rating",SCORE:"score",SHORTTEXT:"shorttext",SIMPLECHART:"simplechart",SIMPLESHADING:"simpleshading",SORTLIST:"sortlist",TEXTHIGHLIGHT:"texthighlight",TOKENHIGHLIGHT:"tokenhighlight",VIDEO:"video",UNKNOWN:"unknown"},FEATURE_TYPES:{AUDIO_PLAYER:"audioplayer",CALCULATOR:"calculator",COUNTER:"counter",FORMULAINPUT:"formulainput",IMAGE_TOOL:"imagetool",LINE_READER:"linereader",SCROLLABLE_PASSAGE:"scrollablepassage",SHARED_PASSAGE:"sharedpassage",UNKNOWN:"unknown",VIDEO_PLAYER:"videoplayer",CUSTOM_FEATURE:"customfeature"}}},function(e,t,n){"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e)}n.r(t),window.Promise=function _nativePromise(){var e,t=!1;return isFunction(window.Promise)&&isFunction(window.Promise.all)&&isFunction(window.Promise.resolve)&&isFunction(window.Promise.reject)&&isFunction((e=new Promise((function(e,t){e()}))).then)&&isFunction(e.catch)&&(t=!0),t}()?window.Promise:function _promisePolyfill(){
/*! Native Promise Only
      v0.8.0-a (c) Kyle Simpson
      MIT License: http://getify.mit-license.org
  */
var e,t,n,i=Object.prototype.toString,r="undefined"!=typeof setImmediate?function timer(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function builtInProp(e,t,n,i){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==i})}}catch(t){e=function builtInProp(e,t,n){return e[t]=n,e}}function schedule(e,i){n.add(e,i),t||(t=r(n.drain))}function isThenable(e){var t,n=_typeof(e);return null===e||"object"!==n&&"function"!==n||(t=e.then),"function"==typeof t&&t}function notify(){for(var e=0;e<this.chain.length;e++)notifyIsolated(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function notifyIsolated(e,t,n){var i,r;try{!1===t?n.reject(e.msg):(i=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(new TypeError("Promise-chain cycle")):(r=isThenable(i))?r.call(i,n.resolve,n.reject):n.resolve(i)}catch(e){n.reject(e)}}function resolve(e){var t,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(t=isThenable(e))?schedule((function(){var i=new MakeDefWrapper(n);try{t.call(e,(function $resolve$(){resolve.apply(i,arguments)}),(function $reject$(){reject.apply(i,arguments)}))}catch(e){reject.call(i,e)}})):(n.msg=e,n.state=1,n.chain.length>0&&schedule(notify,n))}catch(e){reject.call(new MakeDefWrapper(n),e)}}}function reject(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&schedule(notify,t))}function iteratePromises(e,t,n,i){for(var r=0;r<t.length;r++)!function IIFE(r){e.resolve(t[r]).then((function $resolver$(e){n(r,e)}),i)}(r)}function MakeDefWrapper(e){this.def=e,this.triggered=!1}function MakeDef(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function Promise(e){if("function"!=typeof e)throw new TypeError("Not a function");if(0!==this.__NPO__)throw new TypeError("Not a promise");this.__NPO__=1;var t=new MakeDef(this);this.then=function then(e,n){var i={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return i.promise=new this.constructor((function extractChain(e,t){if("function"!=typeof e||"function"!=typeof t)throw new TypeError("Not a function");i.resolve=e,i.reject=t})),t.chain.push(i),0!==t.state&&schedule(notify,t),i.promise},this.catch=function $catch$(e){return this.then(void 0,e)};try{e.call(void 0,(function publicResolve(e){resolve.call(t,e)}),(function publicReject(e){reject.call(t,e)}))}catch(e){reject.call(t,e)}}n=function Queue(){var e,n,i;function Item(e,t){this.fn=e,this.self=t,this.next=void 0}return{add:function add(t,r){i=new Item(t,r),n?n.next=i:e=i,n=i,i=void 0},drain:function drain(){var i=e;for(e=n=t=void 0;i;)i.fn.call(i.self),i=i.next}}}();var a=e({},"constructor",Promise,!1);return Promise.prototype=a,e(a,"__NPO__",0,!1),e(Promise,"resolve",(function Promise$resolve(e){return e&&"object"===_typeof(e)&&1===e.__NPO__?e:new this((function executor(t,n){if("function"!=typeof t||"function"!=typeof n)throw new TypeError("Not a function");t(e)}))})),e(Promise,"reject",(function Promise$reject(e){return new this((function executor(t,n){if("function"!=typeof t||"function"!=typeof n)throw new TypeError("Not a function");n(e)}))})),e(Promise,"all",(function Promise$all(e){var t=this;return"[object Array]"!==i.call(e)?t.reject(new TypeError("Not an array")):0===e.length?t.resolve([]):new t((function executor(n,i){if("function"!=typeof n||"function"!=typeof i)throw new TypeError("Not a function");var r=e.length,a=[],s=0;a.length=r,iteratePromises(t,e,(function resolver(e,t){a[e]=t,++s===r&&n(a)}),i)}))})),e(Promise,"race",(function Promise$race(e){var t=this;return"[object Array]"!==i.call(e)?t.reject(new TypeError("Not an array")):new t((function executor(n,i){if("function"!=typeof n||"function"!=typeof i)throw new TypeError("Not a function");iteratePromises(t,e,(function resolver(e,t){n(t)}),i)}))})),Promise}(),t.default=window.Promise},function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),s=n(1),o=n.n(s),u=n(12),l={10001:{code:10001,msg:"Failed validating activity / format error",errorUI:"global"},10002:{code:10002,msg:"Response id conflict",errorUI:"global"},10003:{code:10003,msg:"Failed authentication",errorUI:"global"},10004:{code:10004,msg:"Save responses failed"},10005:{code:10005,msg:"Response not found",errorUI:"question"},10006:{code:10006,msg:"Audio save to server failed",errorUI:"button"},10007:{code:10007,msg:"Authorisation failed",errorUI:"question"},10008:{code:10008,msg:"Audio asset failed to load"},10009:{code:10009,msg:"Audio asset temporarily not available"},10010:{code:10010,msg:"Audio asset expired",errorUI:"question"},10011:{code:10011,msg:"Your device does not support audio-capture functionality"},10012:{code:10012,msg:"No microphone found"},10013:{code:10013,msg:"Unable to save, question validation failed"},10014:{code:10014,msg:"Audio asset format not supported"},10015:{code:10015,msg:"Browser not supported",errorUI:"global"},10016:{code:10016,msg:"Failed capturing questions",errorUI:"global"},10017:{code:10017,msg:"Failed loading Questions API, can't load required modules"},10018:{code:10018,msg:"Browser running in an unsupported compatibility view",errorUI:"global"},10019:{code:10019,msg:"Failed validating math"},10020:{code:10020,msg:"Failed validating appended elements"},10021:{code:10021,msg:"Discard responses failed"},10022:{code:10022,msg:"Audio playback failed"},10023:{code:10023,msg:"Unable to render latex"},10024:{code:10024,msg:"Failed loading external resource"},10025:{code:10025,msg:"Failed resuming activity, network connectivity error"},10026:{code:10026,msg:"Cannot set response metadata on empty response"},10027:{code:10027,msg:"Failed pushing offline data to server"},10028:{code:10028,msg:"Called needsPushing with incorrect parameters"},10029:{code:10029,msg:"Asset could not be uploaded"},10030:{code:10030,msg:"Widget instance can not be updated"}};function log(){console.error.apply?console.error.apply(console,arguments):a.a.each(arguments,(function(e){console.error(e)}))}t.a={setErrorListener:function setErrorListener(e){i=e},exception:function exception(e,t){var n=a.a.extend({},l[e.code],e),r=n.i18n;switch(delete n.i18n,LearnosityApp.errors=LearnosityApp.errors||[],LearnosityApp.errors.push(n),u.a.trackError(n.code,n.msg,n.detail?n.detail:n.msg,n.consumerKey),log(n.code+": "+n.msg+". View this error on LearnosityApp.errors["+(LearnosityApp.errors.length-1)+"]"),n.errorUI){case"button":break;case"question":o()("#"+n.response_id).removeClass("lrn_qr").addClass("learnosity-error").html(r.labels.uierrorfeedback);break;case"global":var s=10015===n.code?r.labels.unsupportedBrowser:10018===n.code?r.labels.unsupportedCompatibilityMode:r.labels.uierrorfeedback;o()(".learnosity-response, .lrn_qr").removeClass("lrn_qr").addClass("learnosity-error").html(s)}t?t(n):i?a.a.defer((function(){a.a.isFunction(i)&&i(a.a.clone(n))})):alert(n.msg+"\n\nPlease contact your administrator if you require further assistance.")},reset:function reset(){LearnosityApp.errors=[],i=null},log:log,warning:function warning(){a.a.isFunction(console.warn)&&console.warn.apply(console,arguments)}}},function(e,t,n){(function(e){!function(i){var r,a="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e,s=n(0);try{r=n(1)}catch(e){}i(a,t,s,r)}((function(e,t,n,i){var r=e.Backbone,a=Array.prototype.slice;t.VERSION="1.4.0",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s,o=t.Events={},u=/\s+/,eventsApi=function(e,t,i,r,a){var s,o=0;if(i&&"object"==typeof i){void 0!==r&&"context"in a&&void 0===a.context&&(a.context=r);for(s=n.keys(i);o<s.length;o++)t=eventsApi(e,t,s[o],i[s[o]],a)}else if(i&&u.test(i))for(s=i.split(u);o<s.length;o++)t=e(t,s[o],r,a);else t=e(t,i,r,a);return t};o.on=function(e,t,n){(this._events=eventsApi(onApi,this._events||{},e,t,{context:n,ctx:this,listening:s}),s)&&((this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1);return this},o.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),o=s=a[r];o||(this._listenId||(this._listenId=n.uniqueId("l")),o=s=a[r]=new Listening(this,e));var u=tryCatchOn(e,t,i,this);if(s=void 0,u)throw u;return o.interop&&o.on(t,i),this};var onApi=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),a=i.context,s=i.ctx,o=i.listening;o&&o.count++,r.push({callback:n,context:a,ctx:a||s,listening:o})}return e},tryCatchOn=function(e,t,n,i){try{e.on(t,n,i)}catch(e){return e}};o.off=function(e,t,n){return this._events?(this._events=eventsApi(offApi,this._events,e,t,{context:n,listeners:this._listeners}),this):this},o.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var a=e?[e._listenId]:n.keys(r),s=0;s<a.length;s++){var o=r[a[s]];if(!o)break;o.obj.off(t,i,this),o.interop&&o.off(t,i)}return n.isEmpty(r)&&(this._listeningTo=void 0),this};var offApi=function(e,t,i,r){if(e){var a,s=r.context,o=r.listeners,u=0;if(t||s||i){for(a=t?[t]:n.keys(e);u<a.length;u++){var l=e[t=a[u]];if(!l)break;for(var c=[],d=0;d<l.length;d++){var p=l[d];if(i&&i!==p.callback&&i!==p.callback._callback||s&&s!==p.context)c.push(p);else{var h=p.listening;h&&h.off(t,i)}}c.length?e[t]=c:delete e[t]}return e}for(a=n.keys(o);u<a.length;u++)o[a[u]].cleanup()}};o.once=function(e,t,n){var i=eventsApi(onceMap,{},e,t,this.off.bind(this));return"string"==typeof e&&null==n&&(t=void 0),this.on(i,t,n)},o.listenToOnce=function(e,t,n){var i=eventsApi(onceMap,{},t,n,this.stopListening.bind(this,e));return this.listenTo(e,i)};var onceMap=function(e,t,i,r){if(i){var a=e[t]=n.once((function(){r(t,a),i.apply(this,arguments)}));a._callback=i}return e};o.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return eventsApi(triggerApi,this._events,e,void 0,n),this};var triggerApi=function(e,t,n,i){if(e){var r=e[t],a=e.all;r&&a&&(a=a.slice()),r&&triggerEvents(r,i),a&&triggerEvents(a,[t].concat(i))}return e},triggerEvents=function(e,t){var n,i=-1,r=e.length,a=t[0],s=t[1],o=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,s);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,s,o);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},Listening=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};Listening.prototype.on=o.on,Listening.prototype.off=function(e,t){var n;this.interop?(this._events=eventsApi(offApi,this._events,e,t,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},Listening.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},o.bind=o.on,o.unbind=o.off,n.extend(t,o);var l=t.Model=function(e,t){var i=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(l.prototype,o,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var a=i.unset,s=i.silent,o=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,d=this._previousAttributes;for(var p in r)t=r[p],n.isEqual(l[p],t)||o.push(p),n.isEqual(d[p],t)?delete c[p]:c[p]=t,a?delete l[p]:l[p]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!s){o.length&&(this._pending=i);for(var h=0;h<o.length;h++)this.trigger("change:"+o[h],this,l[o[h]],i)}if(u)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,i=this._changing?this._previousAttributes:this.attributes,r={};for(var a in e){var s=e[a];n.isEqual(i[a],s)||(r[a]=s,t=!0)}return!!t&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;if(!t.set(r,e))return!1;i&&i.call(e.context,t,n,e),t.trigger("sync",t,n,e)},wrapError(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t;var a=(i=n.extend({validate:!0,parse:!0},i)).wait;if(r&&!a){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var s=this,o=i.success,u=this.attributes;i.success=function(e){s.attributes=u;var t=i.parse?s.parse(e,i):e;if(a&&(t=n.extend({},r,t)),t&&!s.set(t,i))return!1;o&&o.call(i.context,s,e,i),s.trigger("sync",s,e,i)},wrapError(this,i),r&&a&&(this.attributes=n.extend({},u,r));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=r);var c=this.sync(l,this,i);return this.attributes=u,c},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,destroy=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&destroy(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(wrapError(this,e),a=this.sync("delete",this,e)),r||destroy(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||urlError();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var c=t.Collection=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},d={add:!0,remove:!0,merge:!0},p={add:!0,remove:!1},splice=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),a=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;i<a;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+a+n]=r[i]};n.extend(c.prototype,o,{model:l,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,p))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){(t=n.extend({},d,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var a,s,o=[],u=[],l=[],c=[],p={},h=t.add,f=t.merge,g=t.remove,m=!1,v=this.comparator&&null==r&&!1!==t.sort,y=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){a=e[s];var b=this.get(a);if(b){if(f&&a!==b){var S=this._isModel(a)?a.attributes:a;t.parse&&(S=b.parse(S,t)),b.set(S,t),l.push(b),v&&!m&&(m=b.hasChanged(y))}p[b.cid]||(p[b.cid]=!0,o.push(b)),e[s]=b}else h&&(a=e[s]=this._prepareModel(a,t))&&(u.push(a),this._addReference(a,t),p[a.cid]=!0,o.push(a))}if(g){for(s=0;s<this.length;s++)p[(a=this.models[s]).cid]||c.push(a);c.length&&this._removeModels(c,t)}var E=!1,_=!v&&h&&g;if(o.length&&_?(E=this.length!==o.length||n.some(this.models,(function(e,t){return e!==o[t]})),this.models.length=0,splice(this.models,o,0),this.length=this.models.length):u.length&&(v&&(m=!0),splice(this.models,u,null==r?this.length:r),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(s=0;s<u.length;s++)null!=r&&(t.index=r+s),(a=u[s]).trigger("add",a,this,t);(m||E)&&this.trigger("sort",this,t),(u.length||c.length||l.length)&&(t.changes={added:u,removed:c,merged:l},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=t.bind(this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},wrapError(this,e),this.sync("read",this,e)},create:function(e,t){var i=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;i||this.add(e,t);var r=this,a=t.success;return t.success=function(e,t,n){i&&r.add(e,n),a&&a.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},values:function(){return new CollectionIterator(this,f)},keys:function(){return new CollectionIterator(this,g)},entries:function(){return new CollectionIterator(this,m)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var a=this.indexOf(r);this.models.splice(a,1),this.length--,delete this._byId[r.cid];var s=this.modelId(r.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=a,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof l},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),a=this.modelId(t.attributes);r!==a&&(null!=r&&delete this._byId[r],null!=a&&(this._byId[a]=t))}}this.trigger.apply(this,arguments)}});var h="function"==typeof Symbol&&Symbol.iterator;h&&(c.prototype[h]=c.prototype.values);var CollectionIterator=function(e,t){this._collection=e,this._kind=t,this._index=0},f=1,g=2,m=3;h&&(CollectionIterator.prototype[h]=function(){return this}),CollectionIterator.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e,t=this._collection.at(this._index);if(this._index++,this._kind===f)e=t;else{var n=this._collection.modelId(t.attributes);e=this._kind===g?n:[n,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var v=t.View=function(e){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(e,b)),this._ensureElement(),this.initialize.apply(this,arguments)},y=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(v.prototype,o,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(y);this.delegate(r[1],r[2],i.bind(this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}});var addUnderscoreMethods=function(e,t,i,r){n.each(i,(function(n,i){t[i]&&(e.prototype[i]=function(e,t,n,i){switch(t){case 1:return function(){return e[n](this[i])};case 2:return function(t){return e[n](this[i],t)};case 3:return function(t,r){return e[n](this[i],cb(t,this),r)};case 4:return function(t,r,a){return e[n](this[i],cb(t,this),r,a)};default:return function(){var t=a.call(arguments);return t.unshift(this[i]),e[n].apply(e,t)}}}(t,n,i,r))}))},cb=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?modelMatcher(e):n.isString(e)?function(t){return t.get(e)}:e},modelMatcher=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}};n.each([[c,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[l,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(e){var t=e[0],i=e[1],r=e[2];t.mixin=function(e){var i=n.reduce(n.functions(e),(function(e,t){return e[t]=0,e}),{});addUnderscoreMethods(t,e,i,r)},addUnderscoreMethods(t,n,i,r)})),t.sync=function(e,i,r){var a=S[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:a,dataType:"json"};if(r.url||(s.url=n.result(i,"url")||urlError()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),r.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){s.type="POST",r.emulateJSON&&(s.data._method=a);var o=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",a),o)return o.apply(this,arguments)}}"GET"===s.type||r.emulateJSON||(s.processData=!1);var u=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,u&&u.call(r.context,e,t,n)};var l=r.xhr=t.ajax(n.extend(s,r));return i.trigger("request",i,l,r),l};var S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),this.preinitialize.apply(this,arguments),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,A=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,o,{preinitialize:function(){},initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var a=this;return t.history.route(e,(function(n){var s=a._extractParameters(e,n);!1!==a.execute(r,s,i)&&(a.trigger.apply(a,["route:"+i].concat(s)),a.trigger("route",i,s),t.history.trigger("route",a,i,s))})),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(T,"\\$&").replace(_,"(?:$1)?").replace(w,(function(e,t){return t?e:"([^/?]+)"})).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,(function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null}))}});var x=t.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},R=/^[#\/]|\s+$/g,C=/^\/+|\/+$/g,M=/#.*$/;x.started=!1,n.extend(x.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(R,"")},start:function(e){if(x.started)throw new Error("Backbone.history has already been started");if(x.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(C,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var a=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),x.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!x.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;e=e.replace(M,"");var r=this.decodeFragment(e);if(this.fragment!==r){if(this.fragment=r,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var a=this.iframe.contentWindow;t.replace||(a.document.open(),a.document.close()),this._updateHash(a.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new x;l.extend=c.extend=E.extend=v.extend=x.extend=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}))}).call(this,n(31))},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(7),s=r.a.extend({},LearnosityApp._internal.config);s.domain=a.a.isChromeApp?function getChromeAppManifestDomain(){return(r.a.isFunction(chrome.runtime.getManifest)?chrome.runtime.getManifest():{}).domain||window.location.hostname}():window.location.hostname,t.a=s},function(e,t,n){"use strict";var i=navigator.userAgent.toLowerCase(),r=i.match(/(opera|ie|edge|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],a=r[1],s=parseInt(r[2],10),o="ie"===a&&s<8&&/trident/i.test(i),u=!!i.match(/android|webos|iphone|ipad|ipod|blackBerry|windows phone|opera mini|iemobile/i),l=!!i.match(/applewebkit/),c=/^((?!android|chrome).)*safari/i.test(navigator.userAgent),d=!(!window.chrome||!window.chrome.runtime||"[object Function]"!==Object.prototype.toString.call(window.chrome.runtime.getManifest)),p=!!navigator.platform&&["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].indexOf(navigator.platform)>=0;i.match(/trident.*rv[ :]*11\./)&&(a="ie",s=11),i.match(/edge/)&&(a="edge"),"version"===a&&(a=r[3]),t.a={browser:a,version:s,compatibilityMode:o,isMobile:u,isChromeApp:d,isAppleWebKit:l,isValidDOCTYPE:function isValidDOCTYPE(e){return!(!e||!e.doctype||"html"!==e.doctype.name)},isIOS:p,isMicrosoft:"ie"===a||"edge"===a,isSafari:c}},function(e,t,n){"use strict";var i=n(5),r=n.n(i),a=n(0),s=n.n(a),o=n(16),u=n.n(o),l=n(12),c=n(4),d=n(2),p=n(30),h=n(10);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function NonValidatableScorer(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,NonValidatableScorer),_possibleConstructorReturn(this,_getPrototypeOf(NonValidatableScorer).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(NonValidatableScorer,e),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(NonValidatableScorer,[{key:"isValid",value:function isValid(){return null}},{key:"score",value:function score(){return this.scoringData.score}},{key:"maxScore",value:function maxScore(){return this.scoringData.maxScore}},{key:"error",value:function error(){}},{key:"canValidateResponse",value:function canValidateResponse(){return!1}},{key:"reset",value:function reset(e){return this.scoringData={automarkable:!1},h.a.normalizeScores(this.scoringData,e),this}}]),NonValidatableScorer}(p.a),g=n(27);function dynamicContentService_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dynamicContentService_createClass(e,t,n){return t&&dynamicContentService_defineProperties(e.prototype,t),n&&dynamicContentService_defineProperties(e,n),e}var m=function(){function DynamicContentService(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function dynamicContentService_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DynamicContentService);var i=n.state;this.model=e,this.activityState=i,this.addModelDynamicContentFacade(),e.once(e.EVENT.READY,(function(){t.initialize()}))}return dynamicContentService_createClass(DynamicContentService,null,[{key:"isDynamicContentModel",value:function isDynamicContentModel(e){var t=e.get("question"),n=t.dynamic,i=t.type;return g.a.isWhiteListed(i)&&!(!n||s.a.isEmpty(n.rows)||s.a.isEmpty(n.cols))}}]),dynamicContentService_createClass(DynamicContentService,[{key:"initialize",value:function initialize(){var e,t=this,n=this.model,i=n.get("response")||{},r=i.value,a=i.dynamic||{},o=a.attempts,u=a.id;if("review"===this.activityState&&!s.a.isEmpty(o)&&u){var l=s.a.findWhere(o,{id:u});l?l.value=r:o.push({id:u,value:r})}this.originalQuestion=n.get("originalQuestion"),e=this.getStoredResponseRowId()||this.getDefaultRowId(),this._isInitializing=!0,delete this._rowId,this.setModelDataWithRowId(e),this._isInitializing=!1,"review"!==this.activityState&&n.on(n.EVENT.MODIFIED,(function(){var e=n.get("response").value;t.setResponseDynamicData(t._rowId,e)}))}},{key:"addModelDynamicContentFacade",value:function addModelDynamicContentFacade(){var e=this;this.model.dynamic={nextAttempt:function nextAttempt(){var t=e.getPotentialRowId(!0);return e.setModelDataWithRowId(t)},previousAttempt:function previousAttempt(){var t=e.getPotentialRowId(!1);return e.setModelDataWithRowId(t)},totalAttempts:function totalAttempts(){var t=e.getRows();return s.a.isArray(t)?t.length:0},currentAttemptIndex:function currentAttemptIndex(){var t=e.getRowById(e._rowId),n=e.getRows();return s.a.indexOf(n,t)}}}},{key:"setResponseDynamicData",value:function setResponseDynamicData(e,t){if("review"!==this.activityState&&!s.a.isUndefined(t)){var n,i=this.model,r=i.get("response")||{},a=this.getStoredResponseRowId()||this.getDefaultRowId(),o=r.dynamic||{};o.id=e,o.attempts=o.attempts||[],(n=s.a.findWhere(o.attempts,{id:a}))||(n={},o.attempts.push(n)),n.id=a,n.value=s.a.deepClone(t),r.dynamic=o,i.set({response:r},{silent:!0})}}},{key:"setModelDataWithRowId",value:function setModelDataWithRowId(e){if(!s.a.isUndefined(e)){var t=this.model,n=this.getTransformedQuestion(e),i=t.get("response"),r=i&&i.value||null;if(t.set("question",n,{silent:!0}),t.validateStartup(),t.set("dynamicContentRowId",e),t.trigger("dynamicContent:changed",e),!this._isInitializing)if("review"===this.activityState){var a=this.getResponseValueByRowId(e),o=s.a.isUndefined(a)?null:a;t.updateResponseValue(o,{setAsModified:!1}),t.getScorer().reset(t.toJSON())}else t.updateResponseValue(null),this.setResponseDynamicData(e,r);return this._rowId=e,n}}},{key:"getResponseValueByRowId",value:function getResponseValueByRowId(e){var t=(this.model.get("response")||{}).dynamic||{},n=s.a.findWhere(t.attempts,{id:e});return n&&n.value}},{key:"getPotentialRowId",value:function getPotentialRowId(e){var t=this.getStoredResponseRowId()||this.getDefaultRowId(),n=this.getRowById(t),i=this.getRows(),r=s.a.indexOf(i,n);return i[e?r+1<=i.length-1?r+1:0:r-1>=0?r-1:i.length-1].id}},{key:"getRowById",value:function getRowById(e){var t=(this.originalQuestion||{}).dynamic;return s.a.findWhere(t&&t.rows,{id:e})}},{key:"getStoredResponseRowId",value:function getStoredResponseRowId(){if("review"===this.activityState&&!s.a.isUndefined(this._rowId))return this._rowId;var e=this.model.get("response")||{},t=s.a.getNested(e,"dynamic.id");return s.a.isString(t)?t:this._rowId}},{key:"getDefaultRowId",value:function getDefaultRowId(){var e=this.getRows();if(e)return e[0].id}},{key:"getRows",value:function getRows(){var e=(this.originalQuestion||{}).dynamic;if(!s.a.isEmpty(e.rows))return e.rows}},{key:"getTransformedQuestion",value:function getTransformedQuestion(e){return this.model.getScorer().getFormattedQuestion(this.originalQuestion,e)}},{key:"reset",value:function reset(){var e=this.model;e.shuffleService?e.shuffleService.reInitialize():e.shuffleServices&&s.a.each(e.shuffleServices,(function(e){return e.reInitialize()}))}}]),DynamicContentService}(),v=/v(\d+).(\d+).(\d+)/;t.a=r.a.Model.extend({VALID_RESPONSE_ID_RE:/^[\w\-]+$/,STATE:{INITIAL:"initial",MODIFIED:"modified",SAVED:"saved"},TYPE:d.QUESTION_TYPES,RESPONSE_TYPE:{ARRAY:"array",AUDIO:"audio",AUDIOPNG:"audio+png",BOOLEAN:"boolean",IMAGE:"image",NUMERIC:"numeric",OBJECT:"object",STRING:"string",VIDEO:"video"},EVENT:{MODIFIED:"modified",CALLVALIDATE:"callValidate",MASKED:"masked",READY:"ready"},FONTSIZE_PREFIX:"lrn_font_size_",FONTSIZE:{SMALL:"small",NORMAL:"normal",LARGE:"large",XLARGE:"xlarge",XXLARGE:"xxlarge"},FONTSIZE_MAP:{small:11,normal:14,large:18,xlarge:24,xxlarge:32},VALID_OVERRIDDEN_ATTRIBUTES_LIST:["spellcheck","instant_feedback"],initialize:function initialize(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validState={valid:!0,errors:[]},this.state=this.STATE.INITIAL,this.lastModified=(new Date).getTime(),this.captured=!1,this.viewClass=null,this.activity=null,this.once(this.EVENT.READY,(function(){t.ready=!0})),this.activityOptions=n,this.setOriginalQuestion(this.get("question")),s.a.isEmpty(this.activityOptions.attribute_overrides)||this.overrideQuestionAttributes()},overrideQuestionAttributes:function overrideQuestionAttributes(){var e=this;s.a.each(e.VALID_OVERRIDDEN_ATTRIBUTES_LIST,(function(t){var n=s.a.getNested(e.activityOptions.attribute_overrides,t);e.get("question")[t]!==n&&(e.get("question")[t]=n)}))},setOriginalQuestion:function setOriginalQuestion(e){var t=this.activityOptions;this.set({originalQuestion:s.a.deepClone(e),question:s.a.deepClone(e)},{silent:!0}),this.dynamicContentService&&(this.set("isDynamicContent",!1),this.dynamicContentService.reset(),delete this.dynamicContentService),m.isDynamicContentModel(this)?(this.dynamicContentService=new m(this,t),this.set("isDynamicContent",!0)):this.validateStartup()},trackEvent:function trackEvent(e){l.a.trackEvent("QuestionType Event",this.get("type"),e,0,!0)},validateStartup:function validateStartup(){var e=this.get("question");s.a.isString(this.get("question").stimulus_review)&&(e.stimulus_review=u.a.sanitizeHTML(e.stimulus_review)),s.a.isString(e.description)&&(e.description=u.a.sanitizeHTML(e.description)),s.a.isString(e.stimulus)&&(e.stimulus=u.a.sanitizeHTML(e.stimulus)),s.a.isString(e.instructor_stimulus)&&(e.instructor_stimulus=u.a.sanitizeHTML(e.instructor_stimulus)),this.hasStimulusObject()&&e.stimulus.content&&(e.stimulus.content=u.a.sanitizeHTML(e.stimulus.content))},getApiVersion:function getApiVersion(){return this.apiVersion},setApiVersion:function setApiVersion(e){this.apiVersion=e},getResponseApiVersion:function getResponseApiVersion(){return this.hasResponse()?this.get("response").hasOwnProperty("apiVersion")?this.get("response").apiVersion:"v1.19.6":null},isHigherApiVersion:function isHigherApiVersion(e,t){if("latest"===e)return e!==t;var n=e.match(v).splice(1),i=t.match(v).splice(1);return n[0]>i[0]||n[0]===i[0]&&n[1]>i[1]||n[0]===i[0]&&n[1]===i[1]&&n[2]>i[2]},update:function update(e){this.set(e,{silent:!0}),this.has("creation_date")&&this.setAsCaptured(),this.get("saved")&&this.setAsSaved()},hasResponse:function hasResponse(){return this.has("response")&&!s.a.isEmpty(this.get("response"))},clearResponse:function clearResponse(){this.hasResponse()&&(this.unset("response"),this.state=this.STATE.INITIAL,this.lastModified=(new Date).getTime(),this.trigger(this.EVENT.MODIFIED))},getResponseMetadata:function getResponseMetadata(){return this.hasResponse()?s.a.deepClone(this.get("response").metadata):void 0},setActivity:function setActivity(e){return this.activity=e,this.processActivityFlags(),this},processActivityFlags:function processActivityFlags(){},setResponseMetadata:function setResponseMetadata(e){return this.hasResponse()?(this.get("response").metadata=e,this.setAsModified(),!0):(c.a.exception({code:10026,detail:"Cannot set response metadata; question with response ID "+this.get("response_id")+" has no response"}),!1)},getResponseValue:function getResponseValue(){return this.hasResponse()?this.get("response").value:void 0},updateResponseValue:function updateResponseValue(e,t){var n;this.processResponseValue(e),t&&!1===t.setAsModified||(n=this.get("response"))&&(n.apiVersion=this.getApiVersion(),this.setAsModified())},processResponseValue:function processResponseValue(e){throw new Error("Unimplemented function processResponseValue for question type:"+this.get("type"))},hasAllowedResponse:function hasAllowedResponse(){return!0},hasStimulus:function hasStimulus(){return s.a.isString(this.get("question").stimulus)},hasStimulusObject:function hasStimulusObject(){return s.a.isObject(this.get("question").stimulus)},hasStimulusReview:function hasStimulusReview(){return s.a.isString(this.get("question").stimulus_review)||s.a.isString(this.get("question").description)},getStimulus:function getStimulus(){return this.hasStimulus()?this.get("question").stimulus:this.hasStimulusObject()&&this.get("question").stimulus.content?this.get("question").stimulus.content:""},getStimulusReview:function getStimulusReview(){return s.a.isString(this.get("question").stimulus_review)?this.get("question").stimulus_review:s.a.isString(this.get("question").description)?this.get("question").description:""},getInstructorStimulus:function getInstructorStimulus(){return s.a.isString(this.get("question").instructor_stimulus)?this.get("question").instructor_stimulus:""},isType:function isType(e){return this.get("type")===e},isAttempted:function isAttempted(){return this.hasResponse()},isCaptured:function isCaptured(){return this.captured},isModified:function isModified(){return this.state===this.STATE.MODIFIED},isSaved:function isSaved(){return this.state===this.STATE.SAVED},toBeSaved:function toBeSaved(){return this.state!==this.STATE.SAVED},setAsCaptured:function setAsCaptured(){this.captured=!0},setAsModified:function setAsModified(){if(this.state!==this.STATE.MODIFIED){this.state=this.STATE.MODIFIED;var e=this.get("response");s.a.isObject(e)&&(s.a.isNumber(e.revision)?e.revision+=1:e.revision=1)}this.lastModified=(new Date).getTime(),this.trigger(this.EVENT.MODIFIED)},setAsSaved:function setAsSaved(){this.state=this.STATE.SAVED,this.lastModified=(new Date).getTime()},getLastModifiedTime:function getLastModifiedTime(){return this.lastModified},getScorer:function getScorer(){if(!this.scorer||this._prevModifiedForScorer!==this.lastModified)if(this._prevModifiedForScorer=this.lastModified,this.scorer)this.scorer.reset(this.toJSON());else{var e=this.getScorerClass();0,this.scorer=new e(this.toJSON(),{includeError:!1})}return this.scorer},getScorerClass:function getScorerClass(){return f},getScore:function getScore(){var e=this.getScorer();return s.a.isNumber(e.maxScore())?{max_score:e.maxScore(),score:e.score()}:null},getResponseId:function getResponseId(e,t,n){var i=new RegExp(n+"_"+t+"_([\\w\\-]+)").exec(e);return i?i[1]:null},getIdForResponseId:function getIdForResponseId(e,t,n){return n+"_"+t+"_"+e},getJsonToCapture:function getJsonToCapture(){return{id:this.get("id"),type:this.get("type"),response_id:this.get("response_id"),user_id:this.get("user_id"),question:this.get("originalQuestion")}},getJsonToSave:function getJsonToSave(){var e={id:this.id};return this.isModified()&&(e.response=this.get("response")),e},getResponseJsonForClient:function getResponseJsonForClient(){return this.hasResponse()?s.a.deepClone(this.get("response")):null},getQuestionJsonForClient:function getQuestionJsonForClient(){return s.a.deepClone(this.get("originalQuestion"))},getMetadataForClient:function getMetadataForClient(){return s.a.deepClone(this.getMetadata())},getMetadata:function getMetadata(){return this.get("question").metadata},getGroupJsonAttributes:function getGroupJsonAttributes(){var e=[],t=this.get("question");return t.hasOwnProperty("validation_group")&&e.push({name:"validation_group",value:t.validation_group}),e},getFontClass:function getFontClass(){var e=this.get("question"),t="";return s.a.isUndefined(this.activity.get("fontsize"))||(t=this.FONTSIZE[this.activity.get("fontsize").toUpperCase()]||""),s.a.hasProperty(e,"ui_style.fontsize")&&s.a.contains(this.FONTSIZE,e.ui_style.fontsize)&&(t=this.FONTSIZE[e.ui_style.fontsize.toUpperCase()]||""),t&&(t=this.FONTSIZE_PREFIX+t),t},getFontSize:function getFontSize(){return this.FONTSIZE_MAP[this.getFontClass().replace(new RegExp(this.FONTSIZE_PREFIX),"")]||this.FONTSIZE_MAP[this.FONTSIZE.NORMAL]},mapValidationMetadata:function mapValidationMetadata(){return!1}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(6),s=n(3);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o,u,l="x-origin-frame",c=1e4,d={JSON:"application/json",FORM:"application/x-www-form-urlencoded; charset=UTF-8"},p=function isString(e){return"[object String]"===Object.prototype.toString.call(e)},h=function isFunction(e){return"[object Function]"===Object.prototype.toString.call(e)},f=function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)},g=!!(window.chrome&&window.chrome.runtime&&h(window.chrome.runtime.getManifest)),m=g?"webview":"iframe",v=0,y=!1,b=[];var S=null,E=!1,_=function(){function PostMessageProxyRequest(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PostMessageProxyRequest),this.headers={}}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(PostMessageProxyRequest,[{key:"open",value:function open(e,t){this.method=e,this.url=t}},{key:"setRequestHeader",value:function setRequestHeader(e,t){this.headers[e]=t}},{key:"getResponseHeader",value:function getResponseHeader(e){return this.responseHeaders[e]}},{key:"send",value:function send(e){var t=this;if(PostMessageProxyRequest.iFrame){var n=function _getRequestId(){return v++}(),i={method:this.method,url:this.url,headers:this.headers,data:e,requestId:n};window.addEventListener("message",(function messageHandler(e){var i;if(0===t.url.indexOf(e.origin)){try{i=JSON.parse(e.data)}catch(e){i={id:-1},console.error("Error parsing JSON from iframe message",e)}i.id===n&&(window.removeEventListener("message",messageHandler),t.responseHeaders=function _parseResponseHeaders(e){var t={};if(!e)return t;for(var n=e.split("\r\n"),i=0;i<n.length;i++){var r=n[i],a=r.indexOf(": ");if(a>0){var s=r.substring(0,a),o=r.substring(a+2);t[s]=o}}return t}(i.headers),t.status=i.status,t.responseText=i.responseText,i.status>0?t.onload.call(t):t.onerror.call(t))}})),PostMessageProxyRequest.iFrame.contentWindow.postMessage(JSON.stringify(i),u)}else!1!==PostMessageProxyRequest.iFrameLoadingTimeout?b.push([this,e]):(this.status=0,this.responseText="The fallback iframe failed to load",this.onerror.call(this))}}],[{key:"iFrame",get:function get(){return S},set:function set(e){S=e}},{key:"iFrameLoadingTimeout",get:function get(){return E},set:function set(e){E=e}}]),PostMessageProxyRequest}();function sendRequest(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.data=function _param(e){var t=[],n=function add(e,n){t[t.length]="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n))};if(f(e))for(var i,r=e.length-1;r>=0;r--)n((i=e[r]).name,i.value);else for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];p(s)||(s=JSON.stringify(s)),n(a,s)}return t.join("&").replace(/%20/g,"+")}(e.data),e.method=e.method||"GET",e.error=h(e.error)?e.error:function(){},e.success=h(e.success)?e.success:function(){},e.parseResponse=!e.hasOwnProperty("parseResponse")||e.parseResponse;var t=new _;if("GET"===e.method){var n="?";-1!==e.url.indexOf("?")&&(n+="&"),e.url+=n+e.data}if(t.open(e.method,o+e.url),e.headers)for(var i in e.headers)e.headers.hasOwnProperty(i)&&t.setRequestHeader(i,e.headers[i]);function callError(t,n){if(e.parseResponse)try{n=JSON.parse(n)}catch(e){}e.error.call(null,{status:t,response:n})}t.setRequestHeader("Content-Type",d.FORM),t.onload=function(){var n=t.responseText;if(t.status>=200&&t.status<=300)try{n&&n.length>0&&e.parseResponse&&(n=JSON.parse(n));try{e.success.call(null,{status:t.status,response:n})}catch(e){callError(-1,"".concat(e.name," on success handler, msg: ").concat(e.message))}}catch(e){callError(-1,"error parsing response: ".concat(e.message,". Response: ").concat(n))}else callError(t.status,n)},t.onerror=function(){callError(t.status,t.responseText)},t.send("POST"===e.method||"PUT"===e.method?e.data:null)}function init(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.default((function(t,n){if(y)t();else{if(!o&&!p(e.baseUrl))throw new Error("baseUrl must be a string.");if(!u&&!p(e.iframeBaseUrl))throw new Error("iframeBaseUrl must be a string.");o=e.baseUrl||o,u=e.iframeBaseUrl||u;var i,r,a=g?"?chromeApp":"",s="".concat("/xdomain").concat(a),d=".".concat(l),h=setTimeout((function(){_.iFrameLoadingTimeout=!0,window.removeEventListener("message",f),n({status:"timeout"})}),c),f=function readyHandler(e){if(u&&0===u.indexOf(e.origin)&&JSON.parse(e.data).ready){y=!0,_.iFrame=r,_.iFrameLoadingTimeout=!1,clearTimeout(h);for(var n=0;n<b.length;n++)b[n][0].send(b[n][1]);b=[],window.removeEventListener("message",readyHandler),t()}};if(document.querySelectorAll)i=document.querySelectorAll(d);else{i=[];for(var v=document.getElementsByTagName(m),S=v.length-1;S>=0;S--)-1!==v[S].className.indexOf(d)&&i.push(v[S])}for(var E=i.length-1;E>=0;E--)-1!==i[E].src.indexOf(u+s)&&(r=i[E]);if(void 0===r&&((r=document.createElement(m)).className=l,r.frameBorder=0,r.marginWidth=0,r.marginHeight=0,r.style.width=0,r.style.height=0,r.style.position="absolute",r.style.top="-1000px",r.setAttribute("aria-hidden","true"),r.src=u+s,document.body.appendChild(r)),g?r.addEventListener("loadstop",(function(e){window.addEventListener("message",f),r.contentWindow.postMessage({command:"handshake"},"*")})):window.addEventListener("message",f),"[object Function]"===Object.prototype.toString.call(e.wrongIframeMsgCallback)){window.addEventListener("message",(function wrongIframeMsgHandler(t){if(0===u.indexOf(t.origin)){var n=JSON.parse(t.data);n.error&&e.wrongIframeMsgCallback(n.error,n.data)}}))}}}))}var w={request:function xhr_request(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments;e.error=e.error||function(){},init().then((function(){return sendRequest.apply(null,t)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.error.call(null,t)}))},init:init},A=[];a.a&&!0!==a.a.deferXhrInit&&w.init({baseUrl:a.a.apiHost,iframeBaseUrl:a.a.apiHost}).catch((function(){}));t.a={ACTION:{GET:"get",SET:"set",UPDATE:"update",DELETE:"delete"},setMetricsContext:function setMetricsContext(e){A=e},request:function request(e){var t={action:e.action||this.ACTION.GET,security:e.security};e.data&&(t.usrequest=e.data),r.a.isArray(A)&&(t.usrequest=t.usrequest||{},t.usrequest.metricsContext=A),w.request({url:e.url,method:"POST",data:t,success:function success(){e.success.apply(null,arguments)},error:function error(){!0!==a.a.unloadInProgress&&e.failure.apply(null,arguments)}})}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a="equivLiteral",s="v1.37";function round(e,t){switch(t){case"none":return e;case"ceiling":return Math.ceil(e);default:return Math.floor(e)}}function generateScore(e){var t=r.a.extend({allowNegative:!1,rawScore:null,maxScore:null},e),n=t.rawScore;return r.a.isNumber(n)?(n=Math.min(n,t.maxScore),t.allowNegative||(n=Math.max(0,n)),n):n}function areStringsEqual(e,t,n){var i=r.a.isString(e)&&r.a.isString(t);return i&&!n.caseSensitive&&(e=e.toLowerCase(),t=t.toLowerCase()),i&&n.removeWhitespace&&(e=e.replace(/ | /g,""),t=t.replace(/ | /g,"")),e===t}function validateValueString(e,t,n){return!(n.strictEquality&&(r.a.isUndefined(t)||null===t)&&!r.a.isUndefined(e)&&null!==e&&_typeof(t)!==_typeof(e))&&(n.trimWhiteSpace&&r.a.isString(t)&&r.a.isString(e)&&(t=t.trim(),e=e.trim()),r.a.isEmpty(t)&&r.a.isEmpty(e)||areStringsEqual(t,e,n))}function validateValueMath(e,t,n){return!!validateMathLists(t,e?[e]:[],n.validateSingleSpec,1,null).isValid}function findMaxValueElements(e,t){if(!e.length)return[];var n=[],i=t(e[0]);return r.a.each(e,(function(e){var r=t(e);r>i?(i=r,n=[e]):o(r,i)&&n.push(e)})),n}function countValue(e,t){return e.filter((function(e){return e===t})).length}function getScoringSettings(e,t,n){return{scoringType:t.validation.scoring_type,scoreIfCorrect:r.a.isNumber(e.score)?e.score:n.score,penaltyIfIncorrect:-Math.abs(r.a.isNumber(t.validation.penalty)?t.validation.penalty:n.penaltyScore),rounding:t.validation.rounding||n.rounding}}function getSubmittedValues(e){var t=[];return e.response&&e.response.value&&(t=e.response.value),t}function setGlobalValidityAndScore(e,t,n){e.globalValidity=function computeGlobalValidity(e,t,n){switch(e){case"exactMatch":return function computeGlobalValidityExactMatch(e,t){return e.length?e.length===t.length&&!!r.a.all(e):void 0}(t,n);case"partialMatch":case"partialMatchV2":return function computeGlobalValidityPartialMatch(e,t){return e.length?!!r.a.any(e):void 0}(t)}}(t.scoringType,e.validityPerValue,n),e.score=function computeScore(e,t,n,i,r,a,s){function computeScorePartialMatch(e,t,n){var i=0;return n.forEach((function(n){switch(n){case!1:case null:case void 0:i+=t;break;case!0:i+=e}})),i}switch(e){case"exactMatch":return function computeScoreExactMatch(e,t,n){switch(n){case!1:return t;case!0:return e;default:return 0}}(t,n,i);case"partialMatch":return computeScorePartialMatch(t,n,r);case"partialMatchV2":return round(computeScorePartialMatch(t,n,r)/a,s)}}(t.scoringType,t.scoreIfCorrect,t.penaltyIfIncorrect,e.globalValidity,e.validityPerValue,n.length,t.rounding),e.maxScore=function computeMaxScore(e,t,n){return"partialMatch"===e?t*n.length:t}(t.scoringType,t.scoreIfCorrect,n)}function generateValidationResult(e,t,n,i){var a=t.value,s=e.question,o={},u=getSubmittedValues(e),l=getScoringSettings(t,s,n);o.authoredResponse=t,o.validityPerValue=function validateValues(e,t,n){return{validateValuesString:function validateValuesString(e,t,n){return r.a.map(e,(function(e,i){return validateValueString(t[i],e,n)}))},validateValuesEquality:function validateValuesEquality(e,t){return r.a.map(e,(function(e,n){return r.a.isEqual(e,t[n])}))},validateValuesIgnoreOrder:function validateValuesIgnoreOrder(e,t){var n=r.a.clone(t);return r.a.map(e,(function(e){var t=r.a.indexOf(n,e);return t>=0&&(delete n[t],!0)}))},validateValuesMath:function validateValuesMath(e,t,n){return r.a.map(e,(function(e,i){return validateValueMath(t[i],e,n)}))},customValidation:function customValidation(e,t,n){if(r.a.isFunction(n.customValidation))return n.customValidation(e,t,n)}}[getValidationFunctionName(n)].apply(null,[e,t,n])}(u,a,i),setGlobalValidityAndScore(o,l,a);var c=JSON.stringify(e.response);return"{}"!==c&&"[]"!==c||(o.score=null),o}function generateValidationResultFromAllPossibleAnswers(e,t,n,i){var a=function getAllPossibleAnswers(e){var t=[];return r.a.each(e,(function(e){r.a.each(e.value,(function(e,n){r.a.isUndefined(t[n])&&(t[n]=[]),t[n].push(e)}))})),t}(t);if(r.a.isEmpty(a))return{};var s=e.question,o={},u=getSubmittedValues(e),l=getScoringSettings(t[0],s,n),c=function validateValuesForAllPossibleAnswers(e,t,n){return{validateValuesString:function validateValuesString(e,t,n){var i=[];return{valueList:r.a.map(e,(function(e,a){var s=t[a],o=r.a.findIndex(s,(function(t){return!r.a.isEmpty(t)&&validateValueString(t,e,n)}));return-1!==o&&(r.a.isUndefined(i[o])?i[o]=1:i[o]++,!0)})),indexMatchCount:i}},validateValuesEquality:function validateValuesEquality(e,n,i){var a=[];return{valueList:r.a.map(e,(function(e,n){var i=t[n],s=r.a.findIndex(i,(function(t){return r.a.isEqual(e,t)}));return-1!==s&&(r.a.isUndefined(a[s])?a[s]=1:a[s]++,!0)})),indexMatchCount:a}},validateValuesIgnoreOrder:function validateValuesIgnoreOrder(e,t,n){var i=r.a.clone(t),a=[];return{valueList:r.a.map(e,(function(e){var t=-1;r.a.each(i,(function(n,s){var o=r.a.indexOf(n,e);return-1===t&&r.a.indexOf(n,o>=0)&&(t=s,r.a.isUndefined(a[o])?a[o]=1:a[o]++),t>=0&&(delete i[t],!0)}))})),indexMatchCount:a}},validateValuesMath:function validateValuesMath(e,t,n){var i=[];return{valueList:r.a.map(e,(function(e,a){var s=t[a],o=r.a.findIndex(s,(function(t){return validateValueMath(t,e,n)}));return-1!==o&&(r.a.isUndefined(i[o])?i[o]=1:i[o]++,!0)})),indexMatchCount:i}},customValidation:function customValidation(e,t,n){if(r.a.isFunction(n.customValidation))return n.customValidation(e,t,n)}}[getValidationFunctionName(n)].apply(null,[e,t,n])}(u,a,i),d=0,p=0;r.a.each(c.indexMatchCount,(function(e,t){r.a.isNumber(e)&&e>p&&(p=e,d=t)})),t[d]?(o.authoredResponse=t[d],o.authoredResponse.score=l.scoreIfCorrect):o.authoredResponse=t[0],o.validityPerValue=c.valueList,setGlobalValidityAndScore(o,l,a);var h=JSON.stringify(e.response);return"{}"!==h&&"[]"!==h||(o.score=null),o}function getValidationFunctionName(e){return e?e.validateSingleSpec?"validateValuesMath":e.ignoreOrder?"validateValuesIgnoreOrder":r.a.isFunction(e.customValidation)?"customValidation":"validateValuesString":"validateValuesEquality"}var o=function epsEqu(e,t){return Math.abs(e-t)<1e-6};function validateMathLists(e,t,n,i,a){for(var s,o,u,l,c,d,p={},h={},f=[],g=0;g<t.length;g++){delete p.intern,o=t[g],r.a.isArray(o)?l=i:(l=r.a.isNumber(t[g].score)?t[g].score:i,f.push(l),o=t[g].value),o=o||[];for(var m=0;m<o.length;m++){var v=["method: "+(u=o[m]).method];u.value&&v.push("value: '"+u.value+"'"),u.options&&v.push("options: "+JSON.stringify(u.options)),"string"==typeof u.options&&(u.options=JSON.parse(u.options)),r.a.isString(e)&&(s=n(u,e),void 0===p.intern&&!0===s.result&&(p.intern=!0),s.result||(p.intern=!1),!0!==s.result&&!1!==s.result&&(h.error={code:s.errorCode,name:"MathQuestionException",message:s.message+" Failed validating user input '"+e+"' against validation object: "+v.join(", "),location:s.location}))}void 0===p.extern&&!1===p.intern&&(p.extern=!1,r.a.isUndefined(a)||(c=-1*a)),!0===p.intern&&(p.extern=!0,c=r.a.isUndefined(c)?l:Math.max(c,l))}return d=f.length?r.a.max(f):i,h.isValid=p.extern,h.isValid&&h.error&&"user"===h.error.location&&delete h.error,h.scoreWithFullPenalty=generateScore({allowNegative:!0,rawScore:c,maxScore:d}),h.maxScore=d,h}function isPlainObj(e){return e&&"object"==_typeof(e)&&e.constructor&&e.constructor==Object}function recursiveParameterClean(e){return isPlainObj(e)?(r.a.each(e,(function(t,n){if(isPlainObj(t))e[n]=recursiveParameterClean(t);else if(r.a.isArray(t))e[n]=r.a.map(t,recursiveParameterClean);else if(r.a.isString(t))switch(n){case"score":case"valid_score":case"penalty_score":e[n]=parseFloat(t);break;case"pairwise":case"case_sensitive":case"is_math":e[n]="true"===t.toLowerCase()||"false"!==t.toLowerCase()&&null,r.a.isNull(e[n])&&delete e[n]}})),e):e}function setCompatibilityOption(e){return e.method===a&&(e.options.compatibility=s),e}t.a={round:round,normalizeScores:function normalizeScores(e,t){var n=e.isAttempted,i=r.a.getNested(t,"question.validation.min_score_if_attempted"),a=r.a.getNested(t,"question.validation.max_score"),s=r.a.getNested(t,"question.validation.unscored");r.a.isUndefined(n)&&(n=t.response&&isPlainObj(t.response)&&!!t.response.value),r.a.isBoolean(e.isValid)||(e.isValid=null),!0===s?(e.score=null,e.maxScore=null):(r.a.isNumber(e.score)?e.score=parseFloat(e.score.toFixed(4)):e.score=null,r.a.isNumber(e.maxScore)?(e.maxScore=parseFloat(e.maxScore.toFixed(4)),n&&r.a.isNull(e.score)&&e.maxScore>0&&(e.score=0)):e.maxScore=null,!1===e.automarkable&&r.a.isNumber(a)&&(e.maxScore=a),r.a.isUndefined(i)||(n&&(e.score=Math.max(e.score,i)),e.maxScore=Math.max(e.maxScore,i))),r.a.isUndefined(e.automarkable)&&(e.automarkable=!0)},scoreArray:function scoreArray(e,t,n,i){var a=function generateValidationResults(e,t,n,i){var a=[];return i&&!0===i.matchAllPossibleResponses?a.push(generateValidationResultFromAllPossibleAnswers(e,t,n,i)):r.a.each(t,(function(t){t.value&&a.push(generateValidationResult(e,t,n,i))})),a.length<=0&&(a=[{authoredResponse:void 0,validityPerValue:null,globalValidity:void 0,score:null,maxScore:0}]),a}(e,t,n,i),s=function chooseBestValidationResult(e){var t=e;return t=findMaxValueElements(t,(function(e){return e.score||0})),t=findMaxValueElements(t,(function(e){return countValue(e.validityPerValue||[],!0)})),(t=findMaxValueElements(t,(function(e){return e.maxScore||0})))[0]}(a),o=function chooseBestSuggestedResponse(e){var t=e;return t=findMaxValueElements(t,(function(e){return e.maxScore||0})),(t=findMaxValueElements(t,(function(e){return countValue(e.validityPerValue||[],!0)})))[0]}(a),u={responsesValid:s.validityPerValue,isValid:s.globalValidity,suggestedResponse:o.authoredResponse,maxScore:o.maxScore};return u.scoreWithFullPenalty=generateScore({allowNegative:!0,rawScore:s.score,maxScore:s.maxScore}),u.score=generateScore({allowNegative:e.question.validation.allow_negative_scores,rawScore:s.score,maxScore:s.maxScore}),u},generateScore:generateScore,addIfDefined:function addIfDefined(e,t){return r.a.isNumber(t)&&(r.a.isUndefined(e)&&(e=0),e+=t),e},stringCompare:areStringsEqual,scoreList:function scoreList(e,t){var n,i,a,s,o,u,l=e.question.validation,c=l.valid_response,d=r.a.isNumber(l.valid_score)?l.valid_score:t.score,p=e.response.value||[],h=d*c.length,f="orderlist"===e.question.type&&!0===l.pairwise,g=[],m=0,v=0;if(p.length){if(a=0,f){for(n=r.a.map(p,(function(e){return r.a.indexOf(c,e)})),o=0;o<n.length;o++)for(u=o+1;u<n.length;u++)v++,n[o]<n[u]&&m++;a=parseFloat((c.length*m/v).toPrecision(2)),v&&(s=r.a.isUndefined(l.partial_scoring)||l.partial_scoring?m>0:v===m)}for(o=0;o<p.length;o++)i=void 0,c[o]==p[o]?(i=d,g.push(!0)):g.push(!1),f||r.a.isUndefined(i)?!f&&r.a.isNumber(l.penalty_score)&&(a-=Math.abs(l.penalty_score)):a+=i;!f&&g.length&&(s=r.a.isUndefined(l.partial_scoring)||l.partial_scoring?r.a.any(g):r.a.all(g)),r.a.isUndefined(l.partial_scoring)||l.partial_scoring||a===h||(a=0)}return{maxScore:h,score:a,isValid:s,responsesValid:g}},normalizeParameters:function normalizeParameters(e){return recursiveParameterClean(e=r.a.clone(e))},validateMathLists:validateMathLists,sumNullableNumbers:function sumNullableNumbers(e){return r.a.reduce(e,(function(e,t){return t=r.a.isNumber(t)?t:null,r.a.isNumber(t)||r.a.isNumber(e)?t+e:null}),null)},InvalidScoringTypeException:function InvalidScoringTypeException(e,t){this.message=e+" does not support scoring type "+t,this.name="InvalidScoringTypeException",this.toString=function(){return this.name+": "+this.message}},epsEquals:o,processCompatibility:function processCompatibility(e){return r.a.each(e.question.validation.valid_response.value,(function(e){r.a.isArray(e)?r.a.each(e,(function(e){e=setCompatibilityOption(e)})):e=setCompatibilityOption(e)})),r.a.each(e.question.validation.alt_responses,(function(e){r.a.each(e.value,(function(e){r.a.isArray(e)?r.a.each(e,(function(e){e=setCompatibilityOption(e)})):e=setCompatibilityOption(e)}))})),e}}},function(e,t,n){"use strict";var i=n(5),r=n.n(i),a=n(0),s=n.n(a),o=(n(46),n(6)),u=n(4),l="data-lrn-mathjax-postprocessed",c=function isQEWidget(e){var t=["mathml_ckwidget","latex_ckwidget"];return s.a.some(e.parentNode.classList,(function(e){return t.indexOf(e)>-1}))},d=function removeMathJaxA11yFeatures(e){var t=e.querySelector(".MJX_Assistive_MathML");e.removeAttribute("data-mathml"),t&&t.parentNode.removeChild(t)},p=function postProcessMathJaxNodes(e){var t=MathJax.Hub.getAllJax(e);s.a.each(t,(function(e){if(e){var t=function findFrameNodeFor(e){return document.getElementById(e.inputID+"-Frame")}(e);if(t&&!function isFrameNodeAlreadyPostProcessed(e){return e.getAttribute(l)||c(e)}(t)){var n=function getAuthoredAriaLabelNode(e){return function getARIALabelFromWrappingSpan(e){if("span"===e.parentNode.tagName.toLowerCase())return e.parentNode.getAttribute("aria-label")}(e)?e.parentNode:function getARIALabelFromDisplayBlockParent(e){if("div"===e.parentNode.tagName.toLowerCase()&&"MathJax_Display"===e.parentNode.className)return e.parentNode.parentNode.getAttribute("aria-label")}(e)?e.parentNode.parentNode:void 0}(t);n&&function placeAriaLabel(e,t){var n=t.getAttribute("aria-label"),i=document.createElement(t.tagName);d(e),t.removeAttribute("aria-label"),i.setAttribute("aria-label",n),i.setAttribute("role","math"),t.parentNode.insertBefore(i,t),i.appendChild(t)}(t,n),function removeTabIndex(e){e.removeAttribute("tabindex")}(t),function markPostProcessed(e){e.setAttribute(l,"true")}(t)}}}))},h=function preprocessMathNodes(){var e=document.querySelectorAll(".lrn math[alttext]");s.a.each(e,(function(e){if(e.parentNode){var t=document.createElement("span"),n=e.getAttribute("alttext");t.setAttribute("aria-label",n),e.parentNode.insertBefore(t,e),t.appendChild(e),e.removeAttribute("alttext")}}))},f=!1,g=[],m=!1;t.a=s.a.extend({EVENT:{RENDERED:"rendered"},isInitalised:function isInitalised(){return!s.a.isUndefined(window.MathJax)||f},init:function init(){if(s.a.isUndefined(window.MathJax)&&!f){f=!0;var e=this;n.e(70).then(n.bind(null,636)).then((function(t){var n=t.default,i=n.MathJax,r=n.MathJaxLrnConfig;i.cdnVersion="",i.OutputJax.fontDir=o.a.assetsHost+"/fonts/MathJax",i.OutputJax.imageDir=o.a.assetsHost+"/images/MathJax",i.Hub.Register.StartupHook("Begin Config",(function(t){r.config(i),i.Hub.Config({messageStyle:"none",showMathMenu:!1,tex2jax:{ignoreClass:"lrn_noMath",inlineMath:[["\\(","\\)"],["$$","$$"]],displayMath:[["\\[","\\]"]]},jax:["output/HTML-CSS"],TeX:{Macros:{abs:["{|#1|}",1],degree:["°"],longdiv:["{\\enclose{longdiv}{#1}}",1],atomic:["{_{#1}^{#2}}",2],polyatomic:["{_{#2}{}^{#1}}",2],circledot:["{\\odot}"],parallelogram:["\\unicode{x25B1}"],ngtr:["\\unicode{x226F}"],nless:["\\unicode{x226E}"],MathQuillVarField:["#1",1]}},"HTML-CSS":{availableFonts:["TeX"],minScaleAdjust:100,matchFontHeight:!1,imageFont:null}}),i.InputJax.TeX.prefilterHooks.Add((function(e){e.math=e.math.replace(/('|")/g,(function(e,t){return"{}^"+("'"===t?"\\prime ":"{\\prime\\prime}")}))})),function(){if(i.Extension.MathZoom.msieSizeBug){var e=i.Extension.MathZoom.Zoom;i.Extension.MathZoom.Zoom=function(){var t=e.apply(i.Extension.MathZoom,arguments),n=document.getElementById("MathJax_Zoom");return n.style.height="auto",n.style.width="auto",t}}}(),i.Hub.Configured(),f=!1,i.Hub.Register.StartupHook("Begin",(function(){var e=/^MathJax-Element-(\d+)$/,t=/^MathJax-Element-(\d+)-Frame$/,n=/^MathJax-Span-(\d+)$/,i=document.querySelectorAll(".MathJax, .MathJax span");s.a.each(i,(function(i){(e.test(i.id)||t.test(i.id)||n.test(i.id))&&i.removeAttribute("id")})),h()})),i.Hub.Register.StartupHook("End",(function(){p(),e._triggerRendered()}))}))})).catch((function(e){u.a.log("Math rendering error: "+e)}))}},preventReRender:function preventReRender(e){var t=e.querySelectorAll('script[type="math/tex"]');s.a.each(t,(function(e){e.parentNode.removeChild(e)}))},_triggerRendered:function _triggerRendered(){g.length?this._renderFromQueue():this.trigger(this.EVENT.RENDERED)},_renderFromQueue:function _renderFromQueue(){var e,t,n=this;m||0===g.length||(e=g.shift(),m=!0,window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub,e.el],(function(){for(p(e.el),t=0;t<e.callbacks.length;t++)e.callbacks[t]();m=!1,n._triggerRendered()})))},render:function render(e,t){!function addTypesetCallToTheQueue(e,t){var n,i,r;for(n=0;n<g.length;n++)if(g[n].el===e){if(s.a.isFunction(t)){for(i=0;i<g[n].callbacks.length;i++)if(g[n].callbacks[i]===t)return;g[n].callbacks.push(t)}return}r={el:e,callbacks:[]},s.a.isFunction(t)&&r.callbacks.push(t),g.push(r)}(e,t),!f&&window.MathJax&&this._renderFromQueue()},remove:function remove(e){var t,n;if(e&&!f&&window.MathJax&&(n=window.MathJax.Hub.getAllJax(e),s.a.isArray(n)))for(t=0;t<n.length;t++)window.MathJax.Hub.Queue(["Remove",n[t]])}},r.a.Events)},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(6),s="",o="lrnUA",u="lrn_ga";function _arrayArgs(){return Array.prototype.slice.call(arguments)}function _baseTypeCheck(e,t){return("Object"===e||"String"===e||"Array"===e||"Number"===e)&&Object.prototype.toString.call(t)==="[object "+e+"]"}function _isObject(e){return _baseTypeCheck("Object",e)}function _isArray(e){return _baseTypeCheck("Array",e)}function _isString(e){return _baseTypeCheck("String",e)}function loadUA(){s&&!window[u]&&function(e,t,n,i,r,a,s){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,a=t.createElement(n),s=t.getElementsByTagName(n)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(a,s)}(window,document,"script",0,u)}function universalAnalyticsPush(e){s&&(loadUA(),_isArray(e)&&(e[0]=o+"."+e[0],window[u].apply(null,e)))}function analyticsPush(e){s&&(!function loadGaq(){if(s&&!window._gaq){window._gaq=[];var e=document.createElement("script");e.async=!0,e.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),analyticsPush(["lrn._setAccount",s])}}(),_isArray(e)&&window._gaq.push(e))}var l={init:function init(e){var t={};_isObject(e)||(e={}),e.classicProperty&&_isString(e.classicProperty)&&-1===e.classicProperty.indexOf("{:")&&(s=e.classicProperty),s&&(t.name=function setTracker(e){return _isString(e)&&e.length&&(o=e),"."===o.slice(-1)&&(o=o.slice(0,o.length-1)),o}(e.tracker),t.cookieDomain=window.location.hostname,function _isNumber(e){return _baseTypeCheck("Number",e)}(e.siteSpeedSampleRate)&&(t.siteSpeedSampleRate=e.siteSpeedSampleRate),loadUA(),window[u]("create",s,t))},trackEvent:function trackEvent(){if(s){var e,t=_arrayArgs.apply(null,arguments);1===t.length&&_isObject(t[0])&&(e=t[0],t[0]=e.category,t[1]=e.action,t[2]=e.label,t[3]=e.value,t[4]=e.noninteraction),t[4]={nonInteraction:!!t[4]},universalAnalyticsPush(["send","event"].concat(t))}},trackTiming:function trackTiming(){if(s){var e,t=_arrayArgs.apply(null,arguments);1===t.length&&_isObject(t[0])&&(e=t[0],t[0]=e.timingCategory,t[1]=e.timingVar,t[2]=e.timingValue,t[3]=e.timingLabel),t[2]>0&&universalAnalyticsPush(["send","timing"].concat(t))}},trackPageview:function trackPageview(){if(s){var e=["send","pageview"];arguments.length&&(e=e.concat(_arrayArgs.apply(null,arguments))),universalAnalyticsPush(e)}},analyticsPush:analyticsPush,universalAnalyticsPush:universalAnalyticsPush},c="lrnDataLayer";function analyticsGTM_baseTypeCheck(e,t){return("Object"===e||"String"===e||"Array"===e||"Number"===e)&&Object.prototype.toString.call(t)==="[object "+e+"]"}function analyticsGTM_isObject(e){return analyticsGTM_baseTypeCheck("Object",e)}function analyticsGTM_isString(e){return analyticsGTM_baseTypeCheck("String",e)}function hasDataLayer(){return!!window[c]}function push(e,t){window.lrnAnalytics=window.lrnAnalytics||[],hasDataLayer()&&analyticsGTM_isObject(e)&&(e.isInternal=!0,analyticsGTM_isString(e.application)&&!e["dimensions.APPLICATION"]&&(e["dimensions.APPLICATION"]=e.application),window.lrnAnalytics.push(e),t&&resetDataLayerPush(e))}function setDataLayerObject(e,t){var n,i={};if(hasDataLayer()&&analyticsGTM_isString(e)&&analyticsGTM_isObject(t))for(n in t)t[n]&&(i[e+"."+n]=t[n]);i.event="set_"+e,push(i,!1)}function resetDataLayerPush(e){var t,n={};if(hasDataLayer()&&analyticsGTM_isObject(e)){for(t in e)void 0!==e[t]&&(n[t]=void 0);n.event="reset_data",push(n)}}function resetDataLayerObject(e){var t={};hasDataLayer()&&analyticsGTM_isString(e)&&(t.event="reset_"+e,t[e]=void 0,push(t))}var d,p,h={init:function analyticsGTM_init(e,t,n){analyticsGTM_isObject(e)||(e={}),analyticsGTM_isString(e.gtmDataLayer)&&(c=e.gtmDataLayer),analyticsGTM_isString(e.gtmContainerID)&&e.gtmContainerID,analyticsGTM_isObject(t)&&t,analyticsGTM_isObject(n)&&n},push:push,setDataLayerObject:setDataLayerObject,trackPageview:function analyticsGTM_trackPageview(e,t){var n={};hasDataLayer()&&(analyticsGTM_isObject(e)&&setDataLayerObject("pageview",e),n.event="track_pageview",n.application=t,push(n,!0),resetDataLayerObject("pageview"))},trackEvent:function analyticsGTM_trackEvent(e,t){var n={},i={};hasDataLayer()&&(e&&analyticsGTM_isObject(e)&&(n=e),i.event="track_event",i.application=t,i.eventData=n,push(i,!0))},trackTiming:function analyticsGTM_trackTiming(e,t){var n,i={};hasDataLayer()&&(analyticsGTM_isObject(e)&&(n=e),analyticsGTM_isObject(n)&&(i.event="track_timing",i.application=t,i.timing=n,push(i,!0)))},trackCustom:function trackCustom(e,t){hasDataLayer()&&analyticsGTM_isObject(e)&&(analyticsGTM_isString(e.event)||(e.event="set_custom"),push(e,!0))},resetDataLayerObject:resetDataLayerObject,resetDataLayerPush:resetDataLayerPush},f="Questions API",g={CONSUMER:"dimension1",API_VERSION:"dimension2",REQUESTED_API_VERSION:"dimension3",QUESTION_TYPES:"dimension4",CONTEXT:"dimension5",TYPE:"dimension6",STATE:"dimension7",NUM_QUESTIONS_PER_ACT:"dimension8",CONSUMER_KEY:"dimension9",CONSUMER_PAGE_URL:"dimension10",ASSESS_LAYOUT:"dimension11",NO_ITEMS_PER_ACTIVITY:"dimension12",APPLICATION:"dimension13",ASSESS_API_VERSION:"dimension14",REQUESTED_ASSESS_API_VERSION:"dimension15",ITEMS_API_VERSION:"dimension16",REQUESTED_ITEMS_API_VERSION:"dimension17",QE_API_VERSION:"dimension18",REQUESTED_QE_API_VERSION:"dimension19",AUTHOR_API_VERSION:"dimension20",REQUESTED_AUTHOR_API_VERSION:"dimension21",REPORTS_API_VERSION:"dimension22",REQUESTED_REPORTS_API_VERSION:"dimension23",EVENTS_API_VERSION:"dimension24",REQUESTED_EVENTS_API_VERSION:"dimension25",DATA_API_VERSION:"dimension26",REQUESTED_DATA_API_VERSION:"dimension27",NUM_QUESTIONS:"dimension28",NUM_MATH_QUESTIONS:"dimension29",NUM_ITEMS:"dimension30",IS_EXISTING_SESSION:"dimension34"},m={NUM_QUESTIONS:"metric1",NUM_MATH_QUESTIONS:"metric2"},v="(not set)",y=v,b=v,S=LearnosityApp.version||v,E=LearnosityApp.requestedApiVersion||v,_=v,w=v,A=v,T=v,x=v,R=0,C=0,M=0,I={},O=!1,N=!0;function setDimensions(){var e=v,t=v,n=v,i=R,a={},s=function getCleanUrl(){return window.location.hostname+window.location.pathname}(),o=v;r.a.isObject(d)&&(e=function extractQuestionTypes(){var e=v;if(r.a.has(d,"questions")&&d.questions.length){var t=r.a.uniq(r.a.compact(r.a.map(d.questions,(function(e){return e.type})))).sort();t.length&&(e=t.join(","))}return e}(),d.type&&(t=d.type),d.state&&(n=d.state),r.a.isBoolean(d.existing_session)&&(o="".concat(d.existing_session))),r.a.chain({CONSUMER:y,API_VERSION:S,REQUESTED_API_VERSION:E,QUESTION_TYPES:e,CONTEXT:x,TYPE:t,STATE:n,NUM_QUESTIONS_PER_ACT:i,CONSUMER_KEY:b,CONSUMER_PAGE_URL:s,NUM_QUESTIONS:R,NUM_MATH_QUESTIONS:C,ITEMS_API_VERSION:_,REQUESTED_ITEMS_API_VERSION:w,ASSESS_API_VERSION:A,REQUESTED_ASSESS_API_VERSION:T,IS_EXISTING_SESSION:o}).forEach((function(e,t){N&&l.universalAnalyticsPush(["set",g[t],e]),a[t]=e})),analytics_push({application:f,dimensions:a}),M++}function setConsumerKey(e){b=e||v}function extractVersion(e,t){var n,i,a=v;switch(e){case"items":n=t.match(/Items API - (inline|assess) \((v\d+\.\d+\.\d+|\w+)\)/i),!r.a.isEmpty(n)&&r.a.isString(n[2])&&(a=n[2]);break;case"assess":i=t.match(/Assess API \((v\d+\.\d+\.\d+|\w+)\)/i),!r.a.isEmpty(i)&&r.a.isString(i[1])&&(a=i[1])}return a}function analytics_trackEvent(){var e={};O&&(M||setDimensions(),N&&l.trackEvent.apply(null,arguments),arguments.length>=3?e={category:arguments[0],action:arguments[1],label:arguments[2],value:arguments[3],noninteraction:arguments[4]}:arguments.length>0&&r.a.isObject(arguments[0])&&(e=arguments[0]),analytics_push({application:f,eventData:e}))}function trackTimingStart(e,t,n){var i=e+":"+t;n=n||createTimestamp(),I[i]||(I[i]=[]),I[i].push(n)}function trackTimingEnd(e,t,n,i,a){var s,o=e+":"+t,u=I[o],c=n||createTimestamp(),d=e;return r.a.isString(i)&&(d=i+" "+e),u&&u.length>0&&(s=c-u.shift(),a||function trackUserTiming(){var e,t={};O&&(M||setDimensions(),N&&l.trackTiming.apply(null,arguments),arguments.length>=3&&(t={category:arguments[0],variable:arguments[1],value:arguments[2]},r.a.isString(arguments[3])&&(e=arguments[3])),arguments.length>0&&r.a.isObject(arguments[0])&&(t=arguments[0]),analytics_push({application:e||f,timing:t}))}(d,t,s,i),u.length<=0&&delete I[o]),{category:e,event:t,duration:s}}function createTimestamp(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}function analytics_push(e){var t=[],n=[];if(e){try{var i=v;if(e.application&&(i=e.application),r.a.isObject(e.dimensions))try{h.setDataLayerObject("dimensions",e.dimensions)}catch(e){n.push(e),t.push("dimensions")}if(r.a.isObject(e.metrics))try{h.setDataLayerObject("metrics",e.metrics)}catch(e){n.push(e),t.push("metrics")}if(e.pageview||"track_pageview"===e.event)try{h.trackPageview(e.pageview,i)}catch(e){n.push(e),t.push("pageview")}if(r.a.isObject(e.eventData))try{h.trackEvent(e.eventData,i)}catch(e){n.push(e),t.push("eventData")}if(r.a.isObject(e.timing))try{if(r.a.isString(e.event))switch(e.event){case"timing_start":e.timing&&e.timing.category&&e.timing.variable&&trackTimingStart(e.timing.category,e.timing.variable,e.timing.timestamp);break;case"timing_end":e.timing&&e.timing.category&&e.timing.variable&&trackTimingEnd(e.timing.category,e.timing.variable,e.timing.timestamp,i);break;default:h.trackTiming(e.timing,i)}else h.trackTiming(e.timing,i)}catch(e){n.push(e),t.push("timing")}if(r.a.isObject(e.custom))try{h.trackCustom(e.custom,i)}catch(e){n.push(e),t.push("custom")}if(r.a.isArray(e))try{e.forEach((function(e){analytics_push(e)}))}catch(e){n.push(e)}}catch(e){console.error(e)}r.a.isEmpty(t)||t.forEach(h.resetDataLayerObject),r.a.isEmpty(n)||(console.error("LrnAnalytics push error: "+n.join(" - ")),t.forEach(h.resetDataLayerObject))}}p=r.a.once((function(e){l.init(e),O=!0,r.a.isObject(e)&&r.a.isEmpty(e.classicProperty)&&(N=!1)}));var k={init:function analytics_init(e){e,p(e)},setActivity:function setActivity(e){if((d=e||{}).questions){R=d.questions.length;var t=r.a.countBy(d.questions,(function(e){return e.is_math?"math":"not_math"}));C=t.math?t.math:0}},setConsumer:function setConsumer(e){y=e&&e.get("name")?e.get("name"):y,b=e&&e.get("key")?e.get("key"):b},setConsumerKey:setConsumerKey,setContext:function setContext(e){_=extractVersion("items",x=e||x),A=extractVersion("assess",x)},setFullContext:function setFullContext(e){r.a.isObject(e)&&(_=e.itemsVersion||v,w=e.itemsRequested||v,A=e.assessVersion||v,T=e.assessRequested||v)},trackPageview:function analytics_trackPageview(){if(O){var e,t,n,i={},s=l.analyticsPush;setDimensions(),N&&(s(["lrn._setDomainName",a.a.domain]),s(["lrn._setCustomVar",1,y,S]),d&&((e=d.questions)&&(t=[],n=e.length,r.a.each(e,(function(e){e.type&&t.push(e.type)})),s(["lrn._setCustomVar",2,""+n,""+r.a.unique(t).sort()]),s(["lrn._setCustomVar",3,d.state,d.type])),s(["lrn._setCustomVar",4,y,d.state+", "+d.type])),s(["lrn._setCustomVar",5,S,y]),s(["lrn._trackPageview"]),i[m.NUM_QUESTIONS]=R,i[m.NUM_MATH_QUESTIONS]=C,l.trackPageview(i)),analytics_push({application:f,pageview:{url:"/"+window.location.hostname+"/"+y,title:y}})}},trackEvent:analytics_trackEvent,trackError:function trackError(e,t,n,i){r.a.isString(i)&&setConsumerKey(i),analytics_trackEvent({category:"LearnosityApp Error",action:e+": "+t,label:""+n,value:1,noninteraction:!0})},trackTimingStart:trackTimingStart,trackTimingEnd:trackTimingEnd,push:analytics_push};a.a&&a.a.analytics&&!0===a.a.analytics.disable&&r.a.forEach(r.a.keys(k),(function(e){k[e]=function(){}}));t.a=k},function(e,t,n){"use strict";var i,r,a=n(0),s=n.n(a),o=n(2),u=n(4),l=n(3);function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(_defineProperty(i={},o.QUESTION_TYPES.ASSOCIATION,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(3),n.e(53)]).then(n.bind(null,77))})),_defineProperty(i,o.QUESTION_TYPES.CHOICEMATRIX,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(54)]).then(n.bind(null,72))})),_defineProperty(i,o.QUESTION_TYPES.CLASSIFICATION,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(3),n.e(55)]).then(n.bind(null,82))})),_defineProperty(i,o.QUESTION_TYPES.CLOZEASSOCIATION,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(3),n.e(56)]).then(n.bind(null,94))})),_defineProperty(i,o.QUESTION_TYPES.CLOZEDROPDOWN,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(57)]).then(n.bind(null,97))})),_defineProperty(i,o.QUESTION_TYPES.CLOZETEXT,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(58)]).then(n.bind(null,96))})),_defineProperty(i,o.QUESTION_TYPES.HIGHLIGHT,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(60)]).then(n.bind(null,91))})),_defineProperty(i,o.QUESTION_TYPES.LONGTEXTV2,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(5),n.e(62)]).then(n.bind(null,70))})),_defineProperty(i,o.QUESTION_TYPES.MCQ,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(63)]).then(n.bind(null,83))})),_defineProperty(i,o.QUESTION_TYPES.ORDERLIST,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(3),n.e(64)]).then(n.bind(null,79))})),_defineProperty(i,o.QUESTION_TYPES.IMAGECLOZEASSOCIATIONV2,(function(){return Promise.all([n.e(6),n.e(1),n.e(0),n.e(2),n.e(61)]).then(n.bind(null,69))})),_defineProperty(i,o.QUESTION_TYPES.RATING,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(65)]).then(n.bind(null,80))})),_defineProperty(i,o.QUESTION_TYPES.SHORTTEXT,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(66)]).then(n.bind(null,88))})),_defineProperty(i,o.QUESTION_TYPES.TOKENHIGHLIGHT,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(5),n.e(67)]).then(n.bind(null,81))})),_defineProperty(i,o.QUESTION_TYPES.VIDEO,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(68)]).then(n.bind(null,68))})),_defineProperty(i,o.QUESTION_TYPES.DRAWING,(function(){return Promise.all([n.e(6),n.e(1),n.e(0),n.e(2),n.e(59)]).then(n.bind(null,73))})),_defineProperty(i,o.QUESTION_TYPES.AUDIO,(function(){return Promise.all([n.e(1),n.e(0),n.e(7),n.e(19)]).then(n.bind(null,102))})),_defineProperty(i,o.QUESTION_TYPES.AUDIOADV,(function(){return Promise.all([n.e(1),n.e(0),n.e(7),n.e(20)]).then(n.bind(null,107))})),_defineProperty(i,o.QUESTION_TYPES.BOOLEAN,(function(){return n.e(21).then(n.bind(null,113))})),_defineProperty(i,o.QUESTION_TYPES.CHEMISTRY,(function(){return Promise.all([n.e(4),n.e(8),n.e(1),n.e(0),n.e(22)]).then(n.bind(null,103))})),_defineProperty(i,o.QUESTION_TYPES.CHEMISTRYESSAY,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(5),n.e(23)]).then(n.bind(null,117))})),_defineProperty(i,o.QUESTION_TYPES.CUSTOM,(function(){return Promise.all([n.e(0),n.e(28)]).then(n.bind(null,111))})),_defineProperty(i,o.QUESTION_TYPES.FILLSHAPE,(function(){return Promise.all([n.e(6),n.e(30)]).then(n.bind(null,71))})),_defineProperty(i,o.QUESTION_TYPES.FILEUPLOAD,(function(){return Promise.all([n.e(0),n.e(29)]).then(n.bind(null,85))})),_defineProperty(i,o.QUESTION_TYPES.FORMULA,(function(){return Promise.all([n.e(4),n.e(1),n.e(0),n.e(31)]).then(n.bind(null,78))})),_defineProperty(i,o.QUESTION_TYPES.FORMULAESSAY,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(5),n.e(32)]).then(n.bind(null,61))})),_defineProperty(i,o.QUESTION_TYPES.GRAPHPLOTTING,(function(){return Promise.all([n.e(1),n.e(0),n.e(9),n.e(34)]).then(n.bind(null,67))})),_defineProperty(i,o.QUESTION_TYPES.GRIDDED,(function(){return n.e(35).then(n.bind(null,93))})),_defineProperty(i,o.QUESTION_TYPES.HOTSPOT,(function(){return n.e(36).then(n.bind(null,104))})),_defineProperty(i,o.QUESTION_TYPES.IMAGEUPLOAD,(function(){return Promise.all([n.e(1),n.e(0),n.e(37)]).then(n.bind(null,74))})),_defineProperty(i,o.QUESTION_TYPES.LONGTEXT,(function(){return Promise.all([n.e(0),n.e(5),n.e(38)]).then(n.bind(null,116))})),_defineProperty(i,o.QUESTION_TYPES.NUMBERLINE,(function(){return Promise.all([n.e(1),n.e(0),n.e(9),n.e(39)]).then(n.bind(null,98))})),_defineProperty(i,o.QUESTION_TYPES.NUMBERLINEPLOT,(function(){return Promise.all([n.e(1),n.e(0),n.e(9),n.e(40)]).then(n.bind(null,95))})),_defineProperty(i,o.QUESTION_TYPES.PLAINTEXT,(function(){return Promise.all([n.e(1),n.e(0),n.e(41)]).then(n.bind(null,108))})),_defineProperty(i,o.QUESTION_TYPES.SCORE,(function(){return n.e(42).then(n.bind(null,109))})),_defineProperty(i,o.QUESTION_TYPES.SIMPLECHART,(function(){return Promise.all([n.e(6),n.e(1),n.e(0),n.e(43)]).then(n.bind(null,75))})),_defineProperty(i,o.QUESTION_TYPES.SIMPLESHADING,(function(){return Promise.all([n.e(1),n.e(44)]).then(n.bind(null,101))})),_defineProperty(i,o.QUESTION_TYPES.SORTLIST,(function(){return Promise.all([n.e(1),n.e(3),n.e(45)]).then(n.bind(null,100))})),_defineProperty(i,o.QUESTION_TYPES.TEXTHIGHLIGHT,(function(){return Promise.all([n.e(0),n.e(5),n.e(46)]).then(n.bind(null,105))})),_defineProperty(i,o.QUESTION_TYPES.UNKNOWN,(function(){return n.e(47).then(n.bind(null,110))})),i);c[o.QUESTION_TYPES.CLOZEINLINETEXT]=c[o.QUESTION_TYPES.IMAGECLOZETEXT]=c[o.QUESTION_TYPES.IMAGECLOZEASSOCIATION]=function(){return Promise.all([n.e(1),n.e(3),n.e(0),n.e(24)]).then(n.bind(null,99))},c[o.QUESTION_TYPES.IMAGECLOZEDROPDOWN]=function(){return Promise.all([n.e(1),n.e(0),n.e(26)]).then(n.bind(null,106))},c[o.QUESTION_TYPES.CLOZEFORMULA]=c[o.QUESTION_TYPES.IMAGECLOZEFORMULA]=function(){return Promise.all([n.e(4),n.e(8),n.e(1),n.e(0),n.e(27)]).then(n.bind(null,62))},c[o.QUESTION_TYPES.CLOZECHEMISTRY]=c[o.QUESTION_TYPES.IMAGECLOZECHEMISTRY]=function(){return Promise.all([n.e(4),n.e(8),n.e(1),n.e(0),n.e(25)]).then(n.bind(null,112))},c[o.QUESTION_TYPES.FORMULAV2]=c[o.QUESTION_TYPES.FORMULA_DEV]=function(){return Promise.all([n.e(4),n.e(1),n.e(0),n.e(2),n.e(33)]).then(n.bind(null,63))};var d=(_defineProperty(r={},o.FEATURE_TYPES.IMAGE_TOOL,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(49)]).then(n.bind(null,84))})),_defineProperty(r,o.FEATURE_TYPES.VIDEO_PLAYER,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(18)]).then(n.bind(null,92))})),_defineProperty(r,o.FEATURE_TYPES.CALCULATOR,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(3),n.e(48)]).then(n.bind(null,76))})),_defineProperty(r,o.FEATURE_TYPES.SCROLLABLE_PASSAGE,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(51)]).then(n.bind(null,90))})),_defineProperty(r,o.FEATURE_TYPES.LINE_READER,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(50)]).then(n.bind(null,87))})),_defineProperty(r,o.FEATURE_TYPES.AUDIO_PLAYER,(function(){return Promise.all([n.e(1),n.e(0),n.e(7),n.e(13)]).then(n.bind(null,89))})),_defineProperty(r,o.FEATURE_TYPES.COUNTER,(function(){return Promise.all([n.e(1),n.e(0),n.e(14)]).then(n.bind(null,114))})),_defineProperty(r,o.FEATURE_TYPES.FORMULAINPUT,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(16)]).then(n.bind(null,115))})),_defineProperty(r,o.FEATURE_TYPES.SHARED_PASSAGE,(function(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(52)]).then(n.bind(null,86))})),_defineProperty(r,o.FEATURE_TYPES.CUSTOM_FEATURE,(function(){return Promise.all([n.e(1),n.e(0),n.e(15)]).then(n.bind(null,119))})),_defineProperty(r,o.FEATURE_TYPES.UNKNOWN,(function(){return Promise.all([n.e(1),n.e(0),n.e(17)]).then(n.bind(null,118))})),r);function resolveBundlePromises(e,t){l.default.all(e).then((function(){if(arguments.length){var e=s.a.map(arguments.length<=0?void 0:arguments[0],(function(e){return s.a.isArray(e)&&e[0].default?e[0]:e}));t&&t.apply(void 0,_toConsumableArray(e))}else t&&t()})).catch((function(e){u.a.exception({code:10017,detail:e.stack||e.message})}))}var p={default:c,legacy:{},reactiveViews:{},reactiveViewsInDev:{}},h={default:d,legacy:{},reactiveViews:{},reactiveViewsInDev:{}};function getBundleToLoad(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="feature"===e?h:p,i=t.reactiveViews,r=t.reactiveViewsInDev,a=s.a.extend({},n.default);return!0===i?s.a.extend(a,n.reactiveViews,r&&n.reactiveViewsInDev):!1===i&&s.a.extend(a,n.legacy),a}var f={mathcore:function mathcore(){return Promise.all([n.e(4),n.e(11)]).then(n.bind(null,64))},reactiveViewComponents:function reactiveViewComponents(){return Promise.all([n.e(1),n.e(0),n.e(2),n.e(12)]).then(n.bind(null,65))},spokenmathWorker:function spokenmathWorker(){return n.e(69).then(n.t.bind(null,66,7))}};t.a={requireBundlesForQuestionTypes:function requireBundlesForQuestionTypes(e,t){var n=getBundleToLoad("question",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),i=[],r={};e=[o.QUESTION_TYPES.UNKNOWN].concat(_toConsumableArray(e)),s.a.each(e,(function(e){n[e]&&i.push(n[e]())})),i.length>0?resolveBundlePromises(i,(function(){for(var n=0;n<e.length;n++){var i=arguments[n];i&&i.default&&(r[e[n]]=i.default)}t(r)})):t(r)},requireBundlesForFeatureTypes:function requireBundlesForFeatureTypes(e,t){var n=getBundleToLoad("feature",arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),i=[],r={};e=[o.FEATURE_TYPES.UNKNOWN].concat(_toConsumableArray(e)),s.a.each(e,(function(e){n[e]&&i.push(n[e]())})),i.length>0?resolveBundlePromises(i,(function(){for(var n=0;n<e.length;n++){var i=arguments[n];i&&i.default&&(r[e[n]]=i.default)}t(r)})):t(r)},getBundleOptions:function getBundleOptions(e){var t={};if(e){var n=e.reactive_views,i=e.reactive_views_in_dev;s.a.isBoolean(n)&&(t.reactiveViews=n),s.a.isBoolean(i)&&(t.reactiveViewsInDev=i)}return t},getExposedExternalBundle:function getExposedExternalBundle(e){if(f[e])return function(){return new l.default((function(t,n){f[e]().then((function(e){return e.default?t(e.default):t(e)})).catch((function(e){n(e)}))}))}}}},function(e,t,n){"use strict";var i=n(5),r=n.n(i),a=n(0),s=n.n(a),o=n(2);t.a=r.a.Model.extend({TYPE:o.FEATURE_TYPES,EVENT:{RE_INIT:"reinit"},FONTSIZE_PREFIX:"lrn_font_size_",FONTSIZE:{SMALL:"small",NORMAL:"normal",LARGE:"large",XLARGE:"xlarge",XXLARGE:"xxlarge"},getFontClass:function getFontClass(){var e="";return s.a.isUndefined(this.activity)||s.a.isUndefined(this.activity.get("fontsize"))||(e=this.FONTSIZE[this.activity.get("fontsize").toUpperCase()]||""),e&&(e=this.FONTSIZE_PREFIX+e),e},getFeatureJsonForClient:function getFeatureJsonForClient(){return s.a.deepClone(this.toJSON())}})},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(0),s=n.n(a),o=n(40),u="[data-lrn-access-review-source]",l="data-lrn-access-review-source";function elementHasClass(e,t){return e.get(0)instanceof SVGElement?function svgElementHasClass(e,t){return o.a.polygonHasClass(e.get(0),t)}(e,t):e.hasClass(t)}function findElement(e,t){return e.get(0).getElementsByClassName?e.find(t):r()(e.get(0).querySelectorAll(".lrn-accessibility-label"))}t.a={getResponseData:function getResponseData(e,t){var n,i,r={responseIndex:void 0,responseText:void 0,responseStatus:void 0},a={VALID:"lrn_valid",CORRECT:"lrn_correct",INCORRECT:"lrn_incorrect",UNATTEMPTED:"lrn_not_attempted"},o="."+s.a.values(a).join(",."),u=findElement(e,".lrn_responseIndex");return u.length&&(r.responseIndex=u.text()),u.remove(),(i=t?t(e):this.getSourceContent(e))&&(r.responseText=i),(n=findElement(e,o)).length||(n=e),elementHasClass(n,a.CORRECT)?r.responseStatus="correct":elementHasClass(n,a.INCORRECT)?r.responseStatus="incorrect":elementHasClass(n,a.UNATTEMPTED)?r.responseStatus="no response given":elementHasClass(n,a.VALID)?r.responseStatus="no response given - missed":r.responseStatus="no response given",r},hasAttr:function hasAttr(e,t){var n=e.attr(t);return void 0!==n&&!1!==n},getSourceElement:function getSourceElement(e){var t,n=[".lrn_draggable"],i=findElement(e,u);if(this.hasAttr(e,l)&&(i=e),!i.length)for(t=0;t<n.length&&!(i=findElement(e,n[t])).length;t++);return i.length?i:e},getSourceContent:function getSourceContent(e){var t="",n=this;return findElement(e,"select").remove(),e.is("input")?this.getInputContent(e):findElement(e,'input:not([type="checkbox"],[type="radio"])').length?(findElement(e,"input").each((function(){t+=n.getInputContent(r()(this))})),t):e.text()},getInputContent:function getInputContent(e){return e.is(":radio")||e.is(":checkbox")?e.prop("checked")?"selected":"":e.val()},setReviewAriaLabel:function setReviewAriaLabel(e){var t=e.$el,n=e.ariaLabel,i=e.keepChildrenVisible,a=e.onLabelClick,o=r()('<span class="lrn-accessibility-label"></span>');t.attr("aria-label")&&t.attr("aria-label-default",t.attr("aria-label")),o.text(n),i||findElement(t,'> *:not([type="checkbox"]):not([type="radio"])').attr("aria-hidden",!0),t.attr("aria-label",n).append(o),s.a.isFunction(a)&&o.on("click",(function(e){e.stopPropagation(),a()}))},unsetReviewAriaLabel:function unsetReviewAriaLabel(e){if(e.length){var t=e.attr("aria-label-default");if(t)e.attr("aria-label",t);else{var n=e.attr("aria-label-static");n?e.attr("aria-label",n):e.removeAttr("aria-label")}var i=e.get(0);i.removeAttribute("aria-label-default"),s.a.each(i.children,(function(e){return e.removeAttribute("aria-hidden")})),findElement(e,".lrn-accessibility-label").remove()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=_interopRequireDefault(n(0)),r=_interopRequireDefault(n(55)),a=_interopRequireDefault(n(56));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function removeBlacklistedAttributes(e){var t=a.default.getElementAttributes(e);t.length&&i.default.each(t,(function(t){(function removeOnEventAttributes(e,t){return!!r.default.blackListedRegex.test(t)&&(e.removeAttribute(t),!0)})(e,t)||function removeBlacklistedAttribute(e,t){i.default.contains(r.default.blackListedAttributes,t)&&e.removeAttribute(t)}(e,t)}))}function sanitizeElement(e){(function removeBlackListedElement(e){return!!i.default.contains(r.default.blackListedTags,e.nodeName.toLowerCase())&&(e.insertAdjacentHTML("afterEnd",e.innerText),a.default.removeElement(e),!0)})(e)||removeBlacklistedAttributes(e)}function convertImagesToText(e){var t;t=e.hasAttribute("alt")&&""!==e.alt?"".concat(r.default.imageWithAltText).concat(e.alt," - "):r.default.imageText,e.insertAdjacentHTML("afterEnd",t)}function processHTML(e,t){return!!e&&(a.default.processElements(e.elements,t),a.default.mergeTempDomContent(e.dom))}var s={sanitizeHTML:function sanitizeHTML(e){var t=processHTML(a.default.getParsableData(e,"*:not(body):not(head):not(html)"),sanitizeElement);return t||e},stripHTML:function stripHTML(e,t){var n=t?i.default.unescape(e):e,r=a.default.getParsableData(n),s=r?a.default.mergeTempDomContent(r.dom,!1):e;return t?i.default.escape(s):s},createImageDescriptions:function createImageDescriptions(e){var t=processHTML(a.default.getParsableData(e,"img"),convertImagesToText);return t||e}};t.default=s},function(e,t,n){"use strict";var i=n(42),r=n.n(i);t.a={check:/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-?[a-f0-9]{12}/,v4:r.a}},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(0),s=n.n(a),o=n(23),u=n(35),l=n(3),c=[[/(?:\$\$)(.*?)(?:\$\$)/g,"span"],[/(?:\\\()(.*?)(?:\\\))/g,"span"],[/(?:\\\[)(.*?)(?:\\\])/g,"div"]],d="lrn_math_static",p="lrn_math_renderer_processed",h='[data-lrn-component="content"]';function MathQuillRenderer(e){this.options={disableItalics:!!e}}function prepareTextNodes(e){var t;return e.each((function(){var e,n,i,a=function getTextNodesIn(e,t){var n=[],i=/\S/;return function containsMathDelimiters(e){var t=e.textContent||e.innerText;return s.a.any(c,(function(e){return t.match(e[0])}))}(e)&&function getTextNodes(e){var r;if(3===e.nodeType)(t||i.test(e.nodeValue))&&n.push(e);else for(r=0;r<e.childNodes.length;r++)getTextNodes(e.childNodes[r])}(e),n}(this);for(i=0;i<a.length;i++)a[i]&&a[i].nodeValue&&(n=replaceText(e=s.a.escape(a[i].nodeValue)))!==e&&(r()(n).insertBefore(a[i]),a[i].parentNode.removeChild(a[i]),t=!0)})),t}function renderPrepared(e,t){var i=e.find("."+d).not("."+p);return new l.default((function(e){n.e(71).then(n.t.bind(null,60,7)).then((function(n){var a=[];i.each((function(){var e=r()(this),i=e.find(h).get(0);a.push(new l.default((function(r){Object(o.a)(e,(function(){var a=n.InertMath(i,t);!function setupHiddenAriaElement(e,t,n){var i=e.parent().parent().attr("aria-label"),r=function placeLabel(t){t=s.a.escape(t),e.prepend('<span class="lrn-spokenmath">'.concat(t,"</span>")).find(h).attr("role","math").children().attr("aria-hidden","true"),n()};i?r(i):u.a.translateOrEmptyString(t,r)}(e,a.latex(),r)})),e.addClass(p)})))})),l.default.all(a).then(e)}))}))}function replaceText(e){var t,n,i=e,r=!1;for(t=0;t<c.length;t++)n=e.replace(c[t][0],(function(e,n){return"<".concat(c[t][1],' class="').concat(d,'">\n                    <').concat(c[t][1],' data-lrn-component="content">\n                        ').concat(n,"\n                    </").concat(c[t][1],">\n                </").concat(c[t][1],">")})),e!==n&&"div"===c[t][2]&&(r=!0),e=n;return i!==e&&(e=r?"<div>"+e+"</div>":"<span>"+e+"</span>"),e}s.a.extend(MathQuillRenderer.prototype,{render:function render(e,t){var n;return e?!0===t?n=r()(e):0===(n=r()(e).hasClass("lrn_widget")?r()(e):r()(e).parents(".lrn_widget")).length&&(n=r()(e).find(".lrn_widget")):n=r()(".lrn").filter((function(){return 0===r()(this).parents(".lrn").length})),n.length&&prepareTextNodes(n)?renderPrepared(n,this.options):new l.default((function(e){e("Nothing to render")}))}}),t.a=MathQuillRenderer},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(5),s=function AccessibilityBaseHelper(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.view=e,this.initialize(e,t)};s.extend=n.n(a).a.View.extend,r.a.extend(s.prototype,{initialize:function initialize(e){this.$el=this.view.$el},apply:function apply(){},restore:function restore(){}}),t.a=s},function(e,t,n){"use strict";var i=n(5),r=n.n(i),a=n(0),s=n.n(a),o=n(1),u=n.n(o),l=n(18),c=n(32),d=n(25),p=n(4),h=n(33),f=n(45),g=n.n(f),m=n(34),v=n.n(m),y=n(23);n(50);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={WIDTH:50,PADDING_LEFT:0,PADDING_RIGHT:0,COLUMN_GAP:2,MAX_WIDTH:70,MIN_WIDTH:30},S=".lrn_widget",E={STIMULUS:'[data-lrn-widget-component="stimulus"]',INTERACTION:'[data-lrn-widget-component="interaction"]'},_=400,w=500,A=document;var T=function(){function WidgetLayout(e,t){var n=this;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WidgetLayout),_defineProperty(this,"_onOverviewSizeChange",s.a.debounce((function(){var e=n.mode,t=n.$elements,i=n.grid,r=t.$wrapper.width()*i.interaction.width/100<_,a=!r&&"stack"===e;r&&"split"===e?n._setLayoutMode("stack"):a&&n._setLayoutMode("split")}),w)),_defineProperty(this,"onRemove",(function(){A.unbindLeave(n.selector),n.resizeSensor.detach(n._onOverviewSizeChange)})),this.view=e,t&&(this.selector='[id="'.concat(e.model.get("response_id"),'"]'),this.widgetLayout=function invalidateWidgetLayout(e){var t=[];return s.a.each(e.elements,(function(e){var n=e.type;s.a.isString(n)&&n.length&&!s.a.findWhere(t,{type:n})&&t.push(e)})),s.a.each(["stimulus","interaction"],(function(e){s.a.findWhere(t,{type:e})||t.push({type:e})})),e.elements=t,e}(s.a.clone(t)),e.render=s.a.wrap(e.render,(function(t){return t.call(e),n.initialized||(n.initialized=!0,n._prepare(),n._canApplyGridLayout()&&n._applyGridLayout()),e})))}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(WidgetLayout,[{key:"getLayoutElements",value:function getLayoutElements(){return this.widgetLayout.elements}},{key:"_prepare",value:function _prepare(){var e=this.view,t=S,n=E,i=e.$el.closest(t),r=i.find(n.STIMULUS),a=i.find(n.INTERACTION);this.$elements={$wrapper:i,$components:{stimulus:r,interaction:a}}}},{key:"_canApplyGridLayout",value:function _canApplyGridLayout(){var e=this.widgetLayout,t=this.$elements.$components,n=t.stimulus,i=t.interaction;return!!(e&&s.a.isArray(e.elements)&&n.length&&i.length)}},{key:"_applyGridLayout",value:function _applyGridLayout(){var e=this,t=this.view,n=this.selector;this.resizeSensor=Object(y.a)(t.el,(function(){return new v.a(t.el,e._onOverviewSizeChange)})),this._generateLayoutGridData(),this._setGrid(),this._setLayoutMode("split"),this._onOverviewSizeChange(),A.leave(n,this.onRemove)}},{key:"_generateLayoutGridData",value:function _generateLayoutGridData(){var e={},t=this.widgetLayout.elements,n=t.length;s.a.each(t,(function(t,i){return e[t.type]=function getElementLayoutData(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=b.WIDTH,i=b.MAX_WIDTH,r=b.MIN_WIDTH,a=b.PADDING_LEFT,o=b.PADDING_RIGHT,u=b.COLUMN_GAP,l=e.width;s.a.isNumber(l)?l<r?l=r:l>i&&(l=i):l=n;var c=e.padding_left;s.a.isNumber(c)||(c=a),c*=l/100;var d=e.padding_right;return s.a.isNumber(d)||(d=t?u:o),{width:l,paddingLeft:c,paddingRight:d*=l/100}}(t,i===n-1)})),this.grid=e}},{key:"_setGrid",value:function _setGrid(){var e=this.$elements,t=this.widgetLayout,n=this.grid,i=e.$components;e.$wrapper.addClass("clearfix"),s.a.each(t.elements,(function(e){var t=e.type,r=i[t],a=n[t],s=a.width,o=a.paddingLeft,u=a.paddingRight;r.css({width:"".concat(s,"%"),paddingLeft:"".concat(o,"%"),paddingRight:"".concat(u,"%"),float:"left"})}))}},{key:"_unsetGrid",value:function _unsetGrid(){var e=this.$elements,t=this.widgetLayout,n=e.$components,i=e.$wrapper;i.removeClass("clearfix"),s.a.each(t.elements,(function(e){var t=e.type;n[t].css({width:"",paddingLeft:"",paddingRight:"",float:""})}))}},{key:"_setLayoutMode",value:function _setLayoutMode(e){this.mode=e,"split"===e?this._setGrid():"stack"===e&&this._unsetGrid()}}]),WidgetLayout}(),x=n(28),R=n(7),C=g.a,M=[{type:"stimulus"},{type:"interaction"}];t.a=r.a.View.extend({lastFeatureComplete:!1,initialize:function initialize(){var e=this.model;if(e){var t=e.get("question").widget_layout;t&&(this.widgetLayout=new T(this,t))}this.mathService=new x.a(this,"question")},getFacade:function getFacade(){var e=this;if(s.a.isUndefined(this.questionFacade)){var t=this.model;if(this.questionFacade={},this.questionFacade.on=r.a.Events.on,this.questionFacade.off=function(e,t){if(!s.a.isString(e)||!s.a.isFunction(t))throw new Error("off method only supported with event and callback parameters");r.a.Events.off.apply(this,arguments)},this.questionFacade.trigger=r.a.Events.trigger,this.questionFacade.once=r.a.Events.once,this.questionFacade.begin=s.a.bind(this.begin,this),this.questionFacade.pause=s.a.bind(this.pause,this),this.questionFacade.stop=s.a.bind(this.stop,this),this.questionFacade.response={getMetadata:s.a.bind((function(){return this.model.getResponseMetadata()}),this),setMetadata:s.a.bind((function(e){return this.model.setResponseMetadata(e)}),this)},this.questionFacade.disable=s.a.bind(this.toggleDisabled,this,!0),this.questionFacade.enable=s.a.bind(this.toggleDisabled,this,!1),this.listenTo(this.model,"change:disabled",s.a.bind((function(e,t){this.setDisabled(t)}),this)),this.questionFacade.getMetadata=s.a.bind((function(){return this.model.getMetadataForClient()}),this),this.questionFacade.getQuestion=s.a.bind((function(){return this.model.getQuestionJsonForClient()}),this),this.questionFacade.getResponse=s.a.bind((function(){return this.model.getResponseJsonForClient()}),this),this.questionFacade.getScore=s.a.bind((function(){return s.a.isFunction(this.model.getScore)?this.model.getScore():null}),this),this.questionFacade.isAttempted=s.a.bind((function(){return this.model.isAttempted()}),this),this.questionFacade.isValid=s.a.bind((function(e){var t;return s.a.isFunction(this.model.canValidateResponse)&&this.model.canValidateResponse()&&this.model.hasResponse()&&(t=e?this.model.getResponseValidDetailed():this.model.isResponseValid()),t}),this),this.questionFacade.validate=s.a.bind((function(e){e=e||{},s.a.isFunction(this.model.callValidate)&&this.model.callValidate(e)}),this),this.questionFacade.mapValidationMetadata=s.a.bind((function(){var e=this.model,t=e.mapValidationMetadata;return t.apply(e,arguments)}),this),this.questionFacade.checkValidation=s.a.bind((function(){var e=this.model,t=e.canValidateResponse;return{has_validation:!!s.a.isFunction(t)&&!!t.apply(e)}}),this),this.questionFacade.masking=s.a.bind(this.masking,this),this.questionFacade.isMaskable=s.a.bind((function(){return this.maskable||!1}),this),this.imageLoader&&this.imageLoader.addFacadeMethods(this.questionFacade),this.simpleFeatureFacades=this.simpleFeatureFacades||{},this.questionFacade.simpleFeatures=function(){return s.a.clone(e.simpleFeatureFacades)},this.questionFacade.simpleFeature=function(t){return e.simpleFeatureFacades[t]},this.questionFacade.resetValidationUI=function(){e.showingValidationUI&&s.a.isFunction(e.clearValidationUI)?e.clearValidationUI():e.showingAnswer&&s.a.isFunction(e.clearCorrectAnswers)&&e.clearCorrectAnswers()},t.get("isDynamicContent")){var n=t.dynamic;this.questionFacade.dynamic={nextAttempt:function nextAttempt(){return e.updateInstance(n.nextAttempt())},previousAttempt:function previousAttempt(){return e.updateInstance(n.previousAttempt())},currentAttemptIndex:function currentAttemptIndex(){return n.currentAttemptIndex()},totalAttempts:function totalAttempts(){return n.totalAttempts()}}}"local_practice"===this.activity.get("type")&&(this.questionFacade.update=function(n){var i=t.get("question").type;if(n.type!==i)return p.a.exception({code:10030,detail:'type: "'.concat(n.type,"\" does not match current question instance's type")});n.response_id=t.get("response_id"),t.setOriginalQuestion(n),e.updateInstance(n)}),this.addFacadeMethods(this.questionFacade),this.model.on(this.model.EVENT.MODIFIED,(function(){this.questionFacade.trigger("change changed")}),this)}return this.questionFacade},addFacadeMethods:function addFacadeMethods(e){},updateInstance:function updateInstance(e){this.setElement(this.$el.closest(".lrn.lrn_widget")),this.displayLogic={},this.addRenderingLogic(),this.render(),this.mathService.renderIfRequired()},renderViewContent:function renderViewContent(e,t){var n,i,r,a=this.model.get("question"),o=this.options.activity.get("state")===this.options.activity.STATE.REVIEW&&this.model.hasStimulusReview(),l=o?this.model.getStimulusReview():this.model.getStimulus(),c=this.model.getInstructorStimulus(),d=!o&&this.model.hasStimulusObject()&&a.stimulus.hasOwnProperty("features")&&s.a.isArray(a.stimulus.features)?a.stimulus.features:[],p=s.a.some(d,(function(e){return e&&("vertical"===e.position||s.a.isUndefined(e.position))})),f=s.a.some(d,(function(e){return e&&"overlay"===e.position})),g=l&&l.length>0||p,m=!(!this.options.activity.get("showInstructorStimulus")||!c.length),v=this.model.getFontClass()||"",y=s.a.isString(e),b=this.widgetLayout;t=s.a.isUndefined(t)?"":t,v+=R.a.isIOS?" lrn-ios":"",this.pendingViews=d.length+1,n=C({responseId:a.response_id,questionType:this.model.get("type"),showStimulus:g,showInstructorStimulus:m,stimulusContent:l,instructorStimulusContent:c,hasVerticalFeatures:p,hasOverlayFeatures:f,extraClasses:t,globalExtraClasses:v,responseContent:y?e:"",widgetLayoutElements:b?b.getLayoutElements():M}),i=this.$el,this.$qrEl=u()(n),r=this.$qrEl.find(".lrn_response_wrapper > .lrn_response"),y||r.append(e),this.imageLoader=new h.a({element:this.$qrEl[0]}),this.imageLoader.loadImages(),this.setElement(r),i.replaceWith(this.$qrEl),!y&&this.onAttach&&this.onAttach(),d.length>0&&this.loadStimulusFeatures(d)},loadStimulusFeatures:function loadStimulusFeatures(e){var t=this,n=s.a.pluck(e,"type");this.featureViews=[],this.activity.loadFeatureBundles(n,(function(i){if(s.a.isEmpty(i))p.a.log("No bundles were loaded for the required Feature types: "+n.join(", "));else{if(s.a.forEach(e,(function(e){var n,r=i[e.type],a=new r.Model(e),o=a.has("position")?a.get("position"):"vertical";n="overlay"===o?u()('<div class="lrn_stimulus_features_overlay" style="visibility: hidden"><div></div></div>').insertAfter(t.$qrEl.find(".lrn_response_wrapper .lrn_response")).children("div")[0]:u()("<div></div>").appendTo(t.$qrEl.find(".lrn_stimulus_features_vertical"))[0];var l=new r.View({model:a,el:n,i18n:t.options.activity.get("i18n"),initialisationCallback:s.a.bind(t.initialisationCompleted,t)});"overlay"===o&&l.getFacade().on("complete",(function(){l.$el.parent().remove(),l.remove(),t.$qrEl.find(".lrn_response_wrapper.lrn_overlaying_features > div:last-child").css({visibility:"inherit"})})),t.featureViews.push(l)})),t.model.hasStimulusObject()){var r=t.model.get("question").stimulus,a=t.featureViews[t.featureViews.length-1].getFacade();r.hasOwnProperty("begin_response_on")?r.hasOwnProperty("begin_response_on")&&"begin"!==r.begin_response_on&&t.options.activity.get("state")!==t.options.activity.STATE.REVIEW&&("last-feature-complete"===r.begin_response_on?a.on("complete",t.beginResponse,t):"last-feature-begin"===r.begin_response_on&&a.on("begin",t.beginResponse,t)):a.on("complete",(function(){this.lastFeatureComplete&&(this.beginResponse(),this.lastFeatureComplete=!1)}),t)}t.$qrEl.find(".lrn_response_wrapper.lrn_overlaying_features > div:last-child").css({visibility:"inherit"})}}))},begin:function begin(){var e=this.model.get("question"),t=this.options.activity.get("state")===this.options.activity.STATE.REVIEW,n=e.begin_response_on&&"begin"===e.begin_response_on;if(this.lastFeatureComplete=!(this.model.hasStimulusObject()&&e.stimulus.hasOwnProperty("begin_response_on")||t),this.featureViews&&this.featureViews.length>0&&!t){var i=this,r=0;s.a.each(this.featureViews,(function(e){e.getFacade().on("complete",(function(){++r<i.featureViews.length&&i.featureViews[r].getFacade().begin()}))})),this.featureViews[r].getFacade().begin(),n&&this.beginResponse()}else this.beginResponse()},pause:function pause(){s.a.each(this.featureViews,(function(e){e.getFacade().pause()})),this.pauseResponse()},stop:function stop(){s.a.each(this.featureViews,(function(e){e.getFacade().stop()})),this.stopResponse()},masking:function masking(){},beginResponse:function beginResponse(){},pauseResponse:function pauseResponse(){},stopResponse:function stopResponse(){},setDisabled:function setDisabled(e){this.setEventsDisabled(e)},setEventsDisabled:function setEventsDisabled(e){e?this.undelegateEvents():this.delegateEvents()},setButtonsDisabled:function setButtonsDisabled(e){this.$(".lrn_btn").each((function(){var t=u()(this),n=t.data("previously-disabled");return!e&&n?t.removeData("previously-disabled"):(n=t.hasClass("lrn_disabled")||t.prop("disabled")||t.attr("disabled"),e&&n?t.data("previously-disabled",!!n):(t.toggleClass("lrn_disabled",e).attr("aria-disabled",e),void("button"===this.type?t.prop("disabled",e):t.attr("disabled",e))))}))},toggleDisabled:function toggleDisabled(e){var t=this.activity.get("state"),n=[this.activity.STATE.INITIAL,this.activity.STATE.RESUME];return!(!s.a.contains(n,t)||this.model.get("disabled")===e)&&(this.model.set("disabled",e),!0)},mathquillRendering:function mathquillRendering(){var e=this.model.get("question")&&this.model.get("question").is_math;return this.model.activity&&this.model.activity.get("math_renderer")?e&&"mathquill"===this.model.activity.get("math_renderer"):e&&"mathquill"===this.model.get("question").math_renderer},renderMathquill:function renderMathquill(){this.mathquillRenderer||(this.mathquillRenderer=new l.a(d.a.isChemistry.call(this))),this.mathquillRenderer.render(this.el)},renderSimpleFeatures:function renderSimpleFeatures(e){return c.a.renderSimpleFeatures.call(this,this.$qrEl,this.activity,e)},initialisationCompleted:function initialisationCompleted(){this.mathquillRendering()&&this.renderMathquill(),this.pendingViews--,0===this.pendingViews&&this.options.initialisationCallback&&s.a.defer(this.options.initialisationCallback)},reset:function reset(){this.getFacade().trigger("reset")}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a={QUESTION_UPDATE_RESPONSE_VALUE:"question:updateResponseValue",QUESTION_TOGGLE_DISABLED:"question:toggleDisabled",QUESTION_RENDER_MATH_IF_REQUIRED:"question:renderMathIfRequired",QUESTION_SET_MASKING_STATE:"question:toggleMaskingMode",QUESTION_TOGGLE_COMPONENT_MASK:"question:toggleComponentMask",QUESTION_NOTIFY_MATH_RENDERED:"question:notifyMathRendered",QUESTION_CACHE_RENDERED_MATH:"question:cacheRenderedMath",QUESTION_LEGACY_BEGIN_RESPONSE:"question:legacy:beginResponse",SET_LEGACY_ATTRIBUTES:"question:legacy:setAttributes"};function legacyBeginResponse(){return{type:a.QUESTION_LEGACY_BEGIN_RESPONSE}}t.a={actionTypes:a,updateResponseValue:function updateResponseValue(e){return function(t,n,i){i.dataService.updateResponseValue(e),t({type:a.QUESTION_UPDATE_RESPONSE_VALUE,payload:{value:e}})}},setDisabled:function setDisabled(e){return{type:a.QUESTION_TOGGLE_DISABLED,payload:{disabled:e}}},setLegacyAttributes:function setLegacyAttributes(e){return{type:a.SET_LEGACY_ATTRIBUTES,payload:{attributes:e}}},setMaskingState:function setMaskingState(e){return function(t,n){var i=n().base,r=i.isReviewState,s=i.isPreviewState;r||s||t({type:a.QUESTION_SET_MASKING_STATE,payload:{inMaskingState:e}})}},toggleComponentMask:function toggleComponentMask(e){return function(t,n,i){t({type:a.QUESTION_TOGGLE_COMPONENT_MASK,payload:{maskId:e}});var s=i.dataService.triggerQuestionFacadeEvent,o=n().base,u=o.responseId,l=o.maskIds;r.a.contains(l,e)&&s("masked",u)}},renderMathIfRequired:function renderMathIfRequired(e){return function(t,n,i){i.mathService.renderIfRequired().then((function(t){t&&e&&r.a.isFunction(e.success)&&e.success()})),t({type:a.QUESTION_RENDER_MATH_IF_REQUIRED})}},notifyMathRendered:function notifyMathRendered(e){return{type:a.QUESTION_NOTIFY_MATH_RENDERED,payload:e}},cacheRenderedMath:function cacheRenderedMath(e){return{type:a.QUESTION_CACHE_RENDERED_MATH,payload:e}},triggerEvent:function triggerEvent(e,t){return function(n,i,r){r.dataService.triggerQuestionFacadeEvent(e,t)}},legacyRenderEmbeddedFeature:function legacyRenderEmbeddedFeature(e){var t=e.el,n=e.feature,i=e.isLastFeature,r=e.removeOnComplete,a=n.type;return function(e,s,o){var u=s().base.i18n,l=o.dataService,c=l.get("legacyFeatures",[]);l.loadFeatureBundles([a],(function(o){var l=o[a],d=l.View,p=new(0,l.Model)(n),h=new d({el:t,model:p,i18n:u});c.push(h),i&&function handleLegacyEvents(e,t,n){var i=t().base,r=i.stimulus,a=i.isReviewState,s=r.legacyEvents,o=n.getFacade(),u=s.begin_response_on;a||("last-feature-begin"===u?o.on("begin",(function(){e(legacyBeginResponse)})):u&&"last-feature-complete"!==u||o.on("complete",(function(){e(legacyBeginResponse)})))}(e,s,h),r&&function removeViewOnComplete(e,t){e.getFacade().on("complete",(function(){var n=e.$el.parent();t.splice(t.indexOf(e),1),e.model.destroy(),e.remove(),n.children().length||n.remove()}))}(h,c)}))}},legacyBeginAllEmbeddedFeatures:function legacyBeginAllEmbeddedFeatures(){return function(e,t,n){var i=n.dataService.get("legacyFeatures");r.a.each(i,(function(e){e.getFacade().begin()}))}}}},function(e,t,n){"use strict";var i={SET_LEGACY_ATTRIBUTES:"validatable:legacy:setAttributes",VALIDATABLE_CHECK_ANSWER:"validatable:checkAnswer",VALIDATABLE_SHOW_SUGGESTED_ANSWERS:"validatable:showSuggestedAnswers",VALIDATABLE_UPDATE_ARIA_LIVE_DATA:"validatable:updateAriaLiveData",VALIDATABLE_CLEAR_VALIDATION_UI:"validatable:clearValidationUI",VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE:"validatable:clearValidationAriaLive",VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT:"validatable:increaseFeedbackAttemptCount"};function updateAriaLiveData(e){return{type:i.VALIDATABLE_UPDATE_ARIA_LIVE_DATA,payload:e}}t.a={actionTypes:i,checkAnswer:function checkAnswer(e){return function(t,n,r){var a=n(),s=a.base,o=a.validatable,u=o.feedbackAttemptsLimit,l=o.feedbackAttemptsCount,c=e.canShowGlobalValidationUI,d=e.canShowCorrectAnswers,p=e.skipAttemptCountLimit;if((e.shouldValidateUnattempedResponse||s.isAttempted)&&(p||0===u||!(l>=u))){var h,f=r.dataService;if(!s.isReviewState)if(f.triggerQuestionFacadeEvent("beforeValidate",{preventDefault:function preventDefault(){return h=!0}}),h)return;var g=f.isResponseValid(),m=f.getValidatedResponses(),v=d?f.getSuggestedResponses():null;t({type:i.VALIDATABLE_CHECK_ANSWER,payload:{canShowGlobalValidationUI:c,validatedResponses:m,isResponseValid:g}});var y=d;t(updateAriaLiveData({message:f.getAriaLiveMessage(y),mappedValidatedResponses:f.getMappedValidatedResponsesData(m),mappedSuggestedResponses:y?f.getMappedSuggestedResponsesData(v&&v.value):null,isShowingCorrectAnswers:y})),t({type:i.VALIDATABLE_SHOW_SUGGESTED_ANSWERS,payload:{suggestedResponses:v,isShowingCorrectAnswers:y}}),!p&&f.hasNewResponse()&&(t({type:i.VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT}),r.dataService.updateFeedbackAttemptsCount(n().validatable.feedbackAttemptsCount))}}},clearValidationUI:function clearValidationUI(){return{type:i.VALIDATABLE_CLEAR_VALIDATION_UI}},clearValidationAriaLive:function clearValidationAriaLive(){return{type:i.VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE}},setLegacyAttributes:function setLegacyAttributes(e){return{type:i.SET_LEGACY_ATTRIBUTES,payload:{attributes:e}}},updateAriaLiveData:updateAriaLiveData}},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=(n(7),[]),s="lrn-hidden-element-shown";function getHiddenObject(e,t){for(var n=0;n<a.length;n++)if(a[n].el===e)return t?n:a[n]}var o=function HiddenElementHelper(e){this.$target=r()(e)};o.prototype.makeVisible=function(){var e=[];if(document.body.id||(document.body.id="lrn-hidden-element-helper"),document.body.classList.add("lrn-hidden-element-helper"),this.$target.each((function(){!function cacheHiddenAncestors(t,n){!t||!n&&t.clientWidth||(n&&t.classList.contains(s)&&n--,e.push(t),cacheHiddenAncestors(t.parentElement,n))}(this,r()(this).parents().addBack().filter("."+s).length)})),this.$hiddenElements=r()(e),this.$hiddenElements.length){var t=this;this.$hiddenElements.each((function(){!function addHiddenObject(e,t){var n=getHiddenObject(e);n?n.instances.push(t):(e.classList.add(s),a.push({el:e,instances:[t]}))}(this,t)}))}},o.prototype.restore=function(){var e=this;this.$hiddenElements.each((function(){!function restoreHiddenObject(e,t){var n,i=getHiddenObject(e);i&&(1===i.instances.length?(e.classList.remove(s),n=getHiddenObject(e,!0),a.splice(n,1)):(n=i.instances.indexOf(t))>-1&&i.instances.splice(n,1))}(this,e)})),"lrn-hidden-element-helper"!==document.body.id||a.length||(document.body.id=""),document.body.classList.remove("lrn-hidden-element-helper")},t.a=function makeVisibleAndDispatch(e,t){var n,i=!!t.length,r=new o(e);function restore(){r.restore()}return r.makeVisible(),i?n=t(restore):(n=t(),restore()),n}},function(e,t,n){"use strict";var i=n(0),r=n.n(i);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="";function mergingReducer(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments.length>1?arguments[1]:void 0,s=a.type,o=a.payload;if("UPDATE_ALL"===s)return o.data[n];var u=e[s];if(u){var l=u(i,o);return r.a.extend({},i,l)}return i}return mergingReducer.setName=function(e){return n=e},mergingReducer}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(1),s=n.n(a),o=n(36),u={KEEP_KEYBOARD_OPEN:"lrn-math-keep-keyboard-open",FORCE_KEYBOARD_CLOSE:"lrn-math-force-keyboard-close"};function onItemBlurred(e,t,n){r.a.defer((function(){var i=document.activeElement||document.createElement("div"),r=n&&s.a.contains(n,i);!i.classList.contains(u.FORCE_KEYBOARD_CLOSE)&&(i.classList.contains(u.KEEP_KEYBOARD_OPEN)||s.a.contains(t,i)||r)||e.trigger(e.EVENT.EDITOR_BLURRED)}))}t.a={addFacadeMethods:function addFacadeMethods(e){var t=this.model&&this.model.get("response"),n=this.keyboardView;function convertToInk(e){return{handwriting:r.a.object(r.a.keys(e),r.a.map(e,o.a.format))}}n&&n.hasHandwriting()?e.getHandwriting=function(){return convertToInk(n.getHandwriting())}:t&&t.handwriting&&(e.getHandwriting=function(){return convertToInk(t.handwriting)})},handleBlurEvents:function handleBlurEvents(e){var t=this.editorView.mathEvents,n=this.keyboardView;this.listenTo(t,t.EVENT.ITEM_BLURRED,(function(){onItemBlurred(t,e,n&&n.el)}))},isChemistry:function isChemistry(){return this.model.get("type").toLowerCase().indexOf("chemistry")>-1},onAttach:function onAttach(){this.editorView&&this.editorView.onAttach(),this.keyboardView&&this.keyboardView.onAttach()},onItemBlurred:onItemBlurred,setDisabled:function setDisabled(e,t){r.a.each(e,(function(e){e.mathEvents.trigger(e.mathEvents.EVENT.CHANGE_DISABLED_STATE,t)}))},usesLazyKeyboard:function usesLazyKeyboard(e){return!!e.get("beta_flags").lazy_load_formula_keyboard},addAriaLabelToValidationUi:function addAriaLabelToValidationUi(){if(this.model.getValidResponse()&&this.model.getValidResponse().value){var e=function getAriaLabelsFromValidResponse(e){var t=r.a.pluck(r.a.flatten(e.value),"aria_label");return r()(t).map((function(e,t){return"Correct Answer "+(t+1)+": "+(e||"screenreader friendly version of equation not available")+"."})).join(" ")}(this.model.getValidResponse());this.$(".lrn_correctAnswers").attr("aria-label",e)}}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a={WIDTH:50,PADDING_LEFT:0,PADDING_RIGHT:0,COLUMN_GAP:2,MAX_WIDTH:70,MIN_WIDTH:30};function getElementLayoutData(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.type,i=a.WIDTH,s=a.MAX_WIDTH,o=a.MIN_WIDTH,u=a.PADDING_LEFT,l=a.PADDING_RIGHT,c=a.COLUMN_GAP,d=e.width;r.a.isNumber(d)?d<o?d=o:d>s&&(d=s):d=i;var p=e.padding_left;r.a.isNumber(p)||(p=u),p*=d/100;var h=e.padding_right;return r.a.isNumber(h)||(h=t?c:l),{type:n,width:d,paddingLeft:p,paddingRight:h*=d/100}}var s=function(){function BaseDataService(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseDataService),this.model=e,this.questionFacade=t,this.initialise()}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(BaseDataService,[{key:"initialise",value:function initialise(){this.activity=this.model.activity,this.question=this.model.get("question"),this.data={},this.attributes={}}},{key:"prepare",value:function prepare(e){e(this)}},{key:"getInitialState",value:function getInitialState(){this.initialise();var e=this.activity,t=this.question,n=this.isReviewState;return{base:{isResumeState:this.isResumeState,isReviewState:n,isPreviewState:this.isPreviewState,isLocalPractice:e.get("type")===e.TYPE.LOCAL_PRACTICE,responseId:t.response_id,modelId:this.model.id,questionType:t.type,i18n:e.get("i18n"),state:e.get("state"),readOnly:this.readOnly,isMath:this.isMath,cacheRenderedMath:null,stimulus:this.stimulus,stimulusReview:this.stimulusReview,stimulusInstructor:this.stimulusInstructor,widgetLayout:this.widgetLayout,fontSizeClass:this.fontClass,disabled:!1,isAttempted:n||this.isAttempted,extraClassNames:this.extraClassNames}}}},{key:"getFacade",value:function getFacade(){var e=this;return this._facade||(this._facade={},this.EXPOSED_METHODS.forEach((function(t){e._facade[t]=e[t].bind(e)}))),this._facade}},{key:"get",value:function get(e,t){return this.attributes[e]||r.a.isUndefined(t)||this.set(e,t),this.attributes[e]}},{key:"set",value:function set(e,t){var n=this.attributes;r.a.isObject(e)?r.a.each(e,(function(e,t){n[t]=e})):r.a.isString(e)&&(this.attributes[e]=t)}},{key:"loadFeatureBundles",value:function loadFeatureBundles(e,t){return this.activity.loadFeatureBundles(e,t)}},{key:"updateResponseValue",value:function updateResponseValue(e){return this.model.updateResponseValue(e)}},{key:"getResponse",value:function getResponse(){return this.model.get("response")}},{key:"canValidateResponse",value:function canValidateResponse(){return this.model.canValidateResponse()}},{key:"validateResponse",value:function validateResponse(){return this.model.validateResponse()}},{key:"isResponseValid",value:function isResponseValid(){return this.model.isResponseValid()}},{key:"hasNewResponse",value:function hasNewResponse(){var e=this.getResponse();if(!e)return!1;var t=!r.a.isEqual(e.value,this.get("prevResponseValue"));return this.set("prevResponseValue",r.a.deepClone(e.value)),t}},{key:"triggerQuestionFacadeEvent",value:function triggerQuestionFacadeEvent(){var e;(e=this.questionFacade).trigger.apply(e,arguments)}},{key:"isReviewState",get:function get(){var e=this.data,t=this.activity;return r.a.isUndefined(e.isReviewState)&&(e.isReviewState=t.get("state")===t.STATE.REVIEW),e.isReviewState}},{key:"isResumeState",get:function get(){var e=this.data,t=this.activity;return r.a.isUndefined(e.isResumeState)&&(e.isResumeState=t.get("state")===t.STATE.RESUME),e.isResumeState}},{key:"isPreviewState",get:function get(){var e=this.data,t=this.activity;return r.a.isUndefined(e.isPreviewState)&&(e.isPreviewState=t.get("state")===t.STATE.PREVIEW),e.isPreviewState}},{key:"isMath",get:function get(){return!!this.question.is_math}},{key:"isAttempted",get:function get(){return this.model.hasResponse()}},{key:"stimulus",get:function get(){var e=this.data;if(r.a.isUndefined(e.stimulus)){var t=this.question.stimulus;if(r.a.isObject(t))e.stimulus=function legacyGetStimulusObject(e){var t,n=e.features,i=r.a.last(n),a=e.content,s=r.a.filter(n,(function(e){return"overlay"===e.position})),o=r.a.filter(n,(function(e){return"vertical"===e.position||r.a.isUndefined(e.position)})),u=(t={},r.a.each(e,(function(e,n){"content"!==n&&"features"!==n&&(t[n]=e)})),t);return i&&(i._last=!0),{visible:!0,content:a,legacyVerticalFeatures:o,legacyOverlayFeatures:s,legacyEvents:u}}(t);else{var n,i=!1;r.a.isString(t)&&(i=!0,n=t),e.stimulus={visible:i,content:n}}}return e.stimulus}},{key:"stimulusReview",get:function get(){var e=this.data;if(r.a.isUndefined(e.stimulusReview)){var t,n=this.question,i=!1;r.a.isString(n.stimulus_review)?(i=!0,t=n.stimulus_review):r.a.isString(n.description)&&(i=!0,t=n.description),e.stimulusReview={visible:i,content:t}}return e.stimulusReview}},{key:"stimulusInstructor",get:function get(){var e=this.data;if(r.a.isUndefined(e.stimulusInstructor)){var t,n,i=this.activity,a=this.question.instructor_stimulus;r.a.isString(a)&&(t=!(!i.get("showInstructorStimulus")||!a.length),n=a),e.stimulusInstructor={visible:t,content:n}}return e.stimulusInstructor}},{key:"fontsize",get:function get(){var e=this.activity.get("fontsize"),t=r.a.getNested(this.question,"ui_style.fontsize");return r.a.isUndefined(e)?t||void 0:e}},{key:"fontClass",get:function get(){var e=this.data;if(r.a.isUndefined(e.fontClass)){var t,n=this.model,i=this.fontsize;i&&(t=n.FONTSIZE[i.toUpperCase()]),t=t?n.FONTSIZE_PREFIX+t:"",e.fontClass=t}return e.fontClass}},{key:"readOnly",get:function get(){if(r.a.isUndefined(this.data.readOnly)){var e=this.activity,t=e.get("state");this.data.readOnly=t===e.STATE.REVIEW||t===e.STATE.PREVIEW}return this.data.readOnly}},{key:"widgetLayout",get:function get(){var e=this.data;if(r.a.isUndefined(e.widgetLayout)){var t=this.question.widget_layout,n=!!(t&&r.a.isArray(t.elements)&&this.stimulus.visible),i={enabled:n};n&&(i.elements=function getProcessedWidgetLayoutElements(e){var t=[];return r.a.each(e,(function(e){var n=e.type;r.a.isString(n)&&n.length&&!r.a.findWhere(t,{type:n})&&t.push(e)})),r.a.each(["stimulus","interaction"],(function(e){r.a.findWhere(t,{type:e})||t.push(getElementLayoutData({type:e}))})),r.a.map(t,(function(e,n){return getElementLayoutData(e,n===t.length-1)}))}(t.elements)),e.widgetLayout=i}return e.widgetLayout}},{key:"extraClassNames",get:function get(){return{}}}]),BaseDataService}();s.prototype.EXPOSED_METHODS=["get","set","loadFeatureBundles","updateResponseValue","getResponse","hasNewResponse","canValidateResponse","triggerQuestionFacadeEvent","isResponseValid","validateResponse"],t.a=s},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=["association","choicematrix","classification","clozeassociation","clozedropdown","clozeformula","formulaV2","imageclozedropdown","imageclozeassociationV2","mcq"],s=function isWhiteListed(e){return r.a.contains(a,e)};t.a={getFormattedQuestion:function getFormattedQuestion(e,t){if(e){var n=r.a.deepClone(e),i=n.dynamic;if(!r.a.isEmpty(i)&&s(n.type)){var a=i.rows,o=i.cols,u=!r.a.isString(t)||r.a.isEmpty(t)?a[0]:r.a.findWhere(a,{id:t});if(u){var l=u.values,c=function(){var e={};return r.a.each(o,(function(t,n){e[t]=l[n]})),e}(),d=JSON.stringify(n).replace(/{{var:([a-z0-9 _]+)}}/gi,(function(e,t){var n=c[t];return r.a.isString(n)?JSON.stringify(n).slice(1,-1):e}));try{n=JSON.parse(d)}catch(e){}}}return n}},isWhiteListed:s}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(18),s=n(25),o=n(11);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=function(){function MathService(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MathService),this.type=t,this.view=e,this.model=e.model}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(MathService,[{key:"getWidgetData",value:function getWidgetData(){var e=this.type;return"question"===e?this.model.get(e):this.model.attributes}},{key:"isMath",value:function isMath(){return!!r.a.getNested(this.getWidgetData(),"is_math")}},{key:"renderIfRequired",value:function renderIfRequired(e){var t=this;return this.isMath()?new Promise((function(n){t.mathquillRendering()?(t.renderMathquill(e),n(!0)):o.a&&(o.a.once(o.a.EVENT.RENDERED,(function(){return n(!0)})),o.a.render())})):Promise.resolve(!1)}},{key:"mathquillRendering",value:function mathquillRendering(){var e=this.model;if(this.isMath()){var t=e.activity.get("math_renderer");return t?"mathquill"===t:"mathquill"===this.getWidgetData().math_renderer}}},{key:"renderMathquill",value:function renderMathquill(e){var t=this,n=function(){var n=e||t.view.el,i=document.body;return i.contains(n)?n:i}();return this.mathquillRenderer||(this.mathquillRenderer=new a.a(s.a.isChemistry.call(this))),this.mathquillRenderer.render(n)}}]),MathService}();t.a=u},function(module,exports,__webpack_require__){var require,require,f;f=function(){var define,module,exports;return function r(e,t,n){function o(a,s){if(!t[a]){if(!e[a]){if(!s&&"function"==typeof require&&require)return require(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[a]={exports:{}};e[a][0].call(l.exports,(function(t){return o(e[a][1][t]||t)}),l,l.exports,r,e,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Assert=n.checkCounter=n.setCounter=n.clearLocation=n.setLocation=n.reserveCodeRange=n.message=n.assert=void 0;var i=e("./backward.js"),r=n.assert=function(e,t,n){if(void 0===t&&(t="failed!"),!e){var i=new Error(t);throw i.location=n||d.location,i}},a=n.message=function message(e,t){var n=d.messages[e];return d.location,t&&(0,i.forEach)(t,(function(e,t){n=n.replace("%"+(t+1),e)})),e+": "+n},s=n.reserveCodeRange=function reserveCodeRange(e,t,n){r(e<=t,"Invalid code range");var a=(0,i.every)(d.reservedCodes,(function(n){return t<n.first||e>n.last}));r(a,"Conflicting request for error code range"),d.reservedCodes.push({first:e,last:t,name:n})},o=n.setLocation=function setLocation(e){d.location=e},u=n.clearLocation=function clearLocation(){d.location=null},l=n.setCounter=function setCounter(e,t){d.count=e,d.countMessage=t||"ERROR count exceeded"},c=n.checkCounter=function checkCounter(){var e=d.count;"number"!=typeof e||isNaN(e)?r(!1,"ERROR counter not set"):r(d.count--,d.countMessage)},d=n.Assert={assert:r,message:a,messages:{},reserveCodeRange:s,reservedCodes:[],setLocation:o,clearLocation:u,setCounter:l,checkCounter:c}},{"./backward.js":3}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Ast=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./backward.js"),a=e("./assert.js");n.Ast=function(){function Ast(){this.nodePool=["unused"],this.nodeMap={}}function isNode(e){return void 0===e&&(e=this),e.op&&e.args}return Ast.prototype.create=function create(e,t){var n=create(this);if("string"==typeof e)n.op=e,n.args=t instanceof Array?t:[];else if(null!==e&&"object"===(void 0===e?"undefined":i(e))){var a=e;(0,r.forEach)(keys(a),(function(e,t){n[e]=a[e]}))}return n},Ast.prototype.arg=function arg(e){if(!isNode(this))throw"Malformed node";return this.args.push(e),this},Ast.prototype.argN=function argN(e,t){if(!isNode(this))throw"Malformed node";return void 0===t?this.args[e]:(this.args[e]=t,this)},Ast.prototype.args=function args(e){if(!isNode(this))throw"Malformed node";return void 0===e?this.args:(this.args=e,this)},Ast.prototype.isNode=isNode,Ast.prototype.intern=function intern(e){this instanceof Ast&&void 0===e&&isNode(this)&&(e=this),(0,a.assert)("object"===(void 0===e?"undefined":i(e)),"node not an object");for(var t=e.op,n=e.args.length,r="",s=[],o=0;o<n;o++)r+=" ","string"==typeof e.args[o]?r+=s[o]=e.args[o]:r+=s[o]=this.intern(e.args[o]);e.lbrk&&e.lbrk!=="{".charCodeAt(0)&&(r+=String.fromCharCode(e.lbrk),r+=String.fromCharCode(e.rbrk));var u=t+n+r,l=this.nodeMap[u];return void 0===l&&(this.nodePool.push({op:t,args:s}),l=this.nodePool.length-1,this.nodeMap[u]=l),l},Ast.prototype.node=function node(e){for(var t=JSON.parse(JSON.stringify(this.nodePool[e])),n=0;n<t.args.length;n++)"string"!=typeof t.args[n]&&(t.args[n]=this.node(t.args[n]));return t},Ast.prototype.dumpAll=function dumpAll(){var e="";return(0,r.forEach)(this.nodePool,(function(t,n){e+="\n"+n+": "+Ast.dump(t)})),e},Ast.dump=Ast.prototype.dump=function dump(e){if("string"==typeof e);else if("number"==typeof e);else{e.op;for(var t=0;t<e.args.length;t++)dump(e.args[t])}return s},Ast}()},{"./assert.js":1,"./backward.js":3}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString),forEach=exports.forEach=function forEach(e,t){var n=arguments[2];if(Array.prototype.indexOf)return e.forEach(t);var i=toObject(e),r=splitString&&"[object String]"==_toString(i)?i.split(""):i,a=-1,s=r.length>>>0;if("[object Function]"!=_toString(t))throw new TypeError;for(;++a<s;)a in r&&t.call(n,r[a],a,i)},filter=exports.filter=function filter(e,t){var n=arguments[2];if(Array.prototype.filter)return e.filter(t);var i,r=toObject(e),a=splitString&&"[object String]"==_toString(e)?e.split(""):r,s=a.length>>>0,o=[];if("[object Function]"!=_toString(t))throw new TypeError(t+" is not a function");for(var u=0;u<s;u++)u in a&&(i=a[u],t.call(n,i,u,r)&&o.push(i));return o},every=exports.every=function every(e,t){var n=arguments[2];if(Array.prototype.every)return e.every(t,n);var i=toObject(e),r=splitString&&"[object String]"==_toString(e)?e.split(""):i,a=r.length>>>0;if("[object Function]"!=_toString(t))throw new TypeError(t+" is not a function");for(var s=0;s<a;s++)if(s in r&&!t.call(n,r[s],s,i))return!1;return!0},some=exports.some=function some(e,t){var n=arguments[2];if(Array.prototype.some)return e.some(t,n);var i=toObject(e),r=splitString&&"[object String]"==_toString(e)?e.split(""):i,a=r.length>>>0;if("[object Function]"!=_toString(t))throw new TypeError(t+" is not a function");for(var s=0;s<a;s++)if(s in r&&t.call(n,r[s],s,i))return!0;return!1},indexOf=exports.indexOf=function indexOf(e,t){var n=arguments[2];if(Array.prototype.indexOf||"string"==typeof e)return e.indexOf(t,n);var i=splitString&&"[object String]"==_toString(e)?e.split(""):toObject(e),r=i.length>>>0;if(!r)return-1;var a=0;for(arguments.length>2&&(a=toInteger(n)),a=a>=0?a:Math.max(0,r+a);a<r;a++)if(a in i&&i[a]===t)return a;return-1},keys=exports.keys=function keys(e){if(Object.keys)return Object.keys(e);var t=!0,n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;for(var r in{toString:null})t=!1;if("object"!=(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var a in e)owns(e,a)&&keys.push(a);if(t)for(var s=0,o=i;s<o;s++){var u=n[s];owns(e,u)&&keys.push(u)}return keys},toObject=exports.toObject=function toObject(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)},prototypeOfObject=Object.prototype,_toString=function _toString(e){return prototypeOfObject.toString.apply(e)},owns=function owns(e,t){return prototypeOfObject.hasOwnProperty.call(e,t)},create=exports.create=function create(e){if(Object.create)return Object.create(e);var t=function F(){};if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return t.prototype=e,new t},toString,isArray,escMap,escFunc,escRE;"undefined"==typeof window||window.JSON||(window.JSON={parse:function parse(sJSON){return eval("("+sJSON+")")},stringify:(toString=Object.prototype.toString,isArray=Array.isArray||function(e){return"[object Array]"===toString.call(e)},escMap={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},escFunc=function escFunc(e){return escMap[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},escRE=/[\\"\u0000-\u001F\u2028\u2029]/g,function stringify(e){if(null==e)return"null";if("number"==typeof e)return isFinite(e)?e.toString():"null";if("boolean"==typeof e)return e.toString();if("object"===(void 0===e?"undefined":_typeof(e))){if("function"==typeof e.toJSON)return stringify(e.toJSON());if(isArray(e)){for(var t="[",n=0;n<e.length;n++)t+=(n?", ":"")+stringify(e[n]);return t+"]"}if("[object Object]"===toString.call(e)){var i=[];for(var r in e)e.hasOwnProperty(r)&&i.push(stringify(r)+": "+stringify(e[r]));return"{"+i.join(", ")+"}"}}return'"'+e.toString().replace(escRE,escFunc)+'"'})})},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Core=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(e("./version.js"),e("./backward.js")),a=e("./assert.js"),s=e("./ast.js"),o=e("./model.js"),u=e("./rules.js");!function(e){function newNode(e,t){return{op:e,args:t}}function binaryNode(e,t,n){if(t.length<2)return t[0];var i=[];return(0,r.forEach)(t,(function(t){n&&t.op===e?i=i.concat(t.args):i.push(t)})),newNode(e,i)}function Visitor(e){function visit(e,t,n){switch((0,a.assert)(e.op&&e.args,"Visitor.visit() op="+e.op+" args = "+e.args),e.op){case o.Model.NUM:e=t.numeric(e,n);break;case o.Model.ADD:case o.Model.SUB:case o.Model.PM:case o.Model.BACKSLASH:case o.Model.DIV:case o.Model.FRAC:case o.Model.LOG:case o.Model.COLON:case o.Model.FUNC:case o.Model.TYPE:e=1===e.args.length?t.unary(e,n):t.binary(e,n);break;case o.Model.MUL:case o.Model.TIMES:case o.Model.COEFF:e=t.multiplicative(e,n);break;case o.Model.POW:e=t.exponential(e,n);break;case o.Model.VAR:e=t.variable(e,n);break;case o.Model.SQRT:case o.Model.SIN:case o.Model.COS:case o.Model.TAN:case o.Model.SEC:case o.Model.CSC:case o.Model.COT:case o.Model.ARCSIN:case o.Model.ARCCOS:case o.Model.ARCTAN:case o.Model.ARCSEC:case o.Model.ARCCSC:case o.Model.ARCCOT:case o.Model.PERCENT:case o.Model.M:case o.Model.ABS:case o.Model.FACT:case o.Model.FORALL:case o.Model.EXISTS:case o.Model.IN:case o.Model.SUM:case o.Model.LIM:case o.Model.EXP:case o.Model.TO:case o.Model.DERIV:case o.Model.INT:case o.Model.PROD:case o.Model.CUP:case o.Model.BIGCUP:case o.Model.CAP:case o.Model.BIGCAP:case o.Model.PIPE:case o.Model.ION:case o.Model.POW:case o.Model.SUBSCRIPT:case o.Model.OVERLINE:case o.Model.OVERSET:case o.Model.UNDERSET:case o.Model.MATHBF:case o.Model.NONE:case o.Model.DEGREE:case o.Model.DOT:case o.Model.MATHFIELD:case o.Model.SET:case o.Model.NOT:e=t.unary(e,n);break;case o.Model.COMMA:case o.Model.MATRIX:case o.Model.VEC:case o.Model.ROW:case o.Model.COL:case o.Model.LIST:e=t.comma(e,n);break;case o.Model.EQL:case o.Model.LT:case o.Model.LE:case o.Model.GT:case o.Model.GE:case o.Model.NE:case o.Model.NGTR:case o.Model.NLESS:case o.Model.NI:case o.Model.SUBSETEQ:case o.Model.SUPSETEQ:case o.Model.SUBSET:case o.Model.SUPSET:case o.Model.NNI:case o.Model.NSUBSETEQ:case o.Model.NSUPSETEQ:case o.Model.NSUBSET:case o.Model.NSUPSET:case o.Model.APPROX:case o.Model.IMPLIES:case o.Model.PERP:case o.Model.PROPTO:case o.Model.PARALLEL:case o.Model.NPARALLEL:case o.Model.SIM:case o.Model.CONG:case o.Model.NSIM:case o.Model.NCONG:case o.Model.CAPRIGHTARROW:case o.Model.RIGHTARROW:case o.Model.LEFTARROW:case o.Model.LONGRIGHTARROW:case o.Model.LONGLEFTARROW:case o.Model.OVERRIGHTARROW:case o.Model.OVERLEFTARROW:case o.Model.CAPLEFTRIGHTARROW:case o.Model.LEFTRIGHTARROW:case o.Model.LONGLEFTRIGHTARROW:case o.Model.OVERLEFTRIGHTARROW:e=t.equals(e,n);break;case o.Model.PAREN:case o.Model.INTERVAL:e=t.paren(e);break;default:"normalizeLiteral"!==t.name&&"sort"!==t.name&&(e=newNode(o.Model.VAR,["INTERNAL ERROR Should not get here. Unhandled node operator "+e.op]))}return e}function lookup(e){if(!e)return"";var t=o.Model.option("words"),n=void 0;return t&&(n=t[e]),n||"\\"===(n=e).charAt(0)&&(n=n.substring(1)),n}function normalizeFormatObject(e){var t=[];switch(e.op){case o.Model.VAR:t.push({code:e.args[0]});break;case o.Model.MUL:var n="",i=void 0;(0,r.forEach)(e.args,(function(e){e.op===o.Model.VAR?n+=e.args[0]:e.op===o.Model.NUM&&(i=+e.args[0])})),t.push({code:n,length:i});break;case o.Model.COMMA:(0,r.forEach)(e.args,(function(e){t=t.concat(normalizeFormatObject(e))}))}return t}function checkMatrixType(e,t){return normalizeFormatObject(e).some((function(e){var n=e.code;switch(e.length,n){case"simpleSmallRowMatrix":case"smallRowMatrix":return t.op===o.Model.MATRIX&&1===t.m&&t.n<4;case"simpleSmallColumnMatrix":case"smallColumnMatrix":return t.op===o.Model.MATRIX&&t.m<4&&1===t.n;case"simpleSmallMatrix":case"smallMatrix":return t.op===o.Model.MATRIX&&t.m<4&&t.n<4;case"matrix":return t.op===o.Model.MATRIX;case"row":return t.op===o.Model.ROW;case"column":return t.op===o.Model.COL;default:return!1}}))}function hasSimpleExpressions(e){return(0,a.assert)(e.op===o.Model.MATRIX||e.op===o.Model.ROW||e.op===o.Model.COL),(0,r.every)(e.args,(function(e){return e.op===o.Model.MATRIX||e.op===o.Model.ROW||e.op===o.Model.COL?hasSimpleExpressions(e):function isSimpleExpression(e){return e.op===o.Model.NUM||e.op===o.Model.VAR||"string"==typeof e}(e)}))}function matchType(e,t){var n=o.Model.option("types");if(e.op===o.Model.TYPE&&e.args[0].op===o.Model.VAR){var i=e.args[0].args[0];switch(i){case"number":case"integer":case"decimal":case"scientific":case"fraction":case"simpleFraction":case"mixedFraction":case"fractionOrDecimal":return function checkNumberType(e,t){return normalizeFormatObject(e).some((function(e){var n=e.code,i=e.length;switch(n){case"integer":if("integer"===t.numberFormat&&(void 0===i||i===t.args[0].length))return!0;break;case"decimal":if("decimal"===t.numberFormat&&t.isRepeating)return void 0===i;if("decimal"===t.numberFormat&&(void 0===i||0===i&&-1===(0,r.indexOf)(t.args[0],".")||i===t.args[0].substring((0,r.indexOf)(t.args[0],".")+1).length))return!0;break;case"number":if("decimal"===t.numberFormat&&t.isRepeating)return void 0===i;if("integer"===t.numberFormat||"decimal"===t.numberFormat){var s=(0,r.indexOf)(t.args[0],".");if(void 0===i||0===i&&-1===s||s>=0&&i===t.args[0].substring(s+1).length)return!0}break;case"scientific":if(t.isScientific){var o=t.args[0].args[0];if(void 0===i||0===i&&-1===(0,r.indexOf)(o,".")||i===o.substring((0,r.indexOf)(o,".")+1).length)return!0}break;case"fraction":if(t.isFraction||t.isMixedFraction)return!0;break;case"simpleFraction":case"nonMixedFraction":if(t.isFraction)return!0;break;case"mixedFraction":if(t.isMixedFraction)return!0;break;case"fractionOrDecimal":if(t.isFraction||t.isMixedFraction||"decimal"===t.numberFormat)return!0;break;default:(0,a.assert)(!1,(0,a.message)(2015,[n]))}}))}(e.args[0],t);case"variable":return t.op===o.Model.VAR;case"simpleSmallRowMatrix":case"simpleSmallColumnMatrix":case"simpleSmallMatrix":return checkMatrixType(e.args[0],t)&&hasSimpleExpressions(t);case"smallRowMatrix":case"smallColumnMatrix":case"smallMatrix":case"matrix":case"row":case"column":return checkMatrixType(e.args[0],t);default:var s=n[i];if(s)return(0,a.assert)(s instanceof Array),s.some((function(e){return match([normalizeLiteral(o.Model.create(e))],t).length>0}))}return!1}if(e.op===o.Model.COLON&&e.args[0].op===o.Model.VAR&&"?"===e.args[0].args[0]){switch((0,a.assert)(e.args[1].op===o.Model.VAR),e.args[1].args[0]){case"N":return t.op===o.Model.NUM;case"V":return t.op===o.Model.VAR}return!1}return e.op===o.Model.VAR&&"?"===e.args[0]||e.op===o.Model.MATRIX&&t.op===o.Model.MATRIX}function match(t,n){return 0!==t.size&&void 0!==n&&t.filter((function(t){if(void 0===t.op||void 0===n.op)return!1;if(e.intern(t)===e.intern(n)||matchType(t,n))return!0;if(t.op===n.op){if(t.args.length===n.args.length)return t.args.every((function(e,i){return t.op===o.Model.VAR?e===n.args[i]:1===match([e],n.args[i]).length}));if(t.args.length<n.args.length){var i=n.args.slice(1);if(2===t.args.length)return match([t.args[0]],n.args[0]).length>0&&match([t.args[1]],newNode(n.op,i)).length>0}}return!1}))}function expand(e,t,n){n=n||{};var i=e.str;if(i&&t){var s=i.split("%").length-1;if(i.indexOf("%%")>=0&&(i=i.replace("%%",t[0].args[0])),i.indexOf("%*")>=0){var u="";(0,r.forEach)(t,(function(e){""!==u&&(u+=" "),u+=i.replace("%*",e.args[0]).replace("%M",e.m).replace("%N",e.n)})),i=u}return i.indexOf("%IP")>=0&&(i=i.replace("%IP",n.ip)),i.indexOf("%FP0")>=0&&(i=i.replace("%FP0",n.fp)),i.indexOf("%FP")>=0&&(i=i.replace("%FP",n.fp.split("").join(" "))),i.indexOf("%M")>=0&&((0,a.assert)(n.m),i=i.replace("%M",n.m)),i.indexOf("%N")>=0&&((0,a.assert)(n.n),i=i.replace("%N",n.n)),2===s&&t.length>2?i=function expandBinary(e,t){var n=e;return(0,r.forEach)(t,(function(t,n){e=e.replace("%"+(n+1),t.args[0])})),t.length>2?expandBinary(n,[newNode(o.Model.VAR,[e])].concat(t.slice(2))):e}(i,t):(0,r.forEach)(t,(function(e,t){i=i.replace("%"+(t+1),e.args[0])})),{op:o.Model.VAR,args:[i]}}return(0,a.assert)(1===t.length&&function isEmpty(e){return e.op===o.Model.VAR&&1===e.args.length&&""===e.args[0]}(t[0])),t[0]}function normalizeLiteral(n){return n&&n.args?(e.intern(n),visit(n,{name:"normalizeLiteral",numeric:function numeric(e){return e},binary:function binary(e){var t=[];return(0,r.forEach)(e.args,(function(e){t.push(normalizeLiteral(e))})),e.args=t,e},multiplicative:function multiplicative(e){var t=[];(0,r.forEach)(e.args,(function(e){(e.isPolynomial||e.isImplicit)&&t.length>0?t.push(binaryNode(o.Model.MUL,[t.pop(),normalizeLiteral(e)],!0)):t.push(normalizeLiteral(e))}));var n=binaryNode(e.op===o.Model.MUL?o.Model.TIMES:e.op,t,!0);return n.isScientific=e.isScientific,n.isMixedFraction=e.isMixedFraction,n.isBinomial=e.isBinomial,n},unary:function unary(e){var t=[];return(0,r.forEach)(e.args,(function(e){t.push(normalizeLiteral(e))})),newNode(e.op,t)},exponential:function exponential(e){var t=[];return(0,r.forEach)(e.args,(function(e){t.push(normalizeLiteral(e))})),e.args=t,e},variable:function variable(e){return e},comma:function comma(e){var t=[];return(0,r.forEach)(e.args,(function(e){t.push(normalizeLiteral(e))})),e.args=t,e},paren:function paren(e){var t=[];return(0,r.forEach)(e.args,(function(e){t.push(normalizeLiteral(e))})),e.args=t,e},equals:function equals(e){var n=[];if((0,r.forEach)(e.args,(function(e){n.push(normalizeLiteral(e))})),!t("ignoreOrder")||e.op!==o.Model.GT&&e.op!==o.Model.GE)e.args=n;else{(0,a.assert)(2===n.length,"Internal error: comparisons have only two operands");var i=n[0];n[0]=n[1],n[1]=i,e.op=e.op===o.Model.GT?o.Model.LT:o.Model.LE,e.args=n}return e}})):((0,a.assert)(!1,"Should not get here. Illformed node."),0)}function matchedTemplate(e,t,n){var i=[];t.forEach((function(t){i=i.concat(e[JSON.stringify(t)])}));var r=[];return i.forEach((function(e){(!e.context||o.Model.option("NoParens")&&e.context.indexOf("NoParens")>-1||o.Model.option("EndRoot")&&e.context.indexOf("EndRoot")>-1)&&n>=function paramCount(e){(0,a.assert)("string"==typeof e.str);var t=e.str.split("%").filter((function(e){return!isNaN(+e[0])}));return 0===t.length?0:+t.sort()[t.length-1][0]}(e)&&r.push(e)})),0===r.length&&r.push({str:""}),r[0]}function getNodeArgsForTemplate(e,t){return(0,a.assert)("string"==typeof t.str),t.str.indexOf("%%")>=0?[e]:e.args}this.normalizeLiteral=normalizeLiteral,this.translate=function translate(e,t){var n;t instanceof Array&&(t=1===t.length?t[0]:function mergeMaps(e,t){var n={};return e&&Object.keys(e).forEach((function(t){n[t]=e[t]})),Object.keys(t).forEach((function(e){n[e]||(n[e]=t[e])})),n}(t[1],t[0])),n=t;var i=Object.keys(t),s=[];return i.forEach((function(e){s.push(JSON.parse(e))})),e&&e.args?visit(e,{name:"translate",numeric:function numeric(e){var n=[{op:o.Model.VAR,args:[lookup(e.args[0])]}],i={};if("decimal"===e.numberFormat){var r=e.args[0].split(".");(0,a.assert)(2===r.length),i.ip=r[0],i.fp=r[1]}var u=match(s,e);return 0===u.length?e:expand(matchedTemplate(t,u,1),n,i)},binary:function binary(e){var i=match(s,e);if(0===i.length)return e;var a=matchedTemplate(t,i,e.args.length),o=getRulesForArgs(a),u=getNodeArgsForTemplate(e,a),l=[];return(0,r.forEach)(u,(function(e,t){l=l.concat(translate(e,[n,o]))})),expand(a,l)},multiplicative:function multiplicative(e){var i=match(s,e);if(0===i.length)return e;var a=matchedTemplate(t,i,e.args.length),o=getRulesForArgs(a),u=getNodeArgsForTemplate(e,a),l=[];return(0,r.forEach)(u,(function(e,t){l=l.concat(translate(e,[n,o]))})),expand(a,l)},unary:function unary(e){var i=match(s,e);if(0===i.length)return e;var a=matchedTemplate(t,i,e.args.length),o=getRulesForArgs(a),u=getNodeArgsForTemplate(e,a),l=[];return(0,r.forEach)(u,(function(e,t){l=l.concat(translate(e,[n,o]))})),expand(a,l)},exponential:function exponential(e){var i=match(s,e);if(0===i.length)return e;var a=matchedTemplate(t,i,e.args.length),o=getRulesForArgs(a),u=getNodeArgsForTemplate(e,a),l=[];return(0,r.forEach)(u,(function(e,t){l=l.concat(translate(e,[n,o]))})),expand(a,l)},variable:function variable(e){var i=match(s,e);if(0===i.length)return e;var a=matchedTemplate(t,i,e.args.length),u=getRulesForArgs(a),l=getNodeArgsForTemplate(e,a),c=[];return c.push(newNode(o.Model.VAR,[lookup(l.shift())])),(0,r.forEach)(l,(function(e,t){c=c.concat(translate(e,[n,u]))})),expand(a,c)},comma:function comma(e){if(e.op===o.Model.MATRIX||e.op===o.Model.ROW||e.op===o.Model.COL){var i={};e.op===o.Model.MATRIX?((0,a.assert)(e.args[0].op===o.Model.ROW),(0,a.assert)(e.args[0].args[0].op===o.Model.COL),e.m=i.m=e.args[0].args.length,e.n=i.n=e.args[0].args[0].args.length,(0,r.forEach)(e.args,(function(e,t){e.m=t+1}))):e.op===o.Model.ROW?(0,r.forEach)(e.args,(function(e,t){e.m=t+1,e.n=void 0})):(0,r.forEach)(e.args,(function(t,n){t.m=e.m,t.n=n+1}));var u=match(s,e);if(0===u.length)return e;var l=matchedTemplate(t,u,e.args.length),c=[],d=getRulesForArgs(l),p=getNodeArgsForTemplate(e,l);return(0,r.forEach)(p,(function(e,t){(c=c.concat(translate(e,[n,d])))[t].m=e.m,c[t].n=e.n})),expand(l,c,i)}var h=match(s,e);if(0===h.length)return e;var f=matchedTemplate(t,h,e.args.length),g=getRulesForArgs(f),m=getNodeArgsForTemplate(e,f),v=[];return(0,r.forEach)(m,(function(e,t){v=v.concat(translate(e,[n,g]))})),expand(f,v)},equals:function equals(e){var i=match(s,e);if(0===i.length)return e;var a=matchedTemplate(t,i,e.args.length),o=getRulesForArgs(a),u=getNodeArgsForTemplate(e,a),l=[];return(0,r.forEach)(u,(function(e,t){l=l.concat(translate(e,[n,o]))})),expand(a,l,e)},paren:function paren(e){var i=match(s,e);if(0===i.length)return e;if(i.length>1){var a=i;0===(i=i.filter((function(t){return t.lbrk===e.lbrk&&t.rbrk===e.rbrk}))).length&&(i=a)}var o=matchedTemplate(t,i,1),u=getRulesForArgs(o),l=getNodeArgsForTemplate(e,o),c=[];return(0,r.forEach)(l,(function(e){c.push(translate(e,[n,u]))})),expand(o,c)}}):((0,a.assert)(!1,"Should not get here. Illformed node."),0)}}function normalizeLiteral(t){var n=new Visitor(e),i=a.Assert.location;t.location&&a.Assert.setLocation(t.location);var r=n.normalizeLiteral(t);return a.Assert.setLocation(i),r}function getRulesForArgs(e,t){return e.rules}function compileRules(e){var t=Object.keys(e),n={};return t.forEach((function(t){var i=JSON.stringify(normalizeLiteral(o.Model.create(t))),r=function compileTemplate(e){var t=void 0;if(e instanceof Array)t=[],e.forEach((function(e){t=t.concat(compileTemplate(e))}));else if("string"==typeof e)t=[{str:e}];else{var n="",i=void 0,r=void 0;e.options?(n+=e.options.EndRoot?" EndRoot":"",n+=e.options.NoParens?" NoParens":"",i=e.value):(i=Object.keys(e)[0],(0,a.assert)("options"!==i),r=compileRules(e[i])),t=[{context:n,str:i,rules:r}]}return t}(e[t]);n[i]||(n[i]=r)})),n}a.Assert.messages,o.Model.fn.translate=function(t){var n=o.Model.option("rules"),i=function translate(t,n){var i=new Visitor(e),r=compileRules(n);return i.translate(t,r)}(normalizeLiteral(t),n);return i&&i.op===o.Model.VAR||(i=newNode(o.Model.VAR,[""])),function trim(e){for(var t=0,n="";t<e.length;t++)switch(e.charAt(t)){case" ":case"\t":case"\n":if(0===n.length||" "===n.charAt(n.length-1))continue;n+=" ";break;default:n+=e.charAt(t)}for(;" "===n.charAt(n.length-1);)n=n.substring(0,n.length-1);for(;-1!==n.lastIndexOf("baseline")&&n.lastIndexOf(" baseline")===n.length-" baseline".length;)n=n.substring(0,n.length-" baseline".length);return n}(i.args[0])};var t=o.Model.option=function option(e,t){var n=o.Model.options,i=n&&n[e];if(void 0!==t&&(o.Model.options=n=n||{},n[e]=t),void 0===i)switch(e){case"field":i="integer";break;case"decimalPlaces":i=10;break;case"setThousandsSeparator":case"setDecimalSeparator":case"dontExpandPowers":case"dontFactorDenominators":case"dontFactorTerms":case"dontConvertDecimalToFraction":case"strict":i=void 0;break;case"types":i={};break;default:i=!1}return i}}(new s.Ast);var l=n.Core=function(){a.Assert.reserveCodeRange(3e3,3999,"core");var e=a.Assert.messages,t=a.Assert.message,n=a.Assert.assert;e[3001]="No Math Core spec provided.",e[3002]="No Math Core solution provided.",e[3003]="No Math Core spec value provided.",e[3004]="Invalid Math Core spec method '%1'.",e[3005]="Operation taking too long.",e[3006]="Invalid option name '%1'.",e[3007]="Invalid option value '%2' for option '%1'.",e[3008]="Internal error: %1";var l=1e3,c=Math.pow(10,-2),d=Math.pow(10,-3),p=Math.pow(10,-6),h=Math.pow(10,-9),f={g:{type:"unit",value:1,base:"g"},s:{type:"unit",value:1,base:"s"},m:{type:"unit",value:1,base:"m"},L:{type:"unit",value:1,base:"L"},kg:{type:"unit",value:l,base:"g"},km:{type:"unit",value:l,base:"m"},ks:{type:"unit",value:l,base:"s"},kL:{type:"unit",value:l,base:"L"},cg:{type:"unit",value:c,base:"g"},cm:{type:"unit",value:c,base:"m"},cs:{type:"unit",value:c,base:"s"},cL:{type:"unit",value:c,base:"L"},mg:{type:"unit",value:d,base:"g"},mm:{type:"unit",value:d,base:"m"},ms:{type:"unit",value:d,base:"s"},mL:{type:"unit",value:d,base:"L"},"\\mug":{type:"unit",value:p,base:"g"},"\\mus":{type:"unit",value:p,base:"s"},"\\mum":{type:"unit",value:p,base:"m"},"\\muL":{type:"unit",value:p,base:"L"},ng:{type:"unit",value:h,base:"g"},nm:{type:"unit",value:h,base:"m"},ns:{type:"unit",value:h,base:"s"},nL:{type:"unit",value:h,base:"L"},in:{type:"unit",value:1/12,base:"ft"},ft:{type:"unit",value:1,base:"ft"},yd:{type:"unit",value:3,base:"ft"},mi:{type:"unit",value:5280,base:"ft"},fl:{type:"unit",value:1,base:"fl"},cup:{type:"unit",value:8,base:"fl"},pt:{type:"unit",value:16,base:"fl"},qt:{type:"unit",value:32,base:"fl"},gal:{type:"unit",value:128,base:"fl"},oz:{type:"unit",value:1/16,base:"lb"},lb:{type:"unit",value:1,base:"lb"},st:{type:"unit",value:1/1614,base:"lb"},qtr:{type:"unit",value:28,base:"lb"},cwt:{type:"unit",value:112,base:"lb"},t:{type:"unit",value:2240,base:"lb"},$:{type:"unit",value:1,base:"$"},i:{type:"unit",value:null,base:"i"},min:{type:"unit",value:60,base:"s"},hr:{type:"unit",value:3600,base:"s"},day:{type:"unit",value:86400,base:"s"},"\\radian":{type:"unit",value:1,base:"radian"},"'":{type:"unit",value:1,base:"prime"},"''":{type:"unit",value:1,base:"doubleprime"},"'''":{type:"unit",value:1,base:"tripleprime"},"\\degree":{type:"unit",value:Math.PI/180,base:"radian"},"\\degree K":{type:"unit",value:1,base:"\\degree K"},"\\degree C":{type:"unit",value:1,base:"\\degree C"},"\\degree F":{type:"unit",value:1,base:"\\degree F"},R:{name:"reals"},matrix:{},pmatrix:{},bmatrix:{},Bmatrix:{},vmatrix:{},Vmatrix:{},array:{},"\\alpha":{type:"var"},"\\beta":{type:"var"},"\\gamma":{type:"var"},"\\delta":{type:"var"},"\\epsilon":{type:"var"},"\\zeta":{type:"var"},"\\eta":{type:"var"},"\\theta":{type:"var"},"\\iota":{type:"var"},"\\kappa":{type:"var"},"\\lambda":{type:"var"},"\\mu":{type:"const",value:p},"\\nu":{type:"var"},"\\xi":{type:"var"},"\\pi":{type:"const",value:Math.PI},"\\rho":{type:"var"},"\\sigma":{type:"var"},"\\tau":{type:"var"},"\\upsilon":{type:"var"},"\\phi":{type:"var"},"\\chi":{type:"var"},"\\psi":{type:"var"},"\\omega":{type:"var"},"\\sin":{type:"var"},"\\cos":{type:"var"},"\\tan":{type:"var"},"\\sec":{type:"var"},"\\csc":{type:"var"},"\\cot":{type:"var"},"\\arcsin":{type:"var"},"\\arccos":{type:"var"},"\\arctan":{type:"var"},"\\arcsec":{type:"var"},"\\arccsc":{type:"var"},"\\arccot":{type:"var"},"\\sinh":{type:"var"},"\\cosh":{type:"var"},"\\tanh":{type:"var"},"\\sech":{type:"var"},"\\csch":{type:"var"},"\\coth":{type:"var"},"\\log":{type:"var"},"\\ln":{type:"var"},"\\lg":{type:"var"}};function validateOptions(e){e&&(0,r.forEach)((0,r.keys)(e),(function(r){!function validateOption(e,r){switch(e){case"field":switch(r){case void 0:case"integer":case"real":case"complex":break;default:n(!1,t(3007,[e,r]))}break;case"decimalPlaces":if(void 0===r||+r>=0&&+r<=20)break;n(!1,t(3007,[e,r]));break;case"NoParens":case"EndRoot":case"allowDecimal":case"allowInterval":case"dontExpandPowers":case"dontFactorDenominators":case"dontFactorTerms":case"dontConvertDecimalToFraction":case"dontSimplifyImaginary":case"ignoreOrder":case"inverseResult":case"requireThousandsSeparator":case"ignoreText":case"ignoreTrailingZeros":case"allowThousandsSeparator":case"compareSides":case"ignoreCoefficientOne":case"strict":if(void 0===r||"boolean"==typeof r)break;n(!1,t(3007,[e,r]));break;case"setThousandsSeparator":if(void 0===r||"string"==typeof r&&1===r.length||r instanceof Array)break;n(!1,t(3007,[e,r]));break;case"setDecimalSeparator":if(void 0===r||"string"==typeof r&&1===r.length||r instanceof Array&&r.length>0&&1===r[0].length)break;n(!1,t(3007,[e,JSON.stringify(r)]));break;case"words":case"rules":case"types":if(void 0===r||"object"===(void 0===r?"undefined":i(r)))break;n(!1,t(3007,[e,r]));break;default:n(!1,t(3006,[e]))}}(r,e[r])}))}return{translate:function translate(e,i,s){e||(e={}),e.rules||(e.words=u.rules.words,e.rules=u.rules.rules,e.types=u.rules.types),function makeEvaluator(e,i){var s=void 0,u=e.method,l=e.value,c=o.Model.options=e.options,d=void 0;try{a.Assert.setLocation("spec"),validateOptions(c),o.Model.pushEnv(f),s=null!=l?o.Model.create(l,"spec"):void 0,o.Model.popEnv()}catch(e){d=e}return{evaluate:function evaluate(e,i){try{if(d)throw d;a.Assert.setLocation("user"),n(null!=e,t(3002)),o.Model.pushEnv(f);var r=o.Model.create(e,"user");n(r,t(3008,["invalid input"])),a.Assert.setLocation("spec");var s=void 0;switch(u){case"translate":s=r.translate();break;default:n(!1,t(3004,[u]))}o.Model.popEnv(),i(null,s)}catch(e){var l=e.message;i({result:null,errorCode:parseErrorCode(l),message:parseMessage(l),stack:e.stack,location:e.location,model:null,toString:function toString(){return this.errorCode+": ("+this.location+") "+this.message+"\n"+this.stack}},"")}},model:s};function parseErrorCode(e){var t=+e.slice(0,(0,r.indexOf)(e,":"));return isNaN(t)?0:t}function parseMessage(e){return parseErrorCode(e)?e.slice((0,r.indexOf)(e,":")+2):e}}({method:"translate",options:e}).evaluate(i,s)},Model:o.Model,Ast:s.Ast}}();"undefined"!=typeof window&&(window.Core=l)},{"./assert.js":1,"./ast.js":2,"./backward.js":3,"./model.js":5,"./rules.js":6,"./version.js":7}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Model=void 0;var i=e("./backward.js"),r=e("./assert.js"),a=e("./ast.js");n.Model=function(){function Model(){}Model.fn={},Model.env=t={};var e=[],t={};function isChemCore(){return!!Model.env.Au}Model.pushEnv=function pushEnv(n){e.push(t),Model.env=t=n},Model.popEnv=function popEnv(){(0,r.assert)(e.length>0,"Empty envStack"),Model.env=t=e.pop()};var n=Model.prototype=new a.Ast;r.Assert.reserveCodeRange(1e3,1999,"model"),r.Assert.messages[1e3]="Internal error. %1.",r.Assert.messages[1001]="Invalid syntax. '%1' expected, '%2' found.",r.Assert.messages[1002]="Only one decimal separator can be specified.",r.Assert.messages[1003]="Extra characters in input at position: %1, lexeme: %2.",r.Assert.messages[1004]="Invalid character '%1' (%2) in input.",r.Assert.messages[1005]="Misplaced thousands separator.",r.Assert.messages[1006]="Invalid syntax. Expression expected, %1 found.",r.Assert.messages[1007]="Unexpected character: '%1' in '%2'.",r.Assert.messages[1008]="The same character '%1' is being used as a thousands and decimal separators.",r.Assert.messages[1009]="Missing argument for '%1' command.",r.Assert.messages[1010]="Expecting an operator between numbers.";var s=r.Assert.message;Model.create=n.create=function create(e,t){if((0,r.assert)(null!=e,"Model.create() called with invalid argument "+e),e instanceof Model)return t&&(e.location=t),e;var a=void 0;if(e instanceof Array)return a=[],(0,i.forEach)(e,(function(e){a.push(create(e,t))})),a;if(!(this instanceof Model))return(new Model).create(e,t);if((a=create(this)).location=t,"string"==typeof e){var s=at(e,Model.env);e=s.expr()}else e=JSON.parse(JSON.stringify(e));return(0,i.forEach)((0,i.keys)(Model.fn),(function(e,t){n.hasOwnProperty(e)||(n[e]=function(){var t=Model.fn[e];if(arguments.length>1&&arguments[1]instanceof Model)return t.apply(this,arguments);for(var n=[this],i=0;i<arguments.length;i++)n.push(arguments[i]);return t.apply(this,n)})})),(0,i.forEach)((0,i.keys)(e),(function(t,n){a[t]=e[t]})),a},n.toLaTex=function toLaTex(e){return render(e)};var o={ADD:"+",SUB:"-",MUL:"mul",TIMES:"times",COEFF:"coeff",DIV:"div",FRAC:"frac",EQL:"=",ATAN2:"atan2",SQRT:"sqrt",VEC:"vec",PM:"pm",NOT:"not",VAR:"var",NUM:"num",CST:"cst",COMMA:",",POW:"^",SUBSCRIPT:"_",ABS:"abs",PAREN:"()",HIGHLIGHT:"hi",LT:"lt",LE:"le",GT:"gt",GE:"ge",NE:"ne",NGTR:"ngtr",NLESS:"nless",NI:"ni",SUBSETEQ:"subseteq",SUPSETEQ:"supseteq",SUBSET:"subset",SUPSET:"supset",NNI:"nni",NSUBSETEQ:"nsubseteq",NSUPSETEQ:"nsupseteq",NSUBSET:"nsubset",NSUPSET:"nsupset",APPROX:"approx",IMPLIES:"implies",CAPRIGHTARROW:"caprightarrow",RIGHTARROW:"rightarrow",LEFTARROW:"leftarrrow",LONGRIGHTARROW:"longrightarrow",LONGLEFTARROW:"longleftarrow",OVERRIGHTARROW:"overrightarrow",OVERLEFTARROW:"overleftarrow",CAPLEFTRIGHTARROW:"capleftrightarrow",LEFTRIGHTARROW:"leftrightarrow",LONGLEFTRIGHTARROW:"longleftrightarrow",OVERLEFTRIGHTARROW:"overleftrightarrow",PERP:"perp",PROPTO:"propto",PARALLEL:"parallel",NPARALLEL:"nparallel",SIM:"sim",CONG:"cong",NSIM:"nsim",NCONG:"ncong",INTERVAL:"interval",LIST:"list",SET:"set",EXISTS:"exists",IN:"in",FORALL:"forall",LIM:"lim",EXP:"exp",TO:"to",SUM:"sum",DERIV:"deriv",PIPE:"pipe",INT:"int",PROD:"prod",CUP:"cup",BIGCUP:"bigcup",CAP:"cap",BIGCAP:"bigcap",PERCENT:"%",QMARK:"?",M:"M",FACT:"fact",BINOM:"binom",ROW:"row",COL:"col",COLON:"colon",MATRIX:"matrix",TYPE:"type",OVERSET:"overset",UNDERSET:"underset",OVERLINE:"overline",DEGREE:"degree",BACKSLASH:"backslash",MATHBF:"mathbf",DOT:"dot",MATHFIELD:"mathfield",NONE:"none"};(0,i.forEach)((0,i.keys)(o),(function(e,t){Model[e]=o[e]}));var u={};function isInvisibleCharCode(e){return function isControlCharCode(e){return e>=1&&e<=31||e>=127&&e<=159}(e)}function isAlphaCharCode(e){return e>=65&&e<=90||e>=97&&e<=122||39===e}function isNumberCharCode(e){return e>=48&&e<=57}u[o.ADD]="+",u[o.SUB]="-",u[o.MUL]="\\times",u[o.DIV]="\\div",u[o.FRAC]="\\frac",u[o.EQL]="=",u[o.ATAN2]="\\atan2",u[o.POW]="^",u[o.SUBSCRIPT]="_",u[o.PM]="\\pm",u[o.NOT]="\\not",u[o.COMMA]=",",u[o.M]="\\M",u[o.BINOM]="\\binom",u[o.COLON]="\\colon",Model.fold=function fold(e,t){var n=[],r=void 0;switch((0,i.forEach)(e.args,(function(e){n.push(fold(e,t))})),e.args=n,e.op){case o.VAR:(r=t[e.args[0]])&&(e=r)}return e};var l=32,c=33,d=36,p=37,h=44,f=58,g=59,m=65,v=97,y=123,b=125,S=0,E=43,_=94,w=95,A=256,T=47,x=61,R=y,C=124,M=91,I=40,O=42,N=48,k=258,P=b,L=93,D=41,F=257,q=45,V=v,U=h,j=269,B=270,H=271,Q=272,z=273,G=274,W=275,$=276,Y=277,J=278,X=279,K=280,Z=281,ee=282,te=p,ne=63,ie=283,re=284,ae=c,se=285,oe=286,ue=287,le=288,ce=289,de=f,pe=290,he=294,fe=295,ge=296,me=297,ve=298,ye=299,be=300,Se=301,Ee=302,_e=303,we=304,Ae=308,Te=309,xe=310,Re=311,Ce=312,Me=313,Ie=314,Oe=315,Ne=316,ke=317,Pe=318,Le=319,De=320,Fe=321,qe=322,Ve=323,Ue=324,je=325,Be=326,He=327,Qe=328,ze=329,Ge=330,We=331,$e=332,Ye=333,Je=334,Xe=335,Ke=336,Ze=337,et=338,tt=339,nt=S,it=S,rt={};rt[T]=o.FRAC,rt[A]=o.FRAC,rt[F]=o.SQRT,rt[pe]=o.VEC,rt[E]=o.ADD,rt[q]=o.SUB,rt[k]=o.PM,rt[qe]=o.NOT,rt[_]=o.POW,rt[w]=o.SUBSCRIPT,rt[O]=o.MUL,rt[we]=o.DOT,rt[he]=o.DIV,rt[x]=o.EQL,rt[U]=o.COMMA,rt[j]=o.TEXT,rt[B]=o.LT,rt[H]=o.LE,rt[Q]=o.GT,rt[z]=o.GE,rt[Se]=o.NE,rt[Oe]=o.NGTR,rt[Ne]=o.NLESS,rt[ke]=o.NI,rt[Pe]=o.SUBSETEQ,rt[Le]=o.SUPSETEQ,rt[De]=o.SUBSET,rt[Fe]=o.SUPSET,rt[Ee]=o.APPROX,rt[Me]=o.PERP,rt[Ie]=o.PROPTO,rt[Ve]=o.PARALLEL,rt[Ue]=o.NPARALLEL,rt[je]=o.SIM,rt[Be]=o.CONG,rt[et]=o.NSIM,rt[tt]=o.NCONG,rt[G]=o.EXISTS,rt[W]=o.IN,rt[$]=o.FORALL,rt[Y]=o.LIM,rt[J]=o.EXP,rt[X]=o.TO,rt[C]=o.PIPE,rt[K]=o.SUM,rt[Z]=o.INT,rt[ee]=o.PROD,rt[Te]=o.CUP,rt[xe]=o.BIGCUP,rt[Re]=o.CAP,rt[Ce]=o.BIGCAP,rt[ie]=o.M,rt[Je]=o.IMPLIES,rt[Ze]=o.CAPRIGHTARROW,rt[re]=o.RIGHTARROW,rt[He]=o.LEFTARROW,rt[Qe]=o.LONGRIGHTARROW,rt[ze]=o.LONGLEFTARROW,rt[Ge]=o.OVERRIGHTARROW,rt[We]=o.OVERLEFTARROW,rt[Xe]=o.LEFTRIGHTARROW,rt[Ke]=o.CAPLEFTRIGHTARROW,rt[$e]=o.LONGLEFTRIGHTARROW,rt[Ye]=o.OVERLEFTRIGHTARROW,rt[ae]=o.FACT,rt[se]=o.BINOM,rt[oe]=o.ROW,rt[ue]=o.COL,rt[de]=o.COLON,rt[fe]=o.TYPE,rt[ge]=o.OVERLINE,rt[me]=o.OVERSET,rt[ve]=o.UNDERSET,rt[ye]=o.BACKSLASH,rt[be]=o.MATHBF,rt[we]=o.DOT,rt[Ae]=o.MATHFIELD;var at=function parse(e,t){function newNode(e,t){return{op:e,args:t}}function matchThousandsSeparator(e,t){if(Model.option("allowThousandsSeparator")||Model.option("setThousandsSeparator")){var n=Model.option("setThousandsSeparator");return n?e===t||!t&&(0,i.indexOf)(n,e)>=0?e:"":","===e?e:""}return""}function matchDecimalSeparator(e){var t=Model.option("setDecimalSeparator"),n=Model.option("setThousandsSeparator");if("string"==typeof t){(0,r.assert)(1===t.length,s(1002));var a=t;return n instanceof Array&&(0,i.indexOf)(n,a)>=0&&(0,r.assert)(!1,s(1008,[a])),e===a}return t instanceof Array?((0,i.forEach)(t,(function(e){n instanceof Array&&(0,i.indexOf)(n,e)>=0&&(0,r.assert)(!1,s(1008,[e]))})),(0,i.indexOf)(t,e)>=0):n instanceof Array&&(0,i.indexOf)(n,".")>=0?((0,r.assert)(!1,s(1008)),!1):"."===e}function numberNode(e,t,n){var i=Model.option("ignoreTrailingZeros"),a=e.toString(),o="",u=void 0,l=void 0,c=void 0,d=void 0,p=0,h="integer",f=void 0,g=void 0;for("."===e&&(0,r.assert)(!1,s(1004,[e,e.charCodeAt(0)])),u=0;u<a.length;u++)matchThousandsSeparator(l=a.charAt(u))?((p&&c!==u-4||!p&&u>4)&&(0,r.assert)(!1,s(1005)),c=u,p++):(matchDecimalSeparator(l)?("decimal"===h&&(0,r.assert)(!1,s(1007,[l,o+l])),l=".",h="decimal",p&&c!==u-4&&(0,r.assert)(!1,s(1005)),"0"===o&&(f=!0),d=o.length,c=u,p++):"decimal"===h&&"0"!==l&&(d=o.length),o+=l);return"decimal"!==h&&c&&c!==u-4&&(0,r.assert)(!1,s(1005)),void 0!==d&&(d+1<o.length&&(g=!0),i&&"."===(o=o.substring(0,d+1))&&(o="0")),{op:Model.NUM,args:[String(o)],hasThousandsSeparator:0!==p,numberFormat:h,hasLeadingZero:f,hasTrailingZero:g}}function multiplyNode(e,t){return 0===e.length&&(e=[n]),binaryNode(Model.MUL,e,t)}function unaryNode(e,t){return(0,r.assert)(1===t.length,"Wrong number of arguments for unary node"),newNode(e,t)}function binaryNode(e,t,n){if((0,r.assert)(t.length>0,"1000: Too few argument for binary node"),t.length<2)return t[0];var a=[];return(0,i.forEach)(t,(function(t){n&&t.op===e?a=a.concat(t.args):a.push(t)})),newNode(e,a)}e=function stripInvisible(e){for(var t,n,i="",r=0;r<e.length;){for(;r<e.length&&isInvisibleCharCode(t=e.charCodeAt(r++));)32!==n&&(n=t=9);92===t?(i+=String.fromCharCode(t),t=e.charCodeAt(r++)):9===t&&isNumberCharCode(i.charCodeAt(i.length-1))&&isNumberCharCode(e.charCodeAt(r))&&(t=e.charCodeAt(r++)),i+=String.fromCharCode(t)}return i}(e);var n=numberNode("1"),a=unaryNode(Model.SUB,[numberNode("1")]),u=newNode(Model.NONE,[numberNode("0")]),at=newNode(Model.VAR,[""]),st=function scanner(e){var n=0,a="",o={"\\cdot":we,"\\times":O,"\\div":he,"\\dfrac":A,"\\frac":A,"\\sqrt":F,"\\vec":pe,"\\pm":k,"\\not":qe,"\\left":null,"\\right":null,"\\big":null,"\\Big":null,"\\bigg":null,"\\Bigg":null,"\\ ":null,"\\quad":null,"\\qquad":null,"\\text":j,"\\textrm":j,"\\textit":j,"\\textbf":j,"\\lt":B,"\\le":H,"\\gt":Q,"\\ge":z,"\\ne":Se,"\\neq":Se,"\\ngtr":Oe,"\\nless":Ne,"\\ni":ke,"\\subseteq":Pe,"\\supseteq":Le,"\\subset":De,"\\supset":Fe,"\\approx":Ee,"\\implies":Je,"\\Rightarrow":Ze,"\\rightarrow":re,"\\leftarrow":He,"\\longrightarrow":Qe,"\\longleftarrow":ze,"\\overrightarrow":Ge,"\\overleftarrow":We,"\\Leftrightarrow":Ke,"\\leftrightarrow":Xe,"\\longleftrightarrow":$e,"\\overleftrightarrow":Ye,"\\perp":Me,"\\propto":Ie,"\\parallel":Ve,"\\nparallel":Ue,"\\sim":je,"\\cong":Be,"\\nsim":et,"\\ncong":tt,"\\exists":G,"\\in":W,"\\forall":$,"\\lim":Y,"\\exp":J,"\\to":X,"\\sum":K,"\\int":Z,"\\prod":ee,"\\cup":Te,"\\bigcup":xe,"\\cap":Re,"\\bigcap":Ce,"\\%":te,"\\binom":se,"\\begin":le,"\\end":ce,"\\colon":de,"\\vert":C,"\\lvert":C,"\\rvert":C,"\\mid":C,"\\type":fe,"\\overline":ge,"\\overset":me,"\\underset":ve,"\\backslash":ye,"\\mathbf":be,"\\abs":_e,"\\dot":we,"\\MathQuillMathField":Ae,"\\ldots":V,"\\vdots":V,"\\ddots":V},u=(0,i.keys)(t),m=void 0;function number(t){for(;isNumberCharCode(t)||matchDecimalSeparator(String.fromCharCode(t))||(m=matchThousandsSeparator(String.fromCharCode(t),m))&&isNumberCharCode(e.charCodeAt(n));)a+=String.fromCharCode(t),92===(t=e.charCodeAt(n++))&&32===e.charCodeAt(n)&&(t=32,n++);return"."!==a||0!==(0,i.indexOf)(e.substring(n),"overline")&&0!==(0,i.indexOf)(e.substring(n),"dot")||(a="0."),n--,N}function variable(t){var r=String.fromCharCode(t);a+=r;for(var s=function _loop(){var e=String.fromCharCode(t),n=a+e;if(!(0,i.some)(u,(function(e){return 0===(0,i.indexOf)(e,n)})))return"break";a+=e};isAlphaCharCode(t=e.charCodeAt(n++))&&"break"!==s(););return n--,V}function latex(){var t=void 0;if((t=e.charCodeAt(n++))===d)a=String.fromCharCode(t);else if(t===p)a+=String.fromCharCode(t);else if((0,i.indexOf)([l,f,g,h,c],t)>=0)a="\\ ";else{for(;isAlphaCharCode(t);)a+=String.fromCharCode(t),t=e.charCodeAt(n++);n--}var r=o[a];if(void 0===r)r=V;else if(r===j||r===fe){for(t=e.charCodeAt(n++);t&&t!==y;)t=e.charCodeAt(n++);for(a="",t=e.charCodeAt(n++);t&&t!==b;){var s=String.fromCharCode(t);a+=s,t=e.charCodeAt(n++)}r!==fe&&(r=!a||Model.option("ignoreText")?null:V)}return r}function prime(t){for((0,r.assert)(39===t),a="'";39===e.charCodeAt(n);)n++,a+="'";return V}return{start:function start(t){t||(t={});var o=void 0;for(a="";n<e.length;)switch(o=e.charCodeAt(n++)){case 32:case 9:case 10:case 13:continue;case 38:if(0===(0,i.indexOf)(e.substring(n),"nbsp;")){n+=5;continue}return ue;case 92:switch(a+=String.fromCharCode(o),e.charCodeAt(n)){case 92:return n++,oe;case 123:case 124:case 125:return e.charCodeAt(n++)}var u=latex();if(null!==u)return u;a="";continue;case 45:if(62===e.charCodeAt(n))return n++,re;case 33:return 61===e.charCodeAt(n)?(n++,Se):o;case 37:case 40:case 41:case 42:case 43:case 44:case 47:case 58:case 61:case 63:case 91:case 93:case 94:case 95:case 123:case 124:case 125:return a+=String.fromCharCode(o),o;case 36:return a+=String.fromCharCode(o),V;case 39:return prime(o);case 60:return 61===e.charCodeAt(n)?(n++,H):B;case 62:return 61===e.charCodeAt(n)?(n++,z):Q;default:return isAlphaCharCode(o)?variable(o):matchDecimalSeparator(String.fromCharCode(o))||isNumberCharCode(o)?t.oneCharToken?(a+=String.fromCharCode(o),N):number(o):((0,r.assert)(!1,s(1004,[String.fromCharCode(o),o])),0)}return 0},lexeme:function lexeme(){if(a)return a},pos:function pos(){return n}}}(e);function start(e){nt=st.start(e)}function hd(){return nt}function lexeme(){return st.lexeme()}function next(e){nt=it,it=S,nt===S&&(nt=st.start(e))}function lookahead(e){return it===S&&(it=st.start(e)),it}function eat(e,t){var n=hd();if(n!==e){var i=String.fromCharCode(e),a=n?String.fromCharCode(n):"EOS";(0,r.assert)(!1,s(1001,[i,a]))}next(t)}function isSimpleFraction(e){if(e.op===Model.FRAC){var t=e.args[0],n=e.args[1];return t.op===Model.NUM&&"integer"===t.numberFormat&&n.op===Model.NUM&&"integer"===n.numberFormat}return!1}function isMinusOne(e){return e.op===Model.SUB&&1===e.args.length&&e.args[0].op===Model.NUM&&1===e.args[0].args.length&&"1"===e.args[0].args[0]}function primaryExpr(){var e,t=void 0,n=void 0,o=void 0,u=void 0,l=void 0;switch(e=hd()){case m:case v:o=[lexeme()],next(),t=newNode(Model.VAR,o),isChemCore()&&hd()===R&&lookahead()===P&&(eat(R),eat(P));break;case N:t=numberNode(lexeme()),next();break;case fe:t=newNode(Model.TYPE,[newNode(Model.VAR,[lexeme()])]),next();break;case M:case I:t=function parenExpr(e){var t=void 0,n=void 0;return eat(e),hd()===D||hd()===L?(eat(e===I?D:L),t=newNode(Model.COMMA,[])):(t=commaExpr(),eat(n=hd()===D?D:L)),(2!==t.args.length||e!==I&&e!==M||n!==D&&n!==L)&&e!==I&&e!==M||(t=newNode(Model.PAREN,[t])),t.lbrk=e,t.rbrk=n,t}(e);break;case R:t=braceExpr();break;case le:next();var c=braceExpr(),d=function matrixExpr(){var e=[];for(e.push(rowExpr());hd()===oe;)next(),e.push(rowExpr());return newNode(rt[oe],e)}();eat(ce),braceExpr(),(0,i.indexOf)(c.args[0],"matrix")>=0?t=newNode(Model.MATRIX,[d]):(0,r.assert)(!1,"Unrecognized LaTeX name");break;case C:t=function absExpr(){eat(C);var e=additiveExpr();return eat(C),unaryNode(Model.ABS,[e])}();break;case _e:next(),t=unaryNode(Model.ABS,[braceExpr()]);break;case A:next(),u=braceExpr(),l=braceExpr(),(t=newNode(Model.FRAC,[u,l])).isFraction=isSimpleFraction(t);break;case se:next();var p=braceExpr(),h=braceExpr(),f=unaryNode(Model.FACT,[p]),g=binaryNode(Model.POW,[binaryNode(Model.MUL,[unaryNode(Model.FACT,[h]),unaryNode(Model.FACT,[binaryNode(Model.ADD,[p,negate(h)])])]),a]);(t=binaryNode(Model.MUL,[f,g])).isBinomial=!0;break;case F:switch(next(),hd()){case M:var y=function bracketExpr(){eat(M);var e=commaExpr();return eat(L),e}();n=braceExpr(),t=newNode(Model.SQRT,[n,y]);break;case R:n=braceExpr(),t=newNode(Model.SQRT,[n,newNode(Model.NUM,["2"])]);break;default:(0,r.assert)(!1,s(1001,["{ or (",String.fromCharCode(hd())]))}break;case pe:next();var b=braceExpr();t=newNode(Model.VEC,[b]);break;case Y:return next(),o=[],hd()===w&&(eat(w),o.push(primaryExpr()),o.push(primaryExpr())),newNode(rt[e],o);case K:case Z:case ee:case Te:case xe:case Re:case Ce:return next(),o=[],hd()===w&&(next({oneCharToken:!0}),o.push(primaryExpr()),hd()===_&&(eat(_,{oneCharToken:!0}),o.push(primaryExpr()))),hd()&&o.push(commaExpr()),newNode(rt[e],o);case G:return next(),newNode(Model.EXISTS,[equalExpr()]);case $:case Ze:case re:case He:case Qe:case ze:case Ge:case We:case Ke:case Xe:case $e:case Ye:return next(),newNode(rt[e],[commaExpr()]);case J:return next(),newNode(Model.EXP,[additiveExpr()]);case ie:return next(),newNode(Model.M,[multiplicativeExpr()]);case ge:case we:case Ae:return next(),newNode(rt[e],[braceExpr()]);case me:case ve:return next(),u=braceExpr(),l=braceExpr(),newNode(rt[e],[u,l]);case be:return next(),u=braceExpr(),newNode(Model.MATHBF,[u]);case ne:return next(),newNode(Model.VAR,["?"]);default:(0,r.assert)(!Model.option("strict"),s(1006,[rt[e]])),t=at}return t}function rowExpr(){var e=[];for(e.push(equalExpr());hd()===ue;)next(),e.push(equalExpr());return newNode(rt[ue],e)}function braceExpr(){var e=void 0;return eat(R),hd()===P?(eat(P),e=at):(e=commaExpr(),eat(P)),e.lbrk=R,e.rbrk=P,e}function exponentialExpr(){for(var e=[primaryExpr()];hd()===_;){next({oneCharToken:!0});var t=void 0;if(!isMathSymbol(e[0])&&!isChemCore()||(t=hd())!==E&&t!==q){var r=unaryExpr();r.op===Model.VAR&&"\\circ"===r.args[0]?(hd()===V&&"K"===lexeme()||"C"===lexeme()||"F"===lexeme()?(r=multiplyNode([e.pop(),unaryNode(Model.VAR,["\\degree "+lexeme()])]),next()):r=multiplyNode([e.pop(),unaryNode(Model.VAR,["\\degree"])]),e.push(r)):e.push(r)}else next(),e.push(unaryNode(rt[t],[n]))}if(e.length>1){var a=e.pop();return(0,i.forEach)(e.reverse(),(function(e){a=newNode(Model.POW,[e,a])})),a}return e[0]}function postfixExpr(){var e,t=exponentialExpr();switch(e=hd()){case te:next(),t=newNode(Model.PERCENT,[t]);break;case ae:next(),t=newNode(Model.FACT,[t]);break;default:if(e===V&&"\\degree"===lexeme())next(),hd()!==V||"K"!==lexeme()&&"C"!==lexeme()&&"F"!==lexeme()?t=multiplyNode([t,unaryNode(Model.VAR,["\\degree"])]):(t=multiplyNode([t,unaryNode(Model.VAR,["\\degree "+lexeme()])]),next());else if(e===C&&lookahead()===w){next();var n=[t];next({oneCharToken:!0}),n.push(newNode(Model.SUBSCRIPT,[equalExpr()])),t=newNode(Model.PIPE,n)}else!isChemCore()||e!==E&&e!==q||lookahead()!==P||(next(),t=unaryNode(rt[e],[t]))}return t}function unaryExpr(){var e=void 0,t=void 0,i=void 0;switch(e=hd()){case E:case qe:case q:next(),t=newNode(rt[e],[unaryExpr()]);break;case w:if(i=rt[e],next({oneCharToken:!0}),(e=hd())===E||e===q?(next(),t=n):t=unaryExpr(),t=newNode(i,[t]),(e=hd())===_){var r=[t];i=rt[e],next({oneCharToken:!0}),(e=hd())===E||e===q?(next(),t=n):t=unaryExpr(),r.push(t),t=newNode(i,r)}break;case _:i=rt[e],next({oneCharToken:!0}),(e=hd())===E||e===q?(next(),t=n):t=unaryExpr(),t=newNode(i,[t]);break;default:e===V&&"$"===lexeme()?(next(),hd()?(t=multiplyNode([newNode(Model.VAR,["$"]),postfixExpr()])).args[1].isPolynomial=!0:t=newNode(Model.VAR,["$"])):t=postfixExpr()}return t}function subscriptExpr(){var e=[unaryExpr()];return hd()===w&&(next({oneCharToken:!0}),e.push(exponentialExpr()),isChemCore()&&hd()===R&&(eat(R),eat(P))),e.length>1?newNode(Model.SUBSCRIPT,e):e[0]}function fractionExpr(){for(var e=void 0,t=subscriptExpr();(e=hd())===T||e===de;)next(),(t=newNode(rt[e],[t,subscriptExpr()])).isFraction=isSimpleFraction(t);return t}function isMathSymbol(e){if(e.op!==Model.VAR)return!1;var t=Model.env[e.args[0]];return!(!t||!t.name)}function isVar(e,t){return(0,r.assert)(void 0===t||"string"==typeof t,"Internal error in 'isVar()'"),e.op===Model.VAR&&(void 0===t||e.args[0]===t)}function isOne(e){return e.op===Model.NUM&&"1"===e.args[0]}function isMinusOne(e){return e.op===Model.SUB&&1===e.args.length&&isOne(e.args[0])}function isDerivative(e){if(e.op===Model.FRAC){var t=e.args[0],n=t.op===Model.MUL&&t.args[0].op===Model.VAR&&t.args[0].args[0]||t.op===Model.VAR&&t.args[0],i=e.args[1],r=i.op===Model.MUL&&i.args[0].op===Model.VAR&&i.args[0].args[0];return"d"===n&&"d"===r&&i.args[1].op===Model.VAR||void 0}}function derivativeExpr(e){if(e.op===Model.FRAC){var t=e.args[0],i=e.args[1],a=t.op===Model.MUL&&t.args.slice(1).length>0&&multiplyNode(t.args.slice(1))||n;return(0,r.assert)(2===i.args.length),newNode(Model.DERIV,[i.args[1],a])}}function multiplicativeExpr(){var e,t,n=!1,i=[];isDerivative(e=fractionExpr())&&(e=derivativeExpr(e)),i=e.op!==Model.MUL||e.isBinomial||e.args[e.args.length-1].op===Model.VAR||"\\degree"!==e.args[e.args.length-1].args[0]?[e]:e.args;for(var o,u=0;(l=hd())&&!isAdditive(l)&&!isRelational(l)&&!isImplies(l)&&l!==U&&!isEquality(l)&&l!==P&&l!==D&&l!==L&&l!==re&&l!==Ze&&l!==B&&l!==C&&l!==oe&&l!==ue&&l!==ce;){if(n=!1,isMultiplicative(l)&&(next(),n=!0),isDerivative(e=fractionExpr())&&(e=derivativeExpr(e)),l!==he&&l!==we||(e=newNode(rt[l],[i.pop(),e])),(0,r.assert)(n||0===i.length||e.lbrk||i[i.length-1].op!==Model.NUM||i[i.length-1].lbrk||isRepeatingDecimal([i[i.length-1],e])||e.op!==Model.NUM,s(1010)),isChemCore()&&l===I&&isVar(i[i.length-1],"M"))i.pop(),e=unaryNode(Model.M,[e]);else if(n)l===O&&i.length>0&&isScientific([i[i.length-1],e])&&(isNeg(l=i.pop())&&(e=binaryNode(Model.MUL,[a,e])),(e=binaryNode(Model.MUL,[l,e])).isScientific=!0);else if(i.length>0&&isMixedFraction(i[i.length-1],e))l=i.pop(),(e=binaryNode(Model.ADD,[l,e])).isMixedFraction=!0;else if(Model.option("ignoreCoefficientOne")&&1===i.length&&(isOne(o=i[0])||isMinusOne(o))&&isPolynomialTerm(i[0],e))isOne(i[0])?i.pop():e=negate(e);else if(i.length>0&&(t=isRepeatingDecimal([i[i.length-1],e])))i.pop(),e=t;else if(e.op===Model.VAR&&0===e.args[0].indexOf("'")){var l=i.pop();(e=binaryNode(Model.MUL,[l,e])).isImplicit=!0}else if(!isChemCore()&&isPolynomialTerm(i[i.length-1],e))e.isPolynomial=!0,(l=i.pop()).isPolynomial?i.push(l):((e=binaryNode(Model.MUL,[l,e])).isImplicit=l.isImplicit,l.isImplicit=void 0);else if(i[i.length-1].op===Model.DERIV){var c=i[i.length-1].args[1];e=newNode(Model.DERIV,[i[i.length-1].args[0],multiplyNode([c,e])]),i.pop()}else e.isImplicit=!0;e.op!==Model.MUL||e.isScientific||e.isBinomial||!i.length||i[i.length-1].isImplicit||i[i.length-1].isPolynomial||!e.isImplicit||!e.isPolynomial?i.push(e):i=i.concat(e.args),(0,r.assert)(u++<1e3,s(1e3,["Stuck in loop in mutliplicativeExpr()"]))}return i.length>1?binaryNode(Model.MUL,i):i[0];function isMultiplicative(e){return e===O||e===he||e===T||e===we}}function isMixedFraction(e,t){return e.op===Model.SUB&&1===e.args.length&&(e=e.args[0]),!(e.lbrk||t.lbrk||e.op!==Model.NUM||!isSimpleFraction(t))}function isPolynomialTerm(e,t){return e.op===Model.SUB&&1===e.args.length&&(e=e.args[0]),!(e.lbrk||t.lbrk||!(e.op===Model.NUM&&isVar(t)||isVar(e)&&t.op===Model.NUM||e.op===Model.NUM&&t.op===Model.NUM||isVar(e)&&isVar(t)||e.op===Model.MUL&&e.args[e.args.length-1].isPolynomial&&(isVar(t)||t.op===Model.NUM)))}function isRepeatingDecimal(e){var t=void 0,n=void 0,i=void 0;if(!e[0].lbrk&&(e[0].op===Model.NUM&&"decimal"===e[0].numberFormat||e[0].op===Model.VAR&&"?"===e[0].args[0]||e[0].op===Model.TYPE&&e[0].args[0].op===Model.VAR&&"decimal"===e[0].args[0].args[0])){if(40===e[1].lbrk&&(function isInteger(e){var t=void 0;return t=e.op===Model.NUM?e.args[0]:e,!isNaN(parseInt(t))}(e[1])||e[1].op===Model.TYPE&&e[1].args[0].op===Model.VAR&&"integer"===e[1].args[0].args[0]))n=e[0],i=e[1];else if(e[1].lbrk||e[1].op!==Model.OVERLINE){if(e[1].lbrk||e[1].op!==Model.DOT)return null;n=e[0],i=e[1]}else n=e[0],(i=e[1]).args[0].op===Model.NUM&&(i.args[0].args[0]=i.args[0].args[0].split("").join(" "));i.isRepeating=!0,(t=binaryNode(Model.ADD,[n,i])).numberFormat="decimal",t.isRepeating=!0}else t=null;return t}function isScientific(e){if(1===e.length)return e[0].op===Model.NUM&&(1===e[0].args[0].length||1===(0,i.indexOf)(e[0].args[0],"."))||e[0].op===Model.POW&&e[0].args[0].op===Model.NUM&&"10"===e[0].args[0].args[0]&&"integer"===e[0].args[1].numberFormat;if(2===e.length){var t=e[0],n=e[1];return t.op===Model.NUM&&(1===t.args[0].length||1===(0,i.indexOf)(t.args[0],"."))&&n.op===Model.POW&&n.args[0].op===Model.NUM&&"10"===n.args[0].args[0]&&"integer"===n.args[1].numberFormat}}function isNeg(e){return"number"==typeof e?e<0:1===e.args.length?e.op===o.SUB&&e.args[0].args[0]>0||e.op===Model.NUM&&+e.args[0]<0:2===e.args.length?e.op===o.MUL&&isNeg(e.args[0]):void 0}function negate(e){if("number"==typeof e)return-e;if(e.op===Model.MUL){var t=e.args.slice(0);return multiplyNode([negate(t.shift())].concat(t))}return e.op===Model.POW&&isMinusOne(e.args[1])?binaryNode(Model.POW,[negate(e.args[0]),a]):unaryNode(Model.SUB,[e])}function isAdditive(e){return e===E||e===q||e===k||e===ye}function additiveExpr(){for(var e=multiplicativeExpr(),t=void 0;isAdditive(t=hd());){next();var n=multiplicativeExpr();switch(t){case ye:e=binaryNode(Model.BACKSLASH,[e,n]);break;case k:e=binaryNode(Model.PM,[e,n]);break;case q:e=binaryNode(Model.SUB,[e,n]);break;default:e=binaryNode(Model.ADD,[e,n])}}return e}function isRelational(e){return e===B||e===H||e===Q||e===z||e===W||e===X||e===Me||e===Ie||e===Oe||e===Ne||e===ke||e===qe||e===Pe||e===Le||e===De||e===Fe||e===Ve||e===Ue||e===je||e===et||e===Be||e===tt}function isEquality(e){return e===x||e===Se||e===Ee}function equalExpr(){for(var e=function relationalExpr(){for(var e=hd(),t=additiveExpr(),n=[],i=!1;isRelational(e=hd());)if(next(),e!==qe){var r=additiveExpr();t=newNode(rt[e],[t,r]),i&&(t.op="n"+t.op,i=!1),n.push(t),t=Model.create(r)}else i=!0;return t=0===n.length?t:1===n.length?n[0]:newNode(Model.COMMA,n)}(),t=void 0;isEquality(t=hd());){next();var n=additiveExpr();e=newNode(rt[t],[e,n])}return e}function isImplies(e){return e===Je||e===re||e===Ze||e===He||e===Qe||e===ze||e===Ge||e===We||e===Ke||e===Xe||e===$e||e===Ye||e===C}function impliesExpr(){for(var e=equalExpr(),t=void 0;isImplies(t=hd());){next();var n=equalExpr();e=newNode(rt[t],[e,n])}return e}function commaExpr(){for(var e=impliesExpr(),t=[e];hd()===U;)next(),t.push(impliesExpr());return t.length>1&&(e=newNode(rt[U],t)),e}return{expr:function expr(){if(start(),hd()){var e=commaExpr();return e.lbrk===R&&e.rbrk===P&&(e=newNode(Model.SET,[e])),(0,r.assert)(!hd(),s(1003,[st.pos(),st.lexeme()])),e}return u},tokenize:function tokenize(){var e=[];for(start();hd();){var t=lexeme();e.push(newNode(hd(),t?[t]:[])),next()}return newNode(Model.COMMA,e)}}};return Model}()},{"./assert.js":1,"./ast.js":2,"./backward.js":3}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.rules={words:{a:"A",A:"cap A",B:"cap b",C:"cap c",D:"cap d",E:"cap e",F:"cap f",G:"cap g",H:"cap h",I:"cap i",J:"cap j",K:"cap k",L:"cap l",M:"cap m",N:"cap n",O:"cap o",P:"cap p",Q:"cap q",R:"cap r",S:"cap s",T:"cap t",U:"cap u",V:"cap v",W:"cap w",X:"cap x",Y:"cap y",Z:"cap z","\\varepsilon":"epsilon","\\Alpha":"cap alpha","\\Beta":"cap beta","\\Gamma":"cap gamma","\\Delta":"cap delta","\\Epsilon":"cap epsilon","\\Zeta":"cap zeta","\\Eta":"cap eta","\\Theta":"cap theta","\\Iota":"cap iota","\\Kappa":"cap kappa","\\Lambda":"cap lambda","\\Mu":"cap mu","\\Nu":"cap nu ","\\Xi":"cap xi","\\Omicron":"cap omicron","\\Pi":"cap pi","\\Rho":"cap rho","\\Sigma":"cap sigma","\\Tau":"cap tau","\\Upsilon":"cap upsilon","\\Phi":"cap phi","\\Chi":"cap chi","\\Psi":"cap psi","\\Omega":"cap omega","\\ldots":"dot dot dot","\\vdots":"vertical dot dot dot","\\ddots":"diagonal dot dot dot","\\infty":"infinity","\\measuredangle":"measure of angle","m\\angle":"measure of angle","\\sin":"sine","\\cos":"cosine","\\tan":"tangent","\\csc":"cosecant","\\sec":"secant","\\cot":"cotangent","\\sinh":"hyperbolic sine","\\cosh":"hyperbolic cosine","\\tanh":"hyperbolic tangent","\\csch":"hyperbolic cosecant","\\sech":"hyperbolic secant","\\coth":"hyperbolic cotangent","'''":"triple prime","''":"double prime","'":"prime","\\notin":"is not in","\\mathbb":"bold","\\backslash":"backslash","\\emptyset":"empty set","\\circledot":"circle","\\longleftarrow":"long left arrow","\\leftrightarrow":"left right row","\\Leftrightarrow":"implies","\\longleftrightarrow":"long left right arrow","\\overleftrightarrow":"over left right arrow","\\overrightarrow":"over right arrow","\\overleftarrow":"over left arrow","\\leftarrow":"left arrow","\\addmatrixcol":"add matrix columns","\\addmatrixrow":"add matrix rows"},types:{functionName:["f","g","h","F","G","H","\\ln","\\lg","\\log","\\sin","\\cos","\\tan","\\csc","\\sec","\\cot","\\sinh","\\cosh","\\tanh","\\csch","\\sech","\\coth"],numberPosNeg:["\\type{number}","-\\type{number}"],numberOrLetter:["\\type{numberPosNeg}","\\type{variable}"],matrix:["\\begin{bmatrix}?&?&?\\end{bmatrix}"],functionComposition:["(\\type{functionName}+\\type{functionName})","(\\type{functionName}-\\type{functionName})","(\\type{functionName}\\cdot\\type{functionName})","(\\frac{\\type{functionName}}{\\type{functionName}})"],function:["\\type{function}^{?}","\\type{function}_{?}","\\type{functionComposition}","\\type{functionName}"],functionCall:["\\type{function}(?)","\\type{function}[?]","\\type{variable}(\\type{number})","\\type{variable}(\\type{variable})","\\type{variable}(?,?)","\\type{variable}[\\type{number}]","\\type{variable}[\\type{variable}]","\\type{variable}[?,?]"],commonFraction:["\\frac{\\type{integer}}{2}","\\frac{\\type{integer}}{3}","\\frac{\\type{integer}}{4}","\\frac{\\type{integer}}{5}","\\frac{\\type{integer}}{6}","\\frac{\\type{integer}}{7}","\\frac{\\type{integer}}{8}","\\frac{\\type{integer}}{9}","\\frac{\\type{integer}}{10}"],simpleExpression:["\\type{numberOrLetter}","\\type{commonFraction}","\\type{function}(?)","\\type{function}[?]","\\type{number}","-\\type{variable}","\\type{variable}","\\type{number}\\degrees","\\type{variable}\\degrees","\\type{variable}","\\type{variable}\\type{variable}","\\type{number}\\type{variable}"],simpleFractionPart:["-\\type{commonFraction}","\\type{simpleExpression}","\\type{commonFraction}"],simpleFractionExtended:["\\frac{\\type{simpleFractionPart}}{\\type{simpleFractionPart}}"],simpleNumericExponent:["\\type{number}","\\type{commonFraction}"],simpleExponent:["\\type{simpleNumericExponent}","\\type{variable}"]},rules:{"\\type{decimal}\\overline{\\type{integer}}":[{"%1 repeating %2":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"\\type{decimal}(\\type{integer})":[{"%1 repeating %2":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"\\overline{?}":["line segment %1"],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}' \\type{numberOrLetter}''":[{"%1 %2 %3":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","-?\\degree":"negative %1 degrees","1'":"%1 minute","?'":"%1 minutes","1''":"%1 second","?''":"%1 seconds"}}],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}'":[{"%1 %2":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","1'":"%1 minute","?'":"%1 minutes"}}],"\\type{numberOrLetter}\\degree \\type{numberOrLetter}''":[{"%1 %2":{"1\\degree":"%1 degree","?\\degree":"%1 degrees","1''":"%1 second","?''":"%1 seconds"}}],"\\type{numberOrLetter}\\degree":[{"%1":{1:"1 degree","?":"%1 degrees"}}],"?\\degree":["%1 degrees"],"\\type{numberPosNeg}' \\type{numberPosNeg}''":[{"%1 %2":{"1'":"1 foot","?'":"%1 feet","1''":"1 inch","?''":"%1 inches"}}],"\\type{numberPosNeg}''":["%1 inches"],"\\type{numberPosNeg}'":["%1 feet"],"?^\\prime":["%1 prime"],"?'''":["%1 triple prime"],"?''":["%1 double prime"],"?'":["%1 prime"],"\\log\\type{simpleExpression}":["log %2"],"\\log ?":["the log of %2"],"\\log_{?} \\type{simpleExpression}":[{"the log base %1 of %2":{"\\log_{?}":"%2"}}],"\\ln\\type{simpleExpression}":["natural log %2"],"\\ln ?":["the natural log of %2"],"{?}":[{"start set %1 end set":{"?:?":"%1 such that %2","?|?":"%1 such that %2"}}],"?|_?":[{"%1 evaluated at %2":{"?^?":"%2 minus the same expression evaluated at %1"}}],"?|?":["%1 divides %2"],"\\type{simpleSmallRowMatrix}":[{"the 1 by %N row matrix %1":{"\\type{row}":"%1","\\type{column}":"%*"}}],"\\type{smallRowMatrix}":[{"the 1 by %N row matrix %1":{"\\type{row}":"%1","\\type{column}":"column %N %*"}}],"\\type{simpleSmallColumnMatrix}":[{"the %M by 1 column matrix %1":{"\\type{row}":"%*","\\type{column}":"%1"}}],"\\type{smallColumnMatrix}":[{"the %M by 1 column matrix %1":{"\\type{row}":"row %M %*","\\type{column}":"%1"}}],"\\type{simpleSmallMatrix}":[{"the %M by %N matrix %1":{"\\type{row}":"row %M, %*","\\type{column}":"%*"}}],"\\type{matrix}":[{"the %M by %N matrix, %1":{"\\type{row}":"row %M, %*","\\type{column}":"column %N, %*"}}],"\\sum_?^??":[{"the sum from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum_?^?":[{"the sum from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum_? ?":[{"the sum over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\sum ?":["the sum of %1"],"\\sum":["the sum"],"\\prod_?^??":[{"the product from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod_?^?":[{"the product from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod_? ?":[{"the product over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\prod ?":["the product of %1"],"\\prod":["the product"],"\\int_?^??":[{"the integral from %1 to %2 of %3":{"?=?":"%1 is equal to %2","?dx":"%1"}}],"\\int_?^?":[{"the integral from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\int_? ?":[{"the integral over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\int ?":["the integral of %1"],"\\int":["the integral"],"? \\cup ?":[{"the union of %1 and %2":{"?":"%1"}}],"\\cup_?^??":[{"the union from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup_?^?":[{"the union from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup_? ?":[{"the union over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cup ?":["the union of %1"],"\\cup":["the union"],"\\bigcup_?^??":[{"the union from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup_?^?":[{"the union from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup_? ?":[{"the union over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcup ?":["the union of %1"],"\\bigcup":["the union"],"? \\cap ?":[{"the intersection of %1 and %2":{"?":"%1"}}],"\\cap_?^??":[{"the intersection from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap_?^?":[{"the intersection from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap_? ?":[{"the intersection over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\cap ?":["the intersection of %1"],"\\cap":["the intersection"],"\\bigcap_?^??":[{"the intersection from %1 to %2 of %3":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap_?^?":[{"the intersection from %1 to %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap_? ?":[{"the intersection over %1 of %2":{"?=?":"%1 is equal to %2","??":"%1"}}],"\\bigcap ?":["the intersection of %1"],"\\bigcap":["the intersection"],"? \\text{and} ?":["%1 %2"],"?m/s":[{"%1 per second":{1:"1 meter","?":"%1 meters"}}],"?ft/s":[{"%1 per second":{1:"1 foot","?":"%1 feet"}}],"?mi/hr":[{"%1 per hour":{1:"1 mile","?":"%1 miles"}}],"?mi/h":[{"%1 per hour":{1:"1 mile","?":"%1 miles"}}],"?km/hr":[{"%1 per hour":{1:"1 kilometer","?":"%1 kilometers"}}],"?km/h":[{"%1 per hour":{1:"1 kilometer","?":"%1 kilometers"}}],"1g":["1 gram"],"?g":["%1 grams"],"1s":["1 second"],"?s":["%1 seconds"],"1hr":["1 hour"],"?hr":["%1 hours"],"1m":["1 meter"],"?m":["%1 meters"],"1L":["1 liter"],"?L":["%1 liters"],"1kg":["1 kilogram"],"?kg":["%1 kilograms"],"1ks":["1 kilosecond"],"?ks":["%1 kiloseconds"],"1km":["1 kilometer"],"?km":["%1 kilometers"],"1kL":["1 kiloliter"],"?kL":["%1 kiloliters"],"1cg":["1 centigram"],"?cg":["%1 centigrams"],"1cs":["1 centisecond"],"?cs":["%1 centiseconds"],"1cm":["1 centimeter"],"?cm":["%1 centimeters"],"1cL":["1 centiliter"],"?cL":["%1 centiliters"],"1mg":["1 milligram"],"?mg":["%1 milligrams"],"1ms":["1 millisecond"],"?ms":["%1 milliseconds"],"1mm":["1 millimeter"],"?mm":["%1 millimeters"],"1mL":["1 milliliter"],"?mL":["%1 milliliters"],"1\\mug":["1 microgram"],"?\\mug":["%1 micrograms"],"1\\mus":["1 microsecond"],"?\\mus":["%1 microseconds"],"1\\mum":["1 micrometer"],"?\\mum":["%1 micrometers"],"1\\muL":["1 microliter"],"?\\muL":["%1 microliters"],"1ng":["1 nanogram"],"?ng":["%1 nanograms"],"1ns":["1 nanosecond"],"?ns":["%1 nanoseconds"],"1nm":["1 nanometer"],"?nm":["%1 nanometers"],"1nL":["1 nanoliter"],"?nL":["%1 nanoliters"],"1lb":["1 pound"],"?lb":["%1 pounds"],"1in":["1 inch"],"?in":["%1 inches"],"1ft":["1 foot"],"?ft":["%1 feet"],"1mi":["1 mile"],"?mi":["%1 miles"],"1cup":["1 cup"],"?cup":["%1 cups"],"1pt":["1 pint"],"?pt":["%1 pints"],"1qt":["1 quart"],"?qt":["%1 quarts"],"1gal":["1 gallon"],"?gal":["%1 gallons"],"1oz":["1 ounce"],"?oz":["%1 ounces"],"\\mathbb{R}":["the real numbers"],"\\mathbb{C}":["the complex numbers"],"\\mathbb{Z}":["the integers"],"\\mathbb{Q}":["the rational numbers"],"\\mathbb{N}":["the natural numbers"],"\\mathbb{Z}^+":["the positive integers"],"\\mathbb{?}^?":[{"%2":{"\\type{integer}":"%1",R:"r",C:"c",Z:"z",Q:"q",N:"n","?^?":"%1 %2"}}],"\\mathbb{?}^3":["%1 three "],"\\mathbb{?}^n":["%1 n"],"\\mathbb{?}^\\infty":["%1 infinty"],"m\\angle":["measure of angle"],"\\Delta":["triangle"],"$?":["%2 dollars"],"?, ?":["%1 comma %2"],"\\type{commonFraction}":[{"%%":{"\\frac{1}{2}":"1 half","\\frac{\\type{integer}}{2}":"%1 halves","\\frac{1}{3}":"1 third","\\frac{\\type{integer}}{3}":"%1 thirds","\\frac{1}{4}":"1 fourth","\\frac{\\type{integer}}{4}":"%1 fourths","\\frac{1}{5}":"1 fifth","\\frac{\\type{integer}}{5}":"%1 fifths","\\frac{1}{6}":"1 sixth","\\frac{\\type{integer}}{6}":"%1 sixths","\\frac{1}{7}":"1 seventh","\\frac{\\type{integer}}{7}":"%1 sevenths","\\frac{1}{8}":"1 eighth","\\frac{\\type{integer}}{8}":"%1 eighths","\\frac{1}{9}":"1 ninth","\\frac{\\type{integer}}{9}":"%1 ninths","\\frac{1}{10}":"1 tenth","\\frac{\\type{integer}}{10}":"%1 tenths"}}],"\\type{simpleFractionExtended}":["%1 over %2"],"\\frac{?}{?}":["the fraction with numerator %1 and denominator %2"],"\\type{function}(?)":["%1 of %2"],"\\type{function}[?]":["%1 of %2"],"\\sin ?":["sine %2"],"\\cos{?}":["cosine %2"],"\\tan{?}":["tangent %2"],"\\csc{?}":["cosecant %2"],"\\sec{?}":["secant %2"],"\\cot{?}":["cotangent %2"],"\\sin^{-1}{?}":["inverse sine %2"],"\\cos^{-1}{?}":["inverse cosine %2"],"\\tan^{-1}{?}":["inverse tangent %2"],"\\csc^{-1}{?}":["inverse cosecant %2"],"\\sec^{-1}{?}":["inverse secant %2"],"\\cot^{-1}{?}":["inverse cotangent %2"],"\\sinh^{-1}{?}":["inverse hyperbolic sine %2"],"\\cosh^{-1}{?}":["inverse hyperbolic cosine %2"],"\\tanh^{-1}{?}":["inverse hyperbolic tangent %2"],"\\csch^{-1}{?}":["inverse hyperbolic cosecant %2"],"\\sech^{-1}{?}":["inverse hyperbolic secant %2"],"\\coth^{-1}{?}":["inverse hyperbolic cotangent %2"],"?^{-1}":["%1 inverse"],"?^{0}":["%1 to the 0 power"],"?^{2}":["%1 squared"],"?^{3}":["%1 cubed"],"\\type{function}^{\\type{integer}}":["%2th power of %1"],"?^\\type{integer}":["%1 to the %2th power"],"?^\\type{variable}":["%1 to the %2th power"],"?^{-\\type{integer}}":["%1 to the %2 power"],"?^{\\type{decimal}}":[{"%1 raised to the %2 power":{"\\type{decimal}":"%IP point %FP","?":"%1"}}],"?^{\\type{simpleExponent}}^{2}":["%1 raised to the %2 power"],"?^{\\type{simpleExponent}}^{3}":["%1 raised to the %2 power"],"?^{\\type{simpleNumericExponent}\\type{variable}}^{2}":["%1 raised to the %2 power"],"?^{\\type{simpleNumericExponent}\\type{variable}}^{3}":["%1 raised to the %2 power"],"?^?^?":["%1 raised to the exponent %2 end exponent"],"?^?":["%1 raised to the %2 power"],"\\sqrt{\\type{simpleExpression}}":[{options:{EndRoot:!0},value:"square root of %1 end root"},"square root of %1"],"\\sqrt[3]{\\type{simpleExpression}}":["cube root of %1"],"\\sqrt[\\type{integer}]{\\type{simpleExpression}}":["%2th root of %1"],"\\sqrt{?}":["square root of %1 end root"],"\\sqrt[3]{?}":[{options:{EndRoot:!0},value:"cube root of %1 end root"},"cube root of %1"],"\\sqrt[\\type{integer}]{?}":[{options:{EndRoot:!0},value:"%2th root of %1 end root"},"%2th root of %1"],"\\sqrt[?]{?}":[{options:{EndRoot:!0},value:"%2th root of %1 end root"},"%2th root of %1"],"\\mathbf{?}":["bold math font %1"],"\\mathbf{}":["bold math font"],"\\underset{?}{?}":["%1 set under %2"],"\\overset{?}{?}":["%1 set over %2"],"-?":["negative %1"],"+?":["plus %1"],"? \\cong ?":["%1 is congruent to %2"],"? \\ncong ?":["%1 is not congruent to %2"],"? \\parallel ?":["%1 is parallel to %2"],"? \\nparallel ?":["%1 is not parallel to %2"],"? \\sim ?":["%1 approximates %2"],"? \\nsim ?":["%1 does not approximate %2"],"? \\to ?":["%1 to %2"],"\\partial":["partial derivative"],"\\lim_?":["limit %1"],"\\lim_??":["limit %1 of %2"],"\\lim":["limit"],"\\type{mixedFraction}":["%1 and %2"],"\\type{scientific}":["%1 times %2"],"\\type{fraction}":["%1 over %2"],"\\type{integer}":["%1"],"\\type{decimal}":["%IP point %FP"],"\\type{number}":["%1"],"?(?)":["%1 times %2"],"(?)?":["%1 times %2"],"(?)(?)":["%1 times %2"],"? \\not\\in ?":["%1 is not in %2"],"? \\not\\ni ?":["%1 does not contain %2"],"? \\not\\subseteq ?":["%1 is not a subset of %2"],"? \\not\\subset ?":["%1 is not a strict subset of %2"],"? \\not\\supseteq ?":["%1 is not a superset of %2"],"? \\not\\supset ?":["%1 is not a strict superset of %2"],"? \\in ?":["%1 is in %2"],"? \\ni ?":["%1 contains %2"],"? \\subseteq ?":["%1 is a subset of %2"],"? \\subset ?":["%1 is a strict subset of %2"],"? \\supseteq ?":["%1 is a superset of %2"],"? \\supset ?":["%1 is a strict superset of %2"],"{}":["left brace right brace"],"[]":["left bracket right bracket"],"[?,?]":["left bracket %1 right bracket"],"(?,?]":["left parenthesis %1 right bracket"],"[?,?)":["left bracket %1 right parenthesis"],"? \\rightarrow ?":["%1 rightarrow %2"],"? \\Rightarrow ?":["%1 implies %2"],"? \\leftarrow ?":["%1 left arrow %2"],"? \\longrightarrow ?":["%1 long right arrow %2"],"? \\longleftarrow ?":["%1 long left arrow %2"],"? \\overrightarrow ?":["%1 over right arrow %2"],"? \\overleftarrow ?":["%1 over left arrow %2"],"? \\leftrightarrow ?":["%1 left right arrow %2"],"? \\Leftrightarrow ?":["%1 if and only if %2"],"? \\longleftrightarrow ?":["%1 long left right arrow %2"],"? \\overleftrightarrow ?":["%1 over left right arrow %2"],"\\rightarrow ?":["right arrow %1"],"\\Rightarrow ?":["implies %1"],"\\leftarrow ?":["left arrow %1"],"\\leftrightarrow ?":["left right arrow %1"],"\\Leftrightarrow ?":["if and only if %1"],"\\longrightarrow ?":["long right arrow %1"],"\\longleftarrow ?":["long left arrow %1"],"\\overrightarrow ?":["over right arrow %1"],"\\overleftarrow ?":["over left arrow %1"],"\\longleftrightarrow ?":["long left right arrow %1"],"\\overleftrightarrow ?":["over left right arrow %1"],"? \\implies ?":["%1 implies %2"],"?\\'":["%1 prime"],"? \\text{dx}":["with respect to x of %1"],"?_?":["%1 sub %2"],"?:?":["ratio of %1 to %2"],"? \\perp ?":["%1 perpendicular to %2"],"? \\propto ?":["%1 proportional to %2"],"?+?":["%1 plus %2"],"?-?":["%1 minus %2"],"?*?":["%1 times %2"],"?\\cdot?":["%1 times %2"],"?\\cdotp?":["%1 times %2"],"?<?":["%1 is less than %2"],"?<=?":["%1 is less than or equal to %2"],"?>?":["%1 is greater than %2"],"?>=?":["%1 is greater than or equal to %2"],"?=?":["%1 is equal to %2"],"?\\approx?":["%1 almost equal to %2"],"?!":["%1 factorial"],"?%":["%1 percent "],"? \\pm ?":["%1 plus or minus %2"],"? \\ne ?":["%1 is not equal to %2"],"? \\neq ?":["%1 is not equal to %2"],"? \\ngtr ?":["%1 is not greater than %2"],"? \\nless ?":["%1 is not less than %2"],"? \\div ?":["%1 divided by %2"],"? \\backslash ?":["%1 left divided by %2"],"(?)^? ?":["%1 times %2"],"? (?)^?":["%1 times %2"],"?^? ?":["%1 %2"],"? ?^?":["%1 %2"],"(\\type{simpleExpression})":["%1"],"(?)":["open paren %1 close paren"],"[\\type{simpleExpression}]":["%1"],"[?]":["open bracket %1 close bracket"],"|\\type{simpleExpression}|":["absolute value of %1"],"|?|":["start absolute value %1 end absolute value"],"{?} ?":["%1 %2"],"? ?":["%1 %2"],"?":["%1 "]}}},{}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.version="v0.2.0"},{}]},{},[4])(4)},module.exports=f()},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(37),s=n(27);var o={stripAttr:function stripAttr(e,t){if(e){if(!t)return e;if(r.a.isString(e)){var n=new RegExp("".concat(t,'="[^"]+"'),"gi"),i=new RegExp("".concat(t,'=\\\\"[^\\\\"]+\\\\"'),"gi");e=e.replace(n,"").replace(i,"")}else e instanceof Element&&e.hasAttribute(t)?e.removeAttribute(t):r.a.isObject(e)&&!r.a.isUndefined(e[t])&&delete e[t];return e}}};function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return u}));var u=function(){function BaseScorer(e,t){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseScorer),t&&Object(a.a)(this,t),e&&this._initialize(e,t)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(BaseScorer,[{key:"_initialize",value:function _initialize(e,t){this.questionResponse=this.processQuestionResponse(e),this.options=t,this.reset(this.questionResponse,t)}},{key:"processQuestionResponse",value:function processQuestionResponse(e){var t=e.question,n=e.response;if(t&&!r.a.isEmpty(t.dynamic)){var i=n&&r.a.getNested(n,"dynamic.id");return r.a.extend({},e,{question:this.getFormattedQuestion(t,i)})}return this.stripSimplefeature(e)}},{key:"stripSimplefeature",value:function stripSimplefeature(e){try{var t=o.stripAttr(JSON.stringify(e),"data-simplefeature_id");return JSON.parse(t)}catch(t){return e}}},{key:"getFormattedQuestion",value:function getFormattedQuestion(e,t){return s.a.getFormattedQuestion(e,t)}},{key:"isValid",value:function isValid(){return this.scoringData.isValid}},{key:"score",value:function score(){return this.scoringData.score}},{key:"scoreWithFullPenalty",value:function scoreWithFullPenalty(){return this.scoringData.scoreWithFullPenalty}},{key:"validateIndividualResponses",value:function validateIndividualResponses(){return this.scoringData.responsesValid}},{key:"maxScore",value:function maxScore(){return this.scoringData.maxScore}},{key:"suggestedResponse",value:function suggestedResponse(){return this.scoringData.suggestedResponse}},{key:"error",value:function error(){return this.scoringData.error}},{key:"canValidateResponse",value:function canValidateResponse(){return!(!this.scoringData||!this.scoringData.automarkable)}},{key:"reset",value:function reset(e,t){}}]),BaseScorer}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i=n(0),r=n.n(i);t.a={renderSimpleFeatures:function renderSimpleFeatures(e,t,n){var i=this,a=n.getSimpleFeatureNodes({$scope:e}),s=t.get("beta_flags");return n.render(s,a).then((function(e){r.a.size(e)&&(t.hooks.reset.push((function(){n.unregisterFacades(e),i.simpleFeatureFacades={}})),r.a.extend(i.simpleFeatureFacades,e))}))}}},function(e,t,n){"use strict";n(5);var i=n(0),r=n.n(i),a=n(3),s=n(1),o=n.n(s),u=n(44),l=n.n(u),c=n(7),d="lrn-loading-image-hidden",p="lrn-image-load-error-spinner-container";function getImagePromise(e){return new a.default((function(t,n){e.onload=t,e.onerror=n}))}function loadImage(e){return new a.default((function(t,n){!function handleImageLoad(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};e.retryCount>0&&function addLoadingSpinnerOverlay(e){var t=o()(e);t.siblings("."+p).length||t.addClass(d).after(l()())}(e.el);function removeSpinnerIfHasRetried(){e.retryCount>0&&function removeLoadingSpinnerOverlay(e){o()(e).removeClass(d).siblings("."+p).remove()}(e.el)}e.promise.then((function(){removeSpinnerIfHasRetried(),e.retryCount=0,t(e.el)})).catch((function(){removeSpinnerIfHasRetried(),e.retryCount++,n(e.el)}))}(e,t,n)}))}function resetImage(e){if(e.retryCount>0){var t,n=e.el,i=e.originalSrc;e.el.removeAttribute("src"),t=e.el.cloneNode(!1),e.el=t,e.promise=getImagePromise(e.el),n.parentNode.replaceChild(e.el,n),c.a.isMicrosoft&&(i+="&bust="+ +new Date),e.el.setAttribute("src",i)}}var h=function imageLoader(e){var t,n;return function(){return t=t||e.getElementsByTagName("img"),n?r()(n).forEach(resetImage):n=function getImageMap(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r()(Array.prototype.slice.call(e)).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{el:e,originalSrc:e.src,retryCount:0,promise:getImagePromise(e)}}))}(t),new a.default((function(e,t){0!==n.length?a.default.all(r()(n).map(loadImage)).then(e).catch(t):e(n)}))}};function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,"a",(function(){return f}));var f=function(){function ImageLoader(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ImageLoader),!r.a.isElement(e.element))throw new Error("The type of the element passed to ImageLoader is not HTMLDivElement");this.element=e.element,this.imageLoadPromise=null,this.loader=h(this.element)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(ImageLoader,[{key:"addFacadeMethods",value:function addFacadeMethods(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.checkImages=r.a.bind((function(){return this.checkImages()}),this),e.retryLoadImages=r.a.bind((function(){this.loadImages()}),this)}},{key:"checkImages",value:function checkImages(){var e=this;return new a.default((function(t,n){return e.imageLoadPromise.then(t,n)}))}},{key:"loadImages",value:function loadImages(){var e=this;this.imageLoadPromise=new a.default((function(t,n){e.loader().then(t).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(e)}))})),this.imageLoadPromise.then(null).catch((function(){}))}}]),ImageLoader}()},function(e,t,n){var i,r;r=this,void 0===(i=function(){return r.returnExportsGlobal=function(){"use strict";function a(){var e,t;this.q=[],this.add=function(e){this.q.push(e)},this.call=function(){for(e=0,t=this.q.length;t>e;e++)this.q[e].call()}}function c(e,n){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(n)}else e.resizedAttached=new a,e.resizedAttached.add(n);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var i="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden; opacity: 0;",o="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=i,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+i+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+i+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),"static"==function b(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}(e,"position")&&(e.style.position="relative");var u=e.resizeSensor.childNodes[0],l=u.childNodes[0],c=e.resizeSensor.childNodes[1],k=function(){l.style.width=1e5+"px",l.style.height=1e5+"px",u.scrollLeft=1e5,u.scrollTop=1e5,c.scrollLeft=1e5,c.scrollTop=1e5};k();var d=!1,m=function(){e.resizedAttached&&(d&&(e.resizedAttached.call(),d=!1),t(m))};t(m);var p,h,f,g,r=function(){((f=e.offsetWidth)!=p||(g=e.offsetHeight)!=h)&&(d=!0,p=f,h=g),k()},s=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};s(u,"scroll",r),s(c,"scroll",r)}var t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},e=function(e,t){var n=Object.prototype.toString.call(e),i=this._isCollectionTyped="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"undefined"!=typeof jQuery&&e instanceof window.jQuery||"undefined"!=typeof Elements&&e instanceof window.Elements;if(this._element=e,i)for(var r=0,a=e.length;a>r;r++)c(e[r],t);else c(e,t)};return e.prototype.detach=function(){var t=this._isCollectionTyped,n=this._element;if(t)for(var i=0,r=n.length;r>i;i++)e.detach(n[i]);else e.detach(n)},e.detach=function(e){e.resizeSensor&&(e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)},e}()}.apply(t,[]))||(e.exports=i)},function(e,t,n){"use strict";var i=n(29);function SpokenMath(){}SpokenMath.translate=i.Core.translate.bind(i.Core,null),SpokenMath.translateOrEmptyString=function(e,t){if(""===e)t("");else try{SpokenMath.translate(e,(function(e,n){t(e?n||"":n)}))}catch(e){t("")}},t.a=SpokenMath},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(9),s=function MyscriptHandwriting(){},o=0,u={equation:{resultTypes:["LATEX"],components:[]}};function format(e){var t=[];return r.a.each(e,(function(e){var n={type:"stroke",x:[],y:[]};r.a.each(e.points,(function(e){n.x.push(e.x),n.y.push(e.y)})),t.push(n)})),t}r.a.extend(s.prototype,{TYPE:{EQUATION:"equation"},BASE_URL:"/handwriting/recognise",recognise:function recognise(e){try{if(e.marks.length){var t=function getInk(e,t){return r.a.extend(r.a.clone(u[e]),{components:format(t)})}(e.type,e.marks);!function callRecognition(e,t,n){var i;n.handwritingRecognises&&(t.userResources=[n.handwritingRecognises]),i=o+=1,a.a.request({url:e,security:n.security.getRequestParameters(),action:a.a.ACTION.SET,data:{myscript:{equationInput:JSON.stringify(t)}},success:function success(e){var t;if(i===o){try{t=e.response.data[0].value}catch(e){n.failFn("Could not access response data")}n.successFn(t)}},failure:function failure(e){i===o&&n.failFn("Recognition api failure");try{40001===e.response.meta.code&&console.error(e.response.meta.message)}catch(e){}}})}(this.BASE_URL+e.type,t,e)}else r.a.defer(e.successFn,"")}catch(t){e.failFn(t)}},cancel:function cancel(){o+=1},format:format}),t.a=new s},function(e,t,n){"use strict";var i=n(0),r=n.n(i);t.a=function enhanceWithErrorHandler(e){if(!0!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).includeError)return e;if(r.a.isFunction(e.reset)){var t=e.reset.bind(e);e.reset=function(){t.apply(void 0,arguments);var n=e.error();if(n)throw new Error(n)}}}},function(e,t,n){"use strict";t.a={isRtl:function isRtl(){return"rtl"===window.LearnosityApp._internal.config.textDirection},getTextDirection:function getTextDirection(){return window.LearnosityApp._internal.config.textDirection}}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=(n(5),n(1)),s=n.n(a),o=n(19),u=n(15);t.a=o.a.extend({SELECTORS:{ACCESSIBILITY_DEST:"[data-lrn-access-review-dest]"},initialize:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getTextFn=!!r.a.isFunction(e.getSourceText)&&e.getSourceText,this.ariaLiveFallbackData={overallCorrect:void 0,groups:[{correct:[],incorrect:[],expected:[]}]},this.validationReaderTimeout=-1,this.validationClearTimeout=-1,o.a.prototype.initialize.call(this)},apply:function apply(){this.updateAriaLiveRegion()},restore:function restore(){clearTimeout(this.validationReaderTimeout),clearTimeout(this.validationClearTimeout),this.$el.find(".lrn-accessibility-arialive").attr("aria-hidden",!0).text("")},updateAriaLiveRegion:function updateAriaLiveRegion(e){var t=this,n=this.$el.find(".lrn-accessibility-arialive"),i=(e=e||this.setupDefaultData()).overallCorrect?e.overallCorrect+". ":"";r.a.each(e.groups,function(e){i+=this._buildAnswersString(e)}.bind(this)),n.text("").attr("aria-hidden",!1),clearTimeout(this.validationReaderTimeout),clearTimeout(this.validationClearTimeout),this.validationReaderTimeout=setTimeout((function(){n.text(i),t.validationClearTimeout=setTimeout((function(){n.text("")}),200)}),200)},_buildAnswersString:function _buildAnswersString(e){var t="",n=0===e.correct.length&&0===e.incorrect.length&&0===e.expected.length;return!n&&e.index&&(t+=" Response group "+e.index+": "),!n&&e.label&&(t+=" "+e.label+". "),e.groupCorrect&&(t+=" "+e.groupCorrect+". "),t+=this._buildStringByAnswerStatus("correct",e.correct)+this._buildStringByAnswerStatus("incorrect",e.incorrect)+this._buildStringByAnswerStatus("expected",e.expected)},_buildStringByAnswerStatus:function _buildStringByAnswerStatus(e,t){var n,i=t.constructor===Array,r=i?t.length:1,a=i?t.join(", "):t;return i||t.length?(n=1===r?e+this._pluralizeAnswers(r):r+" "+e+this._pluralizeAnswers(r),a=a.length?": "+a:"",r?n+a+". ":""):""},_pluralizeAnswers:function _pluralizeAnswers(e){return 1===e?" answer":" answers"},setupDefaultData:function setupDefaultData(){var e,t,n,i,r=this,a=[],o=[],l=[];return this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){switch(n=(n=u.a.getSourceElement(s()(this))).clone(),e=u.a.getResponseData(n,r.getTextFn),t=e.responseText,e.responseStatus){case"correct":a.push(t);break;case"incorrect":o.push(t);break;case"no response given - missed":l.push(t)}})),i=this.ariaLiveFallbackData.groups[0],this.ariaLiveFallbackData.overallCorrect=this.$el.find(".lrn-response-validate-wrapper").attr("aria-label"),i.correct=a,i.incorrect=o,i.expected=l,this.ariaLiveFallbackData},convertAlphabeticalResponseToNumerical:function convertAlphabeticalResponseToNumerical(e,t,n){var i=String.fromCharCode(e+97),r=String.fromCharCode(e+65),a=e+1,s=function getResponseIndex(e){return t.find(".lrn_responseIndex:contains(".concat(e,")"))};return n&&"number"!==n?"lower-alpha"===n?s(i):"upper-alpha"===n?s(r):void 0:s(a)},generateRowBasedAriaGroups:function generateRowBasedAriaGroups(e,t){var n=t&&t.labelSelector||"",i=t&&t.correctAnswerSelector||".lrn_correctAnswerList",r=[],a={overallCorrect:this.$el.find(".lrn-response-validate-wrapper").attr("aria-label")},s=this.$el.find(i),o=this.view.displayLogic.validation_stem_numeration;return this.$el.find(e).each(function(e,t){this.addIndividualRowInformation(e,t,{labelSelector:n,$correctAnswers:s,stemNumeration:o,groups:r})}.bind(this)),a.groups=r,a},addIndividualRowInformation:function addIndividualRowInformation(e,t,n){var i,r,a,o,u,l;i=e,r=(l=s()(t)).find(n.labelSelector).addBack(n.labelSelector).text(),a=l.find(".lrn_correct").addBack(".lrn_correct").find(".lrn_item").text(),o=l.find(".lrn_incorrect").addBack(".lrn_incorrect").find(".lrn_item").text(),u=this.convertAlphabeticalResponseToNumerical(e,n.$correctAnswers,n.stemNumeration).siblings(".lrn_responseText").text(),n.groups.push({index:i+1,label:r,correct:a,incorrect:o,expected:u})}})},function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),s=n(1),o=n.n(s),u=n(5),l=n.n(u),c=function Label(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{shouldRenderAriaLabels:!0};this.options=e},d=function Polygon(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e},p=function getAbsolutePosition(e,t){return e/100*t};a.a.extend(c.prototype,{getHtml:function getHtml(){var e=this.getPosition(),t=o()("<li>");return t.css({top:e.top,left:e.left}),t.text(this.options.text).addClass(this.options.className),this.options.shouldRenderAriaLabels&&t.attr("aria-label",this.options.ariaLabel),t[0].outerHTML},getPosition:function getPosition(){var e=this.options.polygon.coordinates[0];return{top:p(e.y,this.options.containerHeight),left:p(e.x,this.options.containerWidth)}}}),a.a.extend(d.prototype,{getHtml:function getHtml(){var e,t=o()("<polygon>"),n=a.a.map(this.getAbsoluteCoordinates(),(function(e){return[e.x,e.y].join(",")}));return this.options.isFocusable&&(e=o()('<a xlink:href="#"/>'),t.attr("aria-hidden","true"),e.append(t)),t.attr("points",n.join(", ")).css({fill:this.options.fill,stroke:this.options.stroke}),e?e.addClass(this.options.className):i.addPolygonClass(t.get(0),this.options.className),a()(this.options.elementAttributes).forEach((function(n,i){(e||t).get(0).setAttribute(i,n)})),(e||t)[0].outerHTML},getAbsoluteCoordinates:function getAbsoluteCoordinates(){return a.a.map(this.options.coordinates,(function(e){return{x:p(e.x,this.options.containerWidth),y:p(e.y,this.options.containerHeight)}}),this)}}),i=l.a.View.extend({SELECTORS:{labels:".lrn-polygons-labels",focusable:"a",polygons:"polygon"},events:{"click a":"preventFocusLinks","touchend a":"preventFocusLinks"},className:"lrn-polygons",initialize:function initialize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.render()},appendLabels:function appendLabels(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.renderLabels(e,a.a.extend({},t,{removeExistingLabels:!1})),this},getShapeElements:function getShapeElements(){return this.options.makeFocusable?this.el.querySelectorAll(this.SELECTORS.focusable):this.el.querySelectorAll(this.SELECTORS.polygons)},preventFocusLinks:function preventFocusLinks(e){e.preventDefault()},removeLabels:function removeLabels(){return this.$labels&&(this.$labels.remove(),delete this.$labels),this},render:function render(){var e=this,t=a()(this.options.polygons).map((function(t){var n=a.a.extend({},t,{isFocusable:!!e.options.makeFocusable,containerWidth:e.options.width,containerHeight:e.options.height});return new d(n)})),n=o()("<svg>").css({width:this.options.width,height:this.options.height});return this.options.renderAsList&&n.attr("role","list"),a()(t).forEach((function(t){var i=t.getHtml();e.options.renderAsList&&(i='<g role="listitem">'.concat(i,"</g>")),n.append(i)})),this.$el.empty().append(n[0].outerHTML),this},renderLabels:function renderLabels(e,t){var n=a.a.extend({ariaHidden:!1,removeExistingLabels:!0},t),i=this.SELECTORS.labels.replace(/^\./,"");return n.removeExistingLabels&&this.removeLabels(),this.$labels=this.$labels||o()("<ul>").addClass(i),n.ariaHidden&&this.$labels.attr("aria-hidden","true"),a.a.each(e,(function(e){var t=this.options.polygons[e.polygonIndex],i=new c(a.a.extend({shouldRenderAriaLabels:!n.ariaHidden,containerWidth:this.options.width,containerHeight:this.options.height,polygon:t},e));this.$labels.append(i.getHtml())}),this),this.$el.append(this.$labels),this}},{polygonHasClass:function polygonHasClass(e,t){return e.classList&&a.a.isFunction(e.classList.contains)?e.classList.contains(t):a.a.contains(i.getPolygonClasses(e),t)},addPolygonClass:function addPolygonClass(e,t){var n;if(t&&!i.polygonHasClass(e,t)){if(e.classList&&a.a.isFunction(e.classList.add))return e.classList.add(t);(n=i.getPolygonClasses(e)).push(t),o()(e).attr("class",n.join(" "))}},getPolygonClasses:function getPolygonClasses(e){var t;return e.classList?a.a.map(e.classList,(function(e){return e})):(t=o()(e).attr("class"),a.a.isString(t)?(t=t.replace(/\s+/g," "),a.a.filter(t.split(" "),(function(e){return e.length}))):[])},removePolygonClass:function removePolygonClass(e,t){var n;return!!i.polygonHasClass(e,t)&&(e.classList&&a.a.isFunction(e.classList.remove)?(e.classList.remove(t),!0):(n=a.a.without(i.getPolygonClasses(e),t),o()(e).attr("class",n.join(" ")),!0))},removePolygonClasses:function removePolygonClasses(e,t){a.a.each(t,(function(t){i.removePolygonClass(e,t)}))},togglePolygonClass:function togglePolygonClass(e,t){return i.polygonHasClass(e,t)?(i.removePolygonClass(e,t),!1):(i.addPolygonClass(e,t),!0)}}),t.a=i},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=id)?"":__t)+'" class="lrn lrn_widget lrn_group lrn_clearfix"><button type="button" class="lrn_btn">'+(null==(__t=labels.checkAnswers)?"":__t)+"</button></div>";return __p}},function(e,t,n){var i=n(57),r=n(58);e.exports=function v4(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||i)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var o=0;o<16;++o)t[a+o]=s[o];return t||r(s)}},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=id)?"":__t)+'" class="lrn lrn_widget"><button type="button" class="'+(null==(__t=displayLogic.submit?"lrn_submit_button":"lrn_save_button")?"":__t)+' lrn_btn"'+(null==(__t=displayLogic.disabled?'disabled="disabled"':"")?"":__t)+"><span>"+(null==(__t=displayLogic.label)?"":__t)+"</span></button></div>";return __p}},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div class="lrn-image-load-error-spinner-container"><div class="lrn_spinner"><div class="lrn_bounce1"></div><div class="lrn_bounce2"></div><div class="lrn_bounce3"></div></div></div>';return __p}},function(module,exports,__webpack_require__){var _=__webpack_require__(0);module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div id="'+(null==(__t=responseId)?"":__t)+'" class="lrn lrn_widget lrn_qr lrn_'+(null==(__t=questionType)?"":__t)+" lrn_clearfix "+(null==(__t=globalExtraClasses)?"":__t)+'">',showInstructorStimulus&&(__p+='<div class="lrn_question"><div class="lrn-instructor-stimulus"><div class="lrn_clearfix"><div class="lrn-instructor-stimulus-content">'+(null==(__t=instructorStimulusContent)?"":__t)+"</div></div></div></div>"),__p+="",_.each(widgetLayoutElements,(function(e){__p+="","stimulus"===e.type&&showStimulus&&(__p+='<div class="lrn_question" data-lrn-widget-component="stimulus"><div class="lrn_stimulus lrn_clearfix"><div class="lrn_stimulus_content lrn_clearfix">'+(null==(__t=stimulusContent)?"":__t)+"</div>",hasVerticalFeatures&&(__p+='<div class="lrn_stimulus_features_vertical"></div>'),__p+="</div></div>"),__p+="","interaction"===e.type&&(__p+='<div class="lrn_response_wrapper',hasOverlayFeatures&&(__p+=" lrn_overlaying_features"),__p+='" data-lrn-widget-component="interaction"><div class="lrn_response lrn_clearfix '+(null==(__t=extraClasses)?"":__t)+'" ',hasOverlayFeatures&&(__p+=' style="visibility: hidden;"'),__p+=' ><div class="lrn-accessibility-arialive" aria-live="assertive" aria-atomic="true" aria-hidden="true"></div>'+(null==(__t=responseContent)?"":__t)+"</div></div>"),__p+=""})),__p+="</div>";return __p}},function(e,t,n){"use strict";var i="http://www.w3.org/2000/svg",r={},a={isCanvasSupported:function isCanvasSupported(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isHtml5AudioSupported:function isHtml5AudioSupported(){return!!document.createElement("audio").canPlayType},isTouchDevice:function isTouchDevice(){return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof DocumentTouch},isTouchScalable:function isTouchScalable(){var e,t=document.querySelector('meta[name="viewport"]'),n=!1;return t&&(n="string"==typeof(e=t.getAttribute("content"))&&e.indexOf("user-scalable=no")>=0),this.isTouchDevice()&&!n},isPointerEventsSupported:function isPointerEventsSupported(){return!!window.PointerEvent},isPassiveEventListenersSupported:function isPassiveEventListenersSupported(){var e=!1;function noop(){}try{window.addEventListener("scroll",noop,{get passive(){return e=!0,!0}}),window.removeEventListener("scroll",noop)}catch(e){}return e},isSvgSupported:function isSvgSupported(){return!!document.createElementNS&&!!document.createElementNS(i,"svg").createSVGRect},isJsonStringifyBroken:function isJsonStringifyBroken(){return!window.JSON||'{"u":"ó"}'!==window.JSON.stringify({u:"ó"})},isPlaceholderSupported:function isPlaceholderSupported(){return"placeholder"in document.createElement("input")},getOs:function getOs(){var e=navigator.appVersion,t="unknown";return-1!==e.indexOf("Win")&&(t="windows"),-1!==e.indexOf("Mac")&&(t="osx"),-1!==e.indexOf("X11")&&(t="unix"),-1!==e.indexOf("Linux")&&(t="linux"),t},getRecorderMediaType:function getRecorderMediaType(e){var t;if("undefined"!=typeof MediaRecorder)for(var n=0;n<e.length;n++)if(MediaRecorder.isTypeSupported(e[n])){t=e[n];break}return t},isTextareaMaxlengthSupported:function isTextareaMaxlengthSupported(){return void 0===document.createElement("textarea").maxLength},isDropzoneSupported:function isDropzoneSupported(){var e=document.createElement("span");return"webkitdropzone"in e||"mozdropzone"in e||"msdropzone"in e||"odropzone"in e},hasLayout:function hasLayout(){return!0===(document.body.currentStyle&&document.body.currentStyle.hasLayout)},isGetUserMediaSupported:function isGetUserMediaSupported(){return"mediaDevices"in navigator&&"getUserMedia"in navigator.mediaDevices},isMediaCaptureSupported:function isMediaCaptureSupported(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}};function getSupport(e,t){return function(){var n=e;return t&&(n+=JSON.stringify(arguments)),r.hasOwnProperty(n)?r[n]:!!a[e]&&(r[n]=a[e].apply(this,arguments),r[n])}}t.a={isCanvasSupported:getSupport("isCanvasSupported"),isHtml5AudioSupported:getSupport("isHtml5AudioSupported"),isTouchDevice:getSupport("isTouchDevice"),isTouchScalable:getSupport("isTouchScalable"),isPointerEventsSupported:getSupport("isPointerEventsSupported"),isPassiveEventListenersSupported:getSupport("isPassiveEventListenersSupported"),isJsonStringifyBroken:getSupport("isJsonStringifyBroken"),isSvgSupported:getSupport("isSvgSupported"),isPlaceholderSupported:getSupport("isPlaceholderSupported"),isGetUserMediaSupported:getSupport("isGetUserMediaSupported"),isMediaCaptureSupported:getSupport("isMediaCaptureSupported"),getOs:getSupport("getOs"),isTextareaMaxlengthSupported:getSupport("isTextareaMaxlengthSupported"),isDropzoneSupported:getSupport("isDropzoneSupported"),hasLayout:getSupport("hasLayout"),getRecorderMediaType:getSupport("getRecorderMediaType",!0)}},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(8);t.a=a.a.extend({initialize:function initialize(){return this.scorer=null,a.a.prototype.initialize.apply(this,arguments)},updateFeedbackAttemptsCount:function updateFeedbackAttemptsCount(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.get("response");t&&(t.feedbackAttemptsCount=e)},processActivityFlags:function processActivityFlags(){this._updateQuestionBasedOnActivity(this.get("question"))},_updateQuestionBasedOnActivity:function _updateQuestionBasedOnActivity(e){var t=this.activity.get("allow_negative_scores");return!r.a.isEmpty(e.validation)&&r.a.isBoolean(t)&&(e.validation.allow_negative_scores=t),e},getJsonToCapture:function getJsonToCapture(){var e=a.a.prototype.getJsonToCapture.apply(this,arguments);return e.question=this._updateQuestionBasedOnActivity(e.question),e},getScorerClass:function getScorerClass(){throw new Error("getScorerClass method not implemented")},canValidateResponse:function canValidateResponse(){return this.getScorer().canValidateResponse()},isResponseValid:function isResponseValid(){return this.getScorer().isValid()},getResponseValidDetailed:function getResponseValidDetailed(){var e={correct:this.isResponseValid()},t=this.getPartialValidation();return r.a.isNull(t)||(e.partial=t),e},getPartialValidation:function getPartialValidation(){var e=this.getScorer();return r.a.isFunction(e.validateIndividualResponses)?e.validateIndividualResponses():null},getPartialScoring:function getPartialScoring(){var e=this.get("question");return!r.a.isObject(e.validation)||!r.a.isBoolean(e.validation.partial_scoring)||e.validation.partial_scoring},getShowPartialValidationUI:function getShowPartialValidationUI(){var e=this.get("question").validation||{};return!!e.scoring_type||(e.show_partial_ui?e.show_partial_ui:void 0)},getShowGlobalValidationUi:function getShowGlobalValidationUi(){var e=this.get("question").validation||{};return e.scoring_type?"exactMatch"===e.scoring_type&&this.showsGlobalValUiForExactMatch():!this.getPartialScoring()},getMappableResponses:function getMappableResponses(){return this.getResponseValue()},getMappableValidation:function getMappableValidation(){return this.getResponseValidDetailed().partial},mapValidationMetadata:function mapValidationMetadata(e){var t,n=this.getMetadata()&&this.getMetadata()[e],i=this.getMappableValidation(),a=this.getMappableResponses(),s=r.a.isArray(n),o=r.a.isArray(a),u=r.a.isArray(i);return!!(s&&o&&u)&&(t={correct:[],incorrect:[],unattempted:[]},r.a.each(r.a.keys(t),(function(e){t[e]=this.mapValidationMetadataToResponseState({targetState:e,metadata:n})}),this),t)},mapValidationMetadataToResponseState:function mapValidationMetadataToResponseState(e){var t=this.getMappableValidation(),n=this.getMappableResponses(),i=[];return r.a.each(n,(function(n,a){(function isTargetResponse(n,i){var a;return"unattempted"===e.targetState?r.a.isNull(n):(a="correct"===e.targetState,r.a.exists(n)&&t[i]===a)})(n,a)&&i.push({value:n,metadata:e.metadata[a],index:a})})),i},showsGlobalValUiForExactMatch:function showsGlobalValUiForExactMatch(){var e=!r.a.contains(["shorttext","formula","formulaV2"],this.get("type"));return"mcq"===this.get("type")&&(e=!!this.get("question").multiple_responses),e},callValidate:function callValidate(e){this.canValidateResponse()&&this.trigger(this.EVENT.CALLVALIDATE,e)},getValidResponse:function getValidResponse(){var e,t,n,i;return this.canValidateResponse()&&((n=(t=this.get("question")).valid_responses||t.validation.valid_responses)?e=(i=r.a.map(n,r.a.first)).length&&i[0]?{value:i}:{value:r.a.pluck(n,"value")}:(this.getScorer().suggestedResponse&&(e=this.getScorer().suggestedResponse()),!e&&t.validation.valid_response&&((e=t.validation.valid_response).value||(e={value:e})))),e||{}}})},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(0),s=n.n(a),o=n(20),u=n(39),l=(n(5),n(19)),c=n(15),d=l.a.extend({SELECTORS:{RESPONSE_WRAPPER:".lrn-response-validate-wrapper"},initialize:function initialize(){this.$responseWrapper=this.view.$(this.SELECTORS.RESPONSE_WRAPPER)},apply:function apply(){c.a.setReviewAriaLabel({$el:this.$responseWrapper,ariaLabel:this.getGlobalWrapperAriaLabel(this.$responseWrapper),keepChildrenVisible:!0})},restore:function restore(){c.a.unsetReviewAriaLabel(this.$responseWrapper)},getGlobalWrapperAriaLabel:function getGlobalWrapperAriaLabel(e){var t="lrn_correct",n="lrn_incorrect",i="response - correct",r="response - incorrect";return e.hasClass(t)?i:e.hasClass(n)?r:""}}),p=l.a.extend({SELECTORS:{ACCESSIBILITY_DEST:"[data-lrn-access-review-dest]"},initialize:function initialize(e,t){this.getTextFn=!!s.a.isFunction(t.getSourceText)&&t.getSourceText},apply:function apply(){this.setAriaLabelsOnDest()},restore:function restore(){this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){c.a.unsetReviewAriaLabel(r()(this))}))},setAriaLabelsOnDest:function setAriaLabelsOnDest(){var e=this;this.view.$(this.SELECTORS.ACCESSIBILITY_DEST).each((function(){var t=r()(this),n=c.a.getSourceElement(t);c.a.setReviewAriaLabel({$el:t,ariaLabel:e.getReviewAriaLabel(n,e.getTextFn),onLabelClick:function onLabelClick(){var n,i,r,a=[".lrn_draggable","input","select"];for(r=0;r<a.length&&(n=a[r],!(i=t.find(n)).length);r++);t.trigger("click"),i&&i.length?i.is("input")||i.is("select")?i.focus():i.trigger("click"):e.view.clearValidationUI()}})}))},getReviewAriaLabel:function getReviewAriaLabel(e,t){e=e.clone();var n=c.a.getResponseData(e,t);return s.a.toArray(n).filter((function(e){return e})).join(" - ")}}),h={STATE:{INITIAL:"initial",REVIEW:"review"},events:{"blur .lrn_validate:not([disabled])":"clearAnnouncedCheckAnswers"},accessibility:{helperTypes:{global:d,live:u.a,label:p}},processAccessibility:function processAccessibility(e){var t=(e=e||{})?e.state:this.STATE.INITIAL,n=this.getAccessibilityHelpers(e);t===this.STATE.REVIEW?s.a.invoke(n,"apply"):s.a.invoke(n,"restore")},getAccessibilityHelpers:function getAccessibilityHelpers(e){return this._a11yHelpers||(this._a11yHelpers=[],s.a.each(this.accessibility.helperTypes,(function(t){this._a11yHelpers.push(new t(this,e))}),this)),this._a11yHelpers},clearAnnouncedCheckAnswers:function clearAnnouncedCheckAnswers(){this.$el.find(".lrn-accessibility-arialive").text("")}},f=n(11),g=o.a.extend({showMasking:!1,events:{"click .lrn_validate:not([disabled])":"validateResponse"},initialize:function initialize(){o.a.prototype.initialize.call(this);var e=this.model,t=e.get("question"),n=e.get("response");this.validationAttempts=n&&n.feedbackAttemptsCount||0,this.validationAttemptsLimit=0,t.feedback_attempts&&(s.a.isString(t.feedback_attempts)&&("unlimited"===t.feedback_attempts.toLowerCase()?t.feedback_attempts=0:t.feedback_attempts=parseInt(t.feedback_attempts,10)),s.a.isNumber(t.feedback_attempts)&&(this.validationAttemptsLimit=t.feedback_attempts))},addRenderingLogic:function addRenderingLogic(){var e=this.model.get("question"),t=this.activity.get("state")===this.activity.STATE.REVIEW,n=this.activity.get("showCorrectAnswers");e.ui_style&&s.a.isString(e.ui_style.validation_stem_numeration)&&(this.displayLogic.validation_stem_numeration=e.ui_style.validation_stem_numeration),this.displayLogic.isReviewState=this.activity.get("state")===this.activity.STATE.REVIEW,this.displayLogic.isPreviewState=this.activity.get("state")===this.activity.STATE.PREVIEW,this.displayLogic.showValidationButton=!t&&e.instant_feedback&&!e.validation_group&&this.model.canValidateResponse(),this.displayLogic.showValidation=!!this.model.canValidateResponse(),this.displayLogic.displayCorrectAnswer=s.a.isUndefined(n)&&t&&this.displayLogic.showValidation||!!n},renderViewContent:function renderViewContent(){o.a.prototype.renderViewContent.apply(this,arguments),this.updateCheckAnswerButtonState()},renderValidatableUI:function renderValidatableUI(){this.displayLogic.showValidation&&this.showValidationUI(),this.displayLogic.displayCorrectAnswer&&this.showCorrectAnswer(),this.processAccessibility({state:this.STATE.REVIEW})},validateResponse:function validateResponse(e,t){var n,i=this.activity.get("state")===this.activity.STATE.REVIEW;if(!i&&(this.getFacade().trigger("beforeValidate",{preventDefault:function preventDefault(){return n=!0}}),n))return;this.model.canValidateResponse()&&(this.showingValidationUI&&this.clearValidationUI(),(this.isValidationAllowed()||t)&&(this.model.hasResponse()||this.displayLogic.displayCorrectAnswer&&i)&&(this.renderValidatableUI(),t||this.incrementValidationAttempts(),this.updateCheckAnswerButtonState(),this.getFacade().trigger("validated")))},isValidationAllowed:function isValidationAllowed(){return 0===this.validationAttemptsLimit||this.validationAttempts<this.validationAttemptsLimit},updateCheckAnswerButtonState:function updateCheckAnswerButtonState(){this.isValidationAllowed()||this.$(".lrn_btn.lrn_validate").attr("disabled","disabled")},incrementValidationAttempts:function incrementValidationAttempts(){var e=this.model,t=e.getResponseValue();s.a.isEqual(t,this.previousResponseValue)||(this.previousResponseValue=s.a.clone(t),this.validationAttempts++,e.updateFeedbackAttemptsCount(this.validationAttempts))},clearValidationUI:function clearValidationUI(){this.$el.removeClass("lrn_display_correct_answer_enabled"),this._restoreDisplayCorrectAnswer(),this.processAccessibility()},showCorrectAnswer:function showCorrectAnswer(){throw new Error("Unimplemented function showCorrectAnswer for question type:"+this.model.get("type"))},callValidateHandler:function callValidateHandler(e){this.clearValidationUI(),this._defaultDisplayCorrectAnswer=this.displayLogic.displayCorrectAnswer;var t=!(!e||!e.showCorrectAnswer&&!e.showCorrectAnswers),n=s.a.isBoolean(e.feedbackAttempts)?e.feedbackAttempts:!!e.feedback_attempts;e&&(this.displayLogic.displayCorrectAnswer=t,this.validateResponse(void 0,!n)),t&&this.showCorrectAnswer()},showValidationUI:function showValidationUI(){var e=this.model.validateResponse();return this.showingValidationUI=!0,!(this.model.getShowGlobalValidationUi()&&(this.model.hasResponse()&&this.$(".lrn-response-validate-wrapper").removeClass("lrn_correct lrn_incorrect").addClass(this.model.isResponseValid()?"lrn_correct":"lrn_incorrect"),!this.model.getShowPartialValidationUI()))&&e},initialisationCompleted:function initialisationCompleted(){o.a.prototype.initialisationCompleted.apply(this,arguments),this.model.canValidateResponse()&&this.model.on(this.model.EVENT.CALLVALIDATE,this.callValidateHandler,this)},masking:function masking(e){this.showMasking=e,this.showMasking?this.enableMaskingUI():this.disableMaskingUI()},createMaskingSVG:function createMaskingSVG(e,t){for(var n="",i=15;i<e+t;i+=15)n+='<line class="lrn-line1" x1="0" y1='.concat(i," x2=").concat(i,' y2="0"></line>');return'\n            <svg class="lrn-mask" xmlns="http://www.w3.org/2000/svg">\n                <rect x="0" y="0" width="100%" height="100%" fill="transparent"/>\n                '.concat(n,"\n            </svg>\n        ")},toggleMasking:function toggleMasking(){if(this.showMasking){var e=arguments[0].currentTarget?r()(arguments[0].currentTarget):arguments[0],t=e.find(".lrn-mask"),n=e[0].clientWidth,i=e[0].clientHeight;this.maskingSVG=this.createMaskingSVG(n,i),t.length?t.remove():e.is(":empty")||(e.append(r()(this.maskingSVG)),this.questionFacade.trigger(this.model.EVENT.MASKED,this.model.get("response_id")))}},enableMaskingUI:function enableMaskingUI(){this.$el.addClass("lrn-masking")},disableMaskingUI:function disableMaskingUI(){this.$el.removeClass("lrn-masking")},clearMaskingUI:function clearMaskingUI(){this.$(".lrn-mask").remove(),this.$(".lrn-mask-strike-through :only-child").unwrap()},getCorrectResponseTextByIndex:function getCorrectResponseTextByIndex(e){throw new Error("Unimplemented function getCorrectResponseTextByIndex for question type: ".concat(this.model.get("type")))},shouldDisplayCorrectAnswerList:function shouldDisplayCorrectAnswerList(){throw new Error("Unimplemented function shouldDisplayCorrectAnswerList for question type: ".concat(this.model.get("type")))},showCorrectAnswerList:function showCorrectAnswerList(){var e,t,n,i;if(this.displayLogic.displayCorrectAnswer&&!this.showingAnswer){if(n=this.displayLogic.isMath||this.model.get("question")&&this.model.get("question").is_math,i=this.model.get("question").type,this.$el.addClass("lrn_display_correct_answer_enabled"),this.$correctAnswerList||(this.$correctAnswerList=this.$(".lrn_correctAnswerList")),e="",t=this.getValidatedResponses(),s.a.contains(["formulaV2","chemistry"],i)){var r,a,showCorrectAnswerList=!1;if(s()(t).forEach((function(e,t){(s.a.isBoolean(e)?!1===e:this.shouldDisplayCorrectAnswerList(e,t))&&(showCorrectAnswerList=!0)}),this),showCorrectAnswerList&&(r=this.model.getValidResponse().value,s.a.isArray(r)&&r.length)){for(var o=0;o<r.length;o++){var u=r[o].value;if(s.a.isString(u)){a="\\("+s.a.escape(u)+"\\)";break}}a&&(e='\n                                <li>\n                                    <span class="lrn_responseIndex">0</span>\n                                    <span class="lrn_responseText">'.concat(a,"</span>\n                                </li>\n                            "))}}else s()(t).forEach((function(n,i){var r=s.a.isBoolean(n)?!1===n:this.shouldDisplayCorrectAnswerList(n,i),a=this.getCorrectResponseTextByIndex(i);if(r){var o="<li>";s.a.isEmpty(a)&&(a="&nbsp;"),t.length&&(o+='<span class="lrn_responseIndex">'.concat(this.getResponseIndexLabel(i),"</span>")),o+='<span class="lrn_responseText">'+a+"</span>",e+=o+="</li>"}}),this);e&&(this.$correctAnswerList.empty().append(e),this.$(".lrn_correctAnswers").removeClass("lrn_hide")),n&&(this.mathquillRendering()?this.renderMathquill():f.a&&f.a.render()),this.showingAnswer=!0}},getValidatedResponses:function getValidatedResponses(){var e,t,n=this.model.validateResponse();if(s.a.isBoolean(n)&&(n=[n]),(!n||!n.length)&&this.model.canValidateResponse()){t=0,e=this.model.getValidResponse(),s.a.isArray(e.value)?t=e.value.length:s.a.isArray(e)?t=e.length:s.a.isString(e)&&(t=1),n=[];for(var i=0;i<t;i++)n.push(!1)}return n},clearCorrectAnswers:function clearCorrectAnswers(){this.showingAnswer&&(this.$(".lrn_correctAnswers").addClass("lrn_hide"),this.$(".lrn_responseIndex").remove(),this.$correctAnswerList&&this.$correctAnswerList.empty(),this.$("[data-lrn-suggested-answer-template]").remove(),this.showingAnswer=!1,this.processAccessibility())},getResponseIndexLabel:function getResponseIndexLabel(e){var t=1;if(this.displayLogic.validation_stem_numeration)switch(this.displayLogic.validation_stem_numeration){case"number":break;case"lower-alpha":t="a";break;case"upper-alpha":t="A";break;default:delete this.displayLogic.validation_stem_numeration}return this.displayLogic.validation_stem_numeration&&"number"!==this.displayLogic.validation_stem_numeration?String.fromCharCode(t.charCodeAt(0)+e):t+e},_restoreDisplayCorrectAnswer:function _restoreDisplayCorrectAnswer(){s.a.isUndefined(this._defaultDisplayCorrectAnswer)||(this.displayLogic.displayCorrectAnswer=this._defaultDisplayCorrectAnswer,delete this._defaultDisplayCorrectAnswer)}});s.a.deepExtend(g.prototype,h);t.a=g},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(26);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var i=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){function ValidatableDataService(){var e,t;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ValidatableDataService);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,(e=_getPrototypeOf(ValidatableDataService)).call.apply(e,[this].concat(i))),function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(_assertThisInitialized(t),"VALIDATION_STATES",{CORRECT:"correct",INCORRECT:"incorrect"}),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ValidatableDataService,e),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(ValidatableDataService,[{key:"getInitialState",value:function getInitialState(){var e=_get(_getPrototypeOf(ValidatableDataService.prototype),"getInitialState",this).call(this),t=this.canShowCorrectAnswers,n=this.isReviewState;return r.a.extend({},e,{validatable:{canShowCorrectAnswers:t,suggestedResponses:n?this.getSuggestedResponses():null,canCheckAnswer:this.canCheckAnswer,validationStemNumeration:this.validationStemNumeration,canShowGlobalValidationUI:this.canShowGlobalValidationUI,validatedEventRequestCount:0,validatedResponses:n&&this.canValidateResponse()?this.getValidatedResponses():null,validationState:this.validationState,isShowingCorrectAnswers:n&&t,feedbackAttemptsLimit:this.feedbackAttemptsLimit,feedbackAttemptsCount:this.feedbackAttemptsCount,ariaLive:{visible:!1},ariaGlobal:{visible:!1}}})}},{key:"getValidatedResponses",value:function getValidatedResponses(){}},{key:"getMappedValidatedResponsesData",value:function getMappedValidatedResponsesData(e){}},{key:"getMappedSuggestedResponsesData",value:function getMappedSuggestedResponsesData(e){}},{key:"getAriaLiveMessage",value:function getAriaLiveMessage(e){}},{key:"getSuggestedResponses",value:function getSuggestedResponses(){var e,t,n,i=this.model;if(!this.canValidateResponse())return{};var a=this.question;return(t=a.valid_responses||r.a.getNested(a,"validation.valid_responses"))?(n=r.a.first(t))&&(e={value:n}):(i.getScorer().suggestedResponse&&(e=i.getScorer().suggestedResponse()),!e&&a.validation&&a.validation.valid_response&&((e=a.validation.valid_response).value||(e={value:e}))),e||{}}},{key:"updateFeedbackAttemptsCount",value:function updateFeedbackAttemptsCount(e){this.model.updateFeedbackAttemptsCount(e)}},{key:"feedbackAttemptsCount",get:function get(){var e=this.model.get("response");return e&&e.feedbackAttemptsCount||0}},{key:"feedbackAttemptsLimit",get:function get(){if(r.a.isUndefined(this.data.feedbackAttempts)){var e=this.question.feedback_attempts||0;r.a.isString(e)&&(e="unlimited"===e.toLowerCase()?1/0:parseInt(e,10)),this.data.feedbackAttempts=e||1/0}return this.data.feedbackAttempts}},{key:"canCheckAnswer",get:function get(){var e=this.question,t=!!this.canValidateResponse();return!this.isReviewState&&e.instant_feedback&&!e.validation_group&&t}},{key:"canShowCorrectAnswers",get:function get(){if(r.a.isUndefined(this.data.canShowCorrectAnswers)){var e=this.activity.get("showCorrectAnswers"),t=this.canValidateResponse(),n=this.isReviewState;if(r.a.isBoolean(e))return e;this.data.canShowCorrectAnswers=!!(r.a.isUndefined(e)&&n&&t)}return this.data.canShowCorrectAnswers}},{key:"validationState",get:function get(){var e=this.isReviewState,t=this.canShowGlobalValidationUI,n=this.VALIDATION_STATES,i=n.CORRECT,a=n.INCORRECT;if(e&&t){var s=this.isResponseValid();if(r.a.isBoolean(s))return s?i:a}return null}},{key:"validationStemNumeration",get:function get(){var e=this.data;if(r.a.isUndefined(e.validationStemNumeration)){var t=this.question.validation_stem_numeration||r.a.getNested(this.question,"ui_style.validation_stem_numeration");r.a.contains(["number","lower-alpha","upper-alpha"],t)||(t="number"),e.validationStemNumeration=t}return e.validationStemNumeration}},{key:"canShowGlobalValidationUI",get:function get(){if(!this.canValidateResponse())return!1;var e=this.question,t=this.scoringType;if(t){var n=function(e){var t=!r.a.contains(["formula","formulaV2"],e.type);return"mcq"===e.type?!!e.multiple_responses:t}(e);return"exactMatch"===t&&n}return!this.model.getPartialScoring()}},{key:"scoringType",get:function get(){return(this.question.validation||{}).scoring_type}}]),ValidatableDataService}(a.a);s.prototype.EXPOSED_METHODS=a.a.prototype.EXPOSED_METHODS.concat(["getValidatedResponses","getMappedValidatedResponsesData","getMappedSuggestedResponsesData","getSuggestedResponses","getAriaLiveMessage","updateFeedbackAttemptsCount"]),t.a=s},function(e,t){!function(e,t,n){"use strict";if(e.MutationObserver&&"undefined"!=typeof HTMLElement){var i,r=0,a=(i=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector,{matchesSelector:function(e,t){return e instanceof HTMLElement&&i.call(e,t)},addMethod:function(e,t,n){var i=e[t];e[t]=function(){return n.length==arguments.length?n.apply(this,arguments):"function"==typeof i?i.apply(this,arguments):void 0}},callCallbacks:function(e,t){t&&t.options.onceOnly&&1==t.firedElems.length&&(e=[e[0]]);for(var n,i=0;n=e[i];i++)n&&n.callback&&n.callback.call(n.elem,n.elem);t&&t.options.onceOnly&&1==t.firedElems.length&&t.me.unbindEventWithSelectorAndCallback.call(t.target,t.selector,t.callback)},checkChildNodesRecursively:function(e,t,n,i){for(var r,s=0;r=e[s];s++)n(r,t,i)&&i.push({callback:t.callback,elem:r}),r.childNodes.length>0&&a.checkChildNodesRecursively(r.childNodes,t,n,i)},mergeArrays:function(e,t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i},toElementsArray:function(t){return void 0===t||"number"==typeof t.length&&t!==e||(t=[t]),t}}),s=function(){var EventsBucket=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return EventsBucket.prototype.addEvent=function(e,t,n,i){var r={target:e,selector:t,options:n,callback:i,firedElems:[]};return this._beforeAdding&&this._beforeAdding(r),this._eventsBucket.push(r),r},EventsBucket.prototype.removeEvent=function(e){for(var t,n=this._eventsBucket.length-1;t=this._eventsBucket[n];n--)if(e(t)){this._beforeRemoving&&this._beforeRemoving(t);var i=this._eventsBucket.splice(n,1);i&&i.length&&(i[0].callback=null)}},EventsBucket.prototype.beforeAdding=function(e){this._beforeAdding=e},EventsBucket.prototype.beforeRemoving=function(e){this._beforeRemoving=e},EventsBucket}(),MutationEvents=function(t,i){var r=new s,o=this,u={fireOnAttributesModification:!1};return r.beforeAdding((function(n){var r,a=n.target;a!==e.document&&a!==e||(a=document.getElementsByTagName("html")[0]),r=new MutationObserver((function(e){i.call(this,e,n)}));var s=t(n.options);r.observe(a,s),n.observer=r,n.me=o})),r.beforeRemoving((function(e){e.observer.disconnect()})),this.bindEvent=function(e,t,n){t=a.mergeArrays(u,t);for(var i=a.toElementsArray(this),s=0;s<i.length;s++)r.addEvent(i[s],e,t,n)},this.unbindEvent=function(){var e=a.toElementsArray(this);r.removeEvent((function(t){for(var i=0;i<e.length;i++)if(this===n||t.target===e[i])return!0;return!1}))},this.unbindEventWithSelectorOrCallback=function(e){var t,i=a.toElementsArray(this),s=e;t="function"==typeof e?function(e){for(var t=0;t<i.length;t++)if((this===n||e.target===i[t])&&e.callback===s)return!0;return!1}:function(t){for(var r=0;r<i.length;r++)if((this===n||t.target===i[r])&&t.selector===e)return!0;return!1},r.removeEvent(t)},this.unbindEventWithSelectorAndCallback=function(e,t){var i=a.toElementsArray(this);r.removeEvent((function(r){for(var a=0;a<i.length;a++)if((this===n||r.target===i[a])&&r.selector===e&&r.callback===t)return!0;return!1}))},this},o=new function(){var e={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};function nodeMatchFunc(e,t,i){return!(!a.matchesSelector(e,t.selector)||(e._id===n&&(e._id=r++),-1!=t.firedElems.indexOf(e._id)))&&(t.firedElems.push(e._id),!0)}var t=(o=new MutationEvents((function getArriveObserverConfig(e){var t={attributes:!1,childList:!0,subtree:!0};return e.fireOnAttributesModification&&(t.attributes=!0),t}),(function onArriveMutation(e,t){e.forEach((function(e){var n=e.addedNodes,i=e.target,r=[];null!==n&&n.length>0?a.checkChildNodesRecursively(n,t,nodeMatchFunc,r):"attributes"===e.type&&nodeMatchFunc(i,t,r)&&r.push({callback:t.callback,elem:i}),a.callCallbacks(r,t)}))}))).bindEvent;return o.bindEvent=function(n,i,r){void 0===r?(r=i,i=e):i=a.mergeArrays(e,i);var s=a.toElementsArray(this);if(i.existing){for(var o=[],u=0;u<s.length;u++)for(var l=s[u].querySelectorAll(n),c=0;c<l.length;c++)o.push({callback:r,elem:l[c]});if(i.onceOnly&&o.length)return r.call(o[0].elem,o[0].elem);setTimeout(a.callCallbacks,1,o)}t.call(this,n,i,r)},o},u=new function(){var e={};function nodeMatchFunc(e,t){return a.matchesSelector(e,t.selector)}var t=(u=new MutationEvents((function getLeaveObserverConfig(){return{childList:!0,subtree:!0}}),(function onLeaveMutation(e,t){e.forEach((function(e){var n=e.removedNodes,i=[];null!==n&&n.length>0&&a.checkChildNodesRecursively(n,t,nodeMatchFunc,i),a.callCallbacks(i,t)}))}))).bindEvent;return u.bindEvent=function(n,i,r){void 0===r?(r=i,i=e):i=a.mergeArrays(e,i),t.call(this,n,i,r)},u};t&&exposeApi(t.fn),exposeApi(HTMLElement.prototype),exposeApi(NodeList.prototype),exposeApi(HTMLCollection.prototype),exposeApi(HTMLDocument.prototype),exposeApi(Window.prototype);var l={};return exposeUnbindApi(o,l,"unbindAllArrive"),exposeUnbindApi(u,l,"unbindAllLeave"),l}function exposeUnbindApi(e,t,n){a.addMethod(t,n,e.unbindEvent),a.addMethod(t,n,e.unbindEventWithSelectorOrCallback),a.addMethod(t,n,e.unbindEventWithSelectorAndCallback)}function exposeApi(e){e.arrive=o.bindEvent,exposeUnbindApi(o,e,"unbindArrive"),e.leave=u.bindEvent,exposeUnbindApi(u,e,"unbindLeave")}}(window,"undefined"==typeof jQuery?null:jQuery,void 0)},function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),s=n(21),o=n(24);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=s.a.actionTypes,l=(_defineProperty(i={},u.QUESTION_TOGGLE_DISABLED,(function(e,t){return{disabled:t.disabled}})),_defineProperty(i,u.QUESTION_SET_MASKING_STATE,(function(e,t){return{inMaskingState:t.inMaskingState,maskingMode:t.maskingMode}})),_defineProperty(i,u.QUESTION_TOGGLE_COMPONENT_MASK,(function(e,t){var n=t.maskId,i=e.maskIds||[],r=i.indexOf(n);return r>=0?i.splice(r,1):i.push(n),{maskIds:i}})),_defineProperty(i,u.QUESTION_UPDATE_RESPONSE_VALUE,(function(){return{isAttempted:!0}})),_defineProperty(i,u.QUESTION_NOTIFY_MATH_RENDERED,(function(e,t){return{cacheRenderedMath:t.cacheRenderedMath}})),_defineProperty(i,u.SET_LEGACY_ATTRIBUTES,(function(e,t){var n={};return a.a.isObject(t.attributes)&&(n.__legacyAttributes=t.attributes),a()({}).assign(e,n)})),i);t.a=Object(o.a)(l,{inMaskingState:!1,disabled:!1})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),a=n(5),s=n.n(a),o=n(21),u=n(22),l=n(4);function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function legacyBeginEmbeddedFeatures(e){var t=e.getDataService(),n=t.isReviewState;if(!r.a.isEmpty(t.get("legacyFeatures"))&&!n)return e.getStore().dispatch(o.a.legacyBeginAllEmbeddedFeatures),!0}var c=function(){function QuestionFacade(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,QuestionFacade);var t=e.model;this.view=e,this.model=t,e.simpleFeatureFacades=e.simpleFeatureFacades||{},t.on(t.EVENT.MODIFIED,(function(){this.facade.trigger("change changed")}),this)}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(QuestionFacade,[{key:"updateInstance",value:function updateInstance(e){this.view.update()}},{key:"facade",get:function get(){var e=this;if(this._facade)return this._facade;var t=this.view,n=this.model,i=n.activity.get("type");if(this._facade={on:s.a.Events.on,off:s.a.Events.off,once:s.a.Events.once,trigger:s.a.Events.trigger,response:{getMetadata:function getMetadata(){return n.getResponseMetadata()},setMetadata:function setMetadata(e){return n.setResponseMetadata(e)}},enable:function enable(){return t.setDisabled(!1)},disable:function disable(){return t.setDisabled(!0)},getMetadata:function getMetadata(){return n.getMetadataForClient()},getQuestion:function getQuestion(){return n.getQuestionJsonForClient()},getResponse:function getResponse(){return n.getResponseJsonForClient()},getScore:function getScore(){return r.a.isFunction(n.getScore)?n.getScore():null},isAttempted:function isAttempted(){return n.isAttempted()},isValid:function isValid(e){if(r.a.isFunction(n.canValidateResponse)&&n.canValidateResponse()&&n.hasResponse())return e?n.getResponseValidDetailed():n.isResponseValid()},validate:function validate(){r.a.isFunction(t.callValidate)&&t.callValidate.apply(t,arguments)},mapValidationMetadata:function mapValidationMetadata(){var e=n.mapValidationMetadata;return e.apply(n,arguments)},checkImages:function checkImages(){if(t.imageLoader)return t.imageLoader.checkImages()},checkValidation:function checkValidation(){var e=n.canValidateResponse;return{has_validation:!!r.a.isFunction(e)&&!!e.apply(n)}},begin:function begin(){legacyBeginEmbeddedFeatures(t)?"begin"===n.get("question").begin_response_on&&t.beginResponse():t.beginResponse()},pause:function pause(){legacyBeginEmbeddedFeatures(t),t.pauseResponse()},stop:function stop(){legacyBeginEmbeddedFeatures(t),t.stopResponse()},masking:function masking(){if(this.isMaskable())return t.masking.apply(t,arguments)},isMaskable:function isMaskable(){return t.maskable||!1},resetValidationUI:function resetValidationUI(){t.getStore().dispatch(u.a.clearValidationUI())},retryLoadImages:function retryLoadImages(){t.imageLoader&&t.imageLoader.loadImages()},simpleFeatures:function simpleFeatures(){return r.a.clone(t.simpleFeatureFacades)},simpleFeature:function simpleFeature(e){return t.simpleFeatureFacades[e]}},"local_practice"===i&&(this._facade.update=function(t){var i=n.get("question").type;if(t.type!==i)return l.a.exception({code:10030,detail:'type: "'.concat(t.type,"\" does not match current question instance's type")});t.response_id=n.get("response_id"),n.setOriginalQuestion(t),e.updateInstance(t)}),n.get("isDynamicContent")){var a=n.dynamic;this._facade.dynamic={nextAttempt:function nextAttempt(){return e.updateInstance(a.nextAttempt())},previousAttempt:function previousAttempt(){return e.updateInstance(a.previousAttempt())},currentAttemptIndex:function currentAttemptIndex(){return a.currentAttemptIndex()},totalAttempts:function totalAttempts(){return a.totalAttempts()}}}return this._facade}}]),QuestionFacade}();t.a=c},function(e,t,n){"use strict";var i,r=n(0),a=n.n(r),s=n(22),o=n(24);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=s.a.actionTypes,l={validatedEventRequestCount:0,validationState:null,validatedResponses:null,suggestedResponses:null,isShowingCorrectAnswers:null,ariaLive:{},ariaGlobal:{}},c=(_defineProperty(i={},u.SET_LEGACY_ATTRIBUTES,(function(e,t){var n={};return a.a.isObject(t.attributes)&&(n.__legacyAttributes=t.attributes),a()({}).assign(e,n)})),_defineProperty(i,u.VALIDATABLE_CHECK_ANSWER,(function(e,t){var n=t.canShowGlobalValidationUI,i=t.isResponseValid,r=t.validatedResponses,s={validatedEventRequestCount:(e||l).validatedEventRequestCount+1,validationState:n&&a.a.isBoolean(i)?i?"correct":"incorrect":null,validatedResponses:r};return a.a.isBoolean(i)&&a()(s).assign({ariaGlobal:{visible:!0,label:i?"correct":"incorrect"}}),s})),_defineProperty(i,u.VALIDATABLE_SHOW_SUGGESTED_ANSWERS,(function(e,t){return{suggestedResponses:t.suggestedResponses,isShowingCorrectAnswers:t.isShowingCorrectAnswers}})),_defineProperty(i,u.VALIDATABLE_CLEAR_VALIDATION_UI,(function(){return l})),_defineProperty(i,u.VALIDATABLE_INCREASE_FEEDBACK_ATTEMPT_COUNT,(function(e){return{feedbackAttemptsCount:e.feedbackAttemptsCount+1}})),_defineProperty(i,u.VALIDATABLE_UPDATE_ARIA_LIVE_DATA,(function(e,t){var n=t.message,i=t.mappedValidatedResponses,r=t.mappedSuggestedResponses,s=t.isShowingCorrectAnswers;return{ariaLive:{visible:!0,message:n,correct:a.a.filter(i,(function(e){return!0===e.validatedValue})),incorrect:a.a.filter(i,(function(e){return!1===e.validatedValue})),suggestedResponses:!!s&&r}}})),_defineProperty(i,u.VALIDATABLE_CLEAR_VALIDATION_ARIA_LIVE,(function(){return{ariaLive:{visible:!1}}})),i);t.a=Object(o.a)(c,l)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={mimeType:"text/html",imageText:" - image - ",imageWithAltText:" - image with description: ",blackListedTags:["script","style","textarea"],blackListedAttributes:["seekSegmentTime","FSCommand","display"],blackListedRegex:/^on/i};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(n(0));function getHeadHTML(e){var t=e.parentElement.querySelector("head").childNodes,n="";return t.length&&i.default.each(t,(function(e){3===e.nodeType&&(n+=e.textContent),1===e.nodeType&&"META"!==e.tagName&&(n+=e.innerHTML)})),n}var r={removeElement:function removeElement(e){e.parentNode.removeChild(e)},getElementAttributes:function getElementAttributes(e){for(var t=e.attributes,n=t.length,i=[],r=0;r<n;r++)i.push(t[r].name);return i},processElements:function processElements(e,t){i.default.forEach(e,(function(e){return t(e),e}))},getParsableData:function getParsableData(e,t){var n=(new DOMParser).parseFromString(e,"text/html"),r=i.default.isString(t)?t:"*",a=n.querySelectorAll(r);return!(function hasParserErrors(e){return e.getElementsByTagName("parsererror").length>0}(n)||!function hasHtmlContent(e){return e.length>0}(a))&&{elements:a,dom:n}},mergeTempDomContent:function mergeTempDomContent(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?getHeadHTML(e.head)+e.body.innerHTML:e.head.innerText+e.body.innerText}};t.default=r},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function whatwgRNG(){return n(i),i}}else{var r=new Array(16);e.exports=function mathRNG(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function bytesToUuid(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pad(e){return("0000"+e).slice(-"0000".length)}function getLength(e){return null==e?void 0:e.length}r.a.mixin({getNested:function getNested(e,t){if(r.a.isObject(e)){var n=t.match(/(.+?)\.(.*)/);return n?this.getNested(e[n[1]],n[2]):e[t]}},cancellableThrottle:function cancellableThrottle(e,t,n){var i,r,a,s,o=t,u=0,l=0,c=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function invokeFunc(t){var n=i,s=r;return i=r=void 0,l=t,a=e.apply(s,n)}function shouldInvoke(e){var n=e-u;return!u||n>=t||n<0||e-l>=o}function timerExpired(){var e=Date.now();if(shouldInvoke(e))return trailingEdge(e);s=setTimeout(timerExpired,function remainingWait(e){var n=e-l,i=t-(e-u);return Math.min(i,o-n)}(e))}function trailingEdge(e){return clearTimeout(s),s=void 0,c&&i?invokeFunc(e):(i=r=void 0,a)}function throttled(){var e=Date.now(),o=shouldInvoke(e);return i=arguments,r=this,u=e,o?void 0===s?function leadingEdge(e){return l=e,s=setTimeout(timerExpired,t),n?invokeFunc(e):a}(u):(clearTimeout(s),s=setTimeout(timerExpired,t),invokeFunc(u)):(void 0===s&&(s=setTimeout(timerExpired,t)),a)}return throttled.cancel=function cancel(){void 0!==s&&clearTimeout(s),u=l=0,i=r=s=void 0},throttled.flush=function flush(){return void 0===s?a:trailingEdge(Date.now())},throttled},deepClone:function deepClone(e){if(!e||"object"!==_typeof(e))return e;if(r.a.isString(e))return String.prototype.slice.call(e);if(r.a.isDate(e))return new Date(e.valueOf());if(r.a.isFunction(e.clone))return e.clone();var t,n;if(r.a.isArray(e))t=Array.prototype.slice.call(e);else{if(e.constructor!=={}.constructor)return e;t={}}for(n in e)e.hasOwnProperty(n)&&(t[n]=r.a.deepClone(e[n]));return t},deepExtend:function deepExtend(){var e,t,n,i,a,s,o=arguments[0]||{},u=1,l=getLength(arguments);if("object"===_typeof(o)||r.a.isFunction(o)||(o={}),1===l)return o;for(;u<l;u++)if(null!=(a=arguments[u]))for(i in a)if(a.hasOwnProperty(i)){if(e=o[i],o===(n=a[i]))continue;n&&((t=r.a.isArray(n))||r.a.isObject(n)&&!r.a.isFunction(n))?(t?(t=!1,s=[]):s=e&&r.a.isObject(e)?e:{},o[i]=r.a.deepExtend(s,n)):void 0!==n&&(o[i]=n)}return o},getDayOfYear:function getDayOfYear(e){var t=new Date(e.getFullYear(),0,1);return Math.ceil((new Date(e)-t)/864e5)},getISOString:function getISOString(){var e=new Date;return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+pad(e.getUTCMonth()+1)+"-"+pad(e.getUTCDate())+"T"+pad(e.getUTCHours())+":"+pad(e.getUTCMinutes())+":"+pad(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},deferWithContext:function deferWithContext(e,t){return function(){var n=Array.prototype.slice.call(arguments);setTimeout((function(){e.apply(t,n)}),1)}},exists:function exists(e){return null!=e},hasProperty:function hasProperty(e,t){var n=t.indexOf(".");return""===t||"[object Object]"===Object.prototype.toString.call(e)&&(-1===n?e.hasOwnProperty(t):e.hasOwnProperty(t.substr(0,n))&&this.hasProperty(e[t.substr(0,n)],t.substring(n+1,getLength(t))))},trim:function trim(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},capitalize:function capitalize(e){return e.charAt(0).toUpperCase()+e.substring(1)},insertCharacters:function insertCharacters(e,t,n,i){var r=i-n,a=e.split("");return a.splice(n,r,t),a.join("")},conditionallyBuildString:function conditionallyBuildString(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return r()(e).reduce((function(e,n,i){return n?e+t+i:e}),"")}});var a,s=r.a,o=n(5),u=n.n(o);a=u.a.View,u.a.View=function(e){this.options=e||{},a.apply(this,arguments),this.delegateEvents()},u.a.View.prototype=a.prototype,u.a.View.extend=a.extend;u.a;var l=n(1),c=n.n(l),d=n(13),p=n(6),h=n(4),f=n(8),g=n(10),m={isQuestionCorrect:function isQuestionCorrect(e){return r.a.isNumber(e.score)&&e.score===e.max_score},isQuestionUnmarked:function isQuestionUnmarked(e){return r.a.isObject(e)&&r.a.isNull(e.score)&&e.attempted&&!e.automarkable}};function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dichotomous_scoring_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dependent_scoring_defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v={"per-question":function(){function PerQuestionScorer(e){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PerQuestionScorer),this.questions=e}return function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(PerQuestionScorer,[{key:"score",value:function score(){return g.a.sumNullableNumbers(r.a.pluck(this.questions,"score"))}},{key:"maxScore",value:function maxScore(){return g.a.sumNullableNumbers(r.a.pluck(this.questions,"max_score"))}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,e=0;e<this.questions.length;e++)this.questions[e].attempted&&(maxScoreOfAttempted=g.a.sumNullableNumbers([maxScoreOfAttempted,this.questions[e].max_score]));return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=0,e=0;e<this.questions.length;e++)m.isQuestionUnmarked(this.questions[e])&&(maxScoreOfUnmarked=g.a.sumNullableNumbers([maxScoreOfUnmarked,this.questions[e].max_score]));return maxScoreOfUnmarked}}]),PerQuestionScorer}(),dichotomous:function(){function DichotomousScorer(e){!function dichotomous_scoring_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DichotomousScorer),this.questions=e}return function dichotomous_scoring_createClass(e,t,n){return t&&dichotomous_scoring_defineProperties(e.prototype,t),n&&dichotomous_scoring_defineProperties(e,n),e}(DichotomousScorer,[{key:"score",value:function score(){var score=g.a.sumNullableNumbers(r.a.pluck(this.questions,"score")),e=this.maxScore();return null===score?null:score<e?0:e}},{key:"maxScore",value:function maxScore(){return g.a.sumNullableNumbers(r.a.pluck(this.questions,"max_score"))}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,e=0;e<this.questions.length;e++)if(this.questions[e].attempted){maxScoreOfAttempted=g.a.sumNullableNumbers(r.a.pluck(this.questions,"max_score"));break}return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=0,e=0;e<this.questions.length;e++)if(m.isQuestionUnmarked(this.questions[e])){maxScoreOfUnmarked=g.a.sumNullableNumbers(r.a.pluck(this.questions,"max_score"));break}return maxScoreOfUnmarked}}]),DichotomousScorer}(),dependent:function(){function DependentScorer(e){!function dependent_scoring_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DependentScorer),this.questions=e}return function dependent_scoring_createClass(e,t,n){return t&&dependent_scoring_defineProperties(e.prototype,t),n&&dependent_scoring_defineProperties(e,n),e}(DependentScorer,[{key:"score",value:function score(){var score;score=r.a.isNumber(g.a.sumNullableNumbers(r.a.pluck(this.questions,"score")))?0:null;for(var e=0;e<this.questions.length&&(score=g.a.sumNullableNumbers([score,this.questions[e].score]),r.a.isNumber(this.questions[e].score)&&!(this.questions[e].score<this.questions[e].max_score));e++);return score}},{key:"maxScore",value:function maxScore(){for(var maxScore=null,e=0;e<this.questions.length&&(maxScore=g.a.sumNullableNumbers([maxScore,this.questions[e].max_score]),r.a.isNumber(this.questions[e].max_score));e++);return maxScore}},{key:"maxScoreOfAttempted",value:function maxScoreOfAttempted(){for(var maxScoreOfAttempted=0,e=0;e<this.questions.length;e++)this.questions[e].attempted&&(maxScoreOfAttempted=g.a.sumNullableNumbers([maxScoreOfAttempted,this.questions[e].max_score]));return maxScoreOfAttempted}},{key:"maxScoreOfUnmarked",value:function maxScoreOfUnmarked(){for(var maxScoreOfUnmarked=null,e=0;e<this.questions.length&&this.questions[e].attempted;e++)if(m.isQuestionUnmarked(this.questions[e])||r.a.isNumber(maxScoreOfUnmarked))maxScoreOfUnmarked=g.a.sumNullableNumbers([maxScoreOfUnmarked,this.questions[e].max_score]);else if(!m.isQuestionCorrect(this.questions[e]))break;return r.a.isNumber(maxScoreOfUnmarked)||(maxScoreOfUnmarked=0),maxScoreOfUnmarked}}]),DependentScorer}()},y=2;function round(e,t){if(!r.a.isNumber(e))return e;var n=Math.pow(10,t);return Math.round(e*n)/n}var b=function GroupScorer(e){if(!e.type)throw"Scoring type is required";if(!r.a.contains(r.a.keys(v),e.type))throw"Scoring type is invalid.";if(!e.questions||!r.a.isArray(e.questions)||!e.questions.length)throw"An array of at least one question score is required";e.questions=r.a.map(e.questions,(function(e){return r.a.isObject(e)?e:{}}));var t=new v[e.type](e.questions);this.score=function(){return round(t.score(),y)},this.maxScore=function(){return round(t.maxScore(),y)},this.maxScoreOfAttempted=function(){return round(t.maxScoreOfAttempted(),y)},this.maxScoreOfUnmarked=function(){return round(t.maxScoreOfUnmarked(),y)},this.attempted=function(){var t=!1;return r.a.forEach(e.questions,(function(e){e.attempted&&(t=!0)})),t},this.unmarked=function(){var t=!1;return r.a.forEach(e.questions,(function(e){m.isQuestionUnmarked(e)&&(t=!0)})),t}},S=u.a.Collection.extend({model:f.a,RESPONSE_ID_MAX_CHAR:100,EVENT:{MODIFIED:f.a.prototype.EVENT.MODIFIED},getModelsValidState:function getModelsValidState(){var e=[];return this.each((function(t){t.validState.valid||(e=e.concat(t.validState.errors))})),{valid:0===e.length,errors:e}},getInvalidQuestionResponses:function getInvalidQuestionResponses(){return this.filter((function(e){return!e.hasAllowedResponse()}))},getResponseIds:function getResponseIds(e){var t=this,n=[];return r.a.each(e,(function(e){n.push(t.get(e).get("response_id"))})),n},getAttemptedResponseIds:function getAttemptedResponseIds(){var e=[];return this.each((function(t){t.isAttempted()&&e.push(t.get("response_id"))})),e},getValidResponseIds:function getValidResponseIds(){var e=[];return this.each((function(t){r.a.isFunction(t.isResponseValid)&&t.isResponseValid()&&e.push(t.get("response_id"))})),e},getValidResponses:function getValidResponses(){var e={};return this.each((function(t){r.a.isFunction(t.canValidateResponse)&&t.canValidateResponse()&&t.hasResponse()&&(e[t.get("response_id")]=t.isResponseValid())})),e},getValidResponsesDetailed:function getValidResponsesDetailed(){var e={};return this.each((function(t){r.a.isFunction(t.canValidateResponse)&&t.canValidateResponse()&&t.hasResponse()&&(e[t.get("response_id")]=t.getResponseValidDetailed())})),e},getToBeCapturedQuestionResponseJson:function getToBeCapturedQuestionResponseJson(){var e=[];return this.each((function(t){t.isCaptured()||t.has("error")||e.push(t.getJsonToCapture())})),e},getToBeSavedQuestionResponseJson:function getToBeSavedQuestionResponseJson(){var e=[];return this.each((function(t){t.toBeSaved()&&!t.has("error")&&e.push(t.getJsonToSave())})),e},getQuestionResponseIdsForReScore:function getQuestionResponseIdsForReScore(){var e=[];return this.each((function(t){t.toBeSaved()||t.has("error")||e.push(t.get("id"))})),e},getResponsesForClient:function getResponsesForClient(){var e={};return this.each((function(t){t.hasResponse()&&(e[t.get("response_id")]=t.getResponseJsonForClient())})),e},getQuestionsJson:function getQuestionsJson(){var e={};return this.each((function(t){e[t.get("response_id")]=t.getQuestionJsonForClient()})),e},getQuestionsMetadata:function getQuestionsMetadata(){var e={};return this.each((function(t){var n=t.getMetadataForClient();n&&(e[t.get("response_id")]=n)})),e},getScores:function getScores(){var e={};return this.each((function(t){var n=r.a.isFunction(t.getScore)?t.getScore():null;r.a.isEmpty(n)||(e[t.get("response_id")]=n)})),e},getGroupScore:function getGroupScore(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.a.isString(e.type)||(e.type="per-question");var t=[];if(r.a.each(e.response_ids,(function(e){var n=r.a.first(this.where({response_id:e}));n?t.push(r.a.isFunction(n.getScore)?n.getScore():null):h.a.log("Response ID not found: "+e)}),this),!r.a.isArray(e.response_ids)||t.length!==e.response_ids.length)return!1;try{var n=new b({type:e.type,questions:t});return{type:e.type,score:n.score(),max_score:n.maxScore(),question_scores:t}}catch(e){return h.a.log("Group scoring error: "+e),!1}},getQuestionResponsesModificationTimes:function getQuestionResponsesModificationTimes(){var e={};return this.each((function(t){e[t.id]=t.getLastModifiedTime()})),e},areThereQuestionsModified:function areThereQuestionsModified(){return this.any((function(e){return e.isModified()}))},areThereQuestionsAnswered:function areThereQuestionsAnswered(){return this.any((function(e){return!r.a.isUndefined(e.getResponseValue())}))},areAllQuestionsSaved:function areAllQuestionsSaved(){return this.every((function(e){return e.isSaved()}))},markAsSavedIfModified:function markAsSavedIfModified(e,t){r.a.each(e,(function(e){var n=this.get(e);n.getLastModifiedTime()===t[n.id]&&n.setAsSaved()}),this)},markAsCaptured:function markAsCaptured(e){r.a.each(e,(function(e){this.get(e).setAsCaptured()}),this)}}),E=n(14),_=u.a.Collection.extend({model:E.a,getFeaturesJson:function getFeaturesJson(){var e={};return this.each((function(t){e[t.get("feature_id")]=t.getFeatureJsonForClient()})),e}}),w=u.a.Collection.extend({EVENT:{MODIFIED:f.a.prototype.EVENT.MODIFIED},model:f.a,jsonAttribute:void 0,groupId:void 0,viewClass:void 0,initialize:function initialize(e,t){this.jsonAttribute=t.jsonAttribute,this.groupId=t.groupId,this.viewClass=t.viewClass,this.id=this.jsonAttribute+"-"+this.groupId},areAllQuestionsAttempted:function areAllQuestionsAttempted(){return this.all((function(e){return e.isAttempted()}))}}),A=n(41),T=n.n(A),x=u.a.View.extend({template:T.a,events:{"click .lrn_btn":"validateQuestions"},initialize:function initialize(){this.setElement(".learnosity-validation.group-"+this.collection.groupId),this.activity=this.options.activity,this.i18n=this.activity.get("i18n"),this.render()},render:function render(){var e=this.$el,t=c()(this.template({id:this.collection.id,labels:this.i18n.labels}));return this.setElement(t),e.replaceWith(t),this},validateQuestions:function validateQuestions(){this.collection.each((function(e,t){e.callValidate&&e.callValidate({feedback_attempts:!0})}))}}),R=n(16),C=n.n(R),M=n(17);function validationError_typeof(e){return(validationError_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==validationError_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function ValidationError(e){var t;return function validationError_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ValidationError),(t=_possibleConstructorReturn(this,_getPrototypeOf(ValidationError).call(this))).name="ValidationError",t.message=e,t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ValidationError,e),ValidationError}(function _extendableBuiltin(e){function ExtendableBuiltin(){e.apply(this,arguments)}return ExtendableBuiltin.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(ExtendableBuiltin,e):ExtendableBuiltin.__proto__=e,ExtendableBuiltin}(Error)),O=u.a.Model.extend({TYPE:{LOCAL_PRACTICE:"local_practice",OFFLINE_APP:"offline_app",SUBMIT_PRACTICE:"submit_practice",TEST:"test"},STATE:{INITIAL:"initial",RESUME:"resume",REVIEW:"review",PREVIEW:"preview"},EVENT:{READY:"ready",SAVE:"save",SAVE_PROGRESSING:"save:progressing",SAVED:"saved",SUBMITTED:"submitted",DISCARDED:"discarded"},ValidationError:I,defaults:{domain:p.a.domain,type:"local_practice",state:"initial",beta_flags:{}},initialize:function initialize(){var e={id:M.a.v4()};r.a.isNumber(this.get("initTime"))?(e.time=this.get("initTime"),e.deviceTime=!1):(e.time=Math.floor(Date.now()/1e3),e.deviceTime=!0),this.questionResponsesReady=!1,this.featuresReady=!1,this.set({initMetadata:e,questionResponses:new S([]),featureModels:new _([]),hasQuestions:r.a.isArray(this.get("questions"))&&this.get("questions").length>0,hasFeatures:r.a.isArray(this.get("features"))&&this.get("features").length>0},{silent:!0}),this.qrGroupFeatureViewsMap={validation_group:x},this.qrGroupFeatures=[],this.hooks={reset:[],unload:[],saveProgress:[]}},init:function init(){var e=this.get("hasQuestions"),t=this.get("hasFeatures");try{this.validateActivity(),e&&this.validateQuestionsJson(this.get("questions")),t&&this.validateFeaturesJson(this.get("features")),this.has("description")&&this.set({description:C.a.sanitizeHTML(this.get("description"))},{silent:!0}),e?(this.initialiseQuestionResponses(this.get("questions")),this.unset("questions",{silent:!0})):this.initialisationCompleted("questionResponses"),t?(this.intialiseFeatures(this.get("features")),this.unset("features",{silent:!0})):this.initialisationCompleted("features")}catch(e){if(!(e instanceof I))throw e;h.a.exception({code:10001,detail:"Activity JSON Poorly formed. "+e,i18n:this.get("i18n")})}},loadFeatureBundles:function loadFeatureBundles(e,t){var n=d.a.getBundleOptions(this.get("beta_flags"));return d.a.requireBundlesForFeatureTypes(e,t,n)},validateActivity:function validateActivity(){if(!r.a.include(this.TYPE,this.get("type")))throw new I('Invalid "type" attribute provided: '+this.get("type"));if(!r.a.include(this.STATE,this.get("state")))throw new I('Invalid "state" attribute provided: '+this.get("state"))},validateQuestionsJson:function validateQuestionsJson(e){for(var t=0;t<e.length;t++){var n=e[t]||{};if(!n.hasOwnProperty("response_id"))throw new I("The question object at index "+t+' is missing the "response_id" attribute');if(!f.a.prototype.VALID_RESPONSE_ID_RE.test(n.response_id))throw new I("The question object at index "+t+' has a "response_id" attribute with invalid characters: '+n.response_id);if(0===c()(".learnosity-response.question-"+n.response_id).length)throw new I("The question object at index "+t+' with "response_id": '+n.response_id+" has no matching DOM element");if(r.a.keys(n).length>1){if(!n.hasOwnProperty("type")&&this.get("consumer").get("requireQuestionType"))throw new I("The question object at index "+t+' is missing the "type" attribute');if(n.hasOwnProperty("type")||(n.type=f.a.prototype.TYPE.AUDIOADV),!r.a.include(f.a.prototype.TYPE,n.type))throw new I("The question object at index "+t+' has an invalid "type" attribute: '+n.type)}else if(this.get("state")!==this.STATE.RESUME&&this.get("state")!==this.STATE.REVIEW)throw new I("The question object at index "+t+' has no attributes, but the activity "state" is not "resume" or "review"')}},validateFeaturesJson:function validateFeaturesJson(e){for(var t=0;t<e.length;t++){var n=e[t]||{};if(!n.hasOwnProperty("feature_id"))throw new I("The feature object at index "+t+' is missing the "feature_id" attribute');if(0===c()(".learnosity-feature.feature-"+n.feature_id).length)throw new I("The feature object at index "+t+' with "feature_id": '+n.feature_id+" has no matching DOM element");if(!n.hasOwnProperty("type")||!r.a.include(E.a.prototype.TYPE,n.type))throw new I("The feature object at index "+t+' has an invalid "type" attribute: '+n.type)}},initialiseQuestionResponses:function initialiseQuestionResponses(e,t){var n=this,i=[],a=d.a.getBundleOptions(this.get("beta_flags"));r.a.each(e,(function(e){e.type===f.a.prototype.TYPE.UNKNOWN||r.a.include(i,e.type)||i.push(e.type)})),d.a.requireBundlesForQuestionTypes(i,(function processLoadedBundles(t){if(r.a.isEmpty(t))h.a.log("No bundles were loaded for the required Question types: "+i.join(", "));else{n.initQuestionResponseModels(t,e);var a=n.get("questionResponses").getModelsValidState();a.valid?(n.initQuestionGroupFeatures(t),n.hasToLoadResponsesIntoQuestionResponses()?n.loadResponsesIntoQuestionResponses(r.a.bind((function(){this.initialisationCompleted("questionResponses")}),n)):n.initialisationCompleted("questionResponses")):h.a.exception({code:10001,detail:"Activity JSON Poorly formed. "+a.errors.join(" |\n"),i18n:n.get("i18n")})}}),a)},initQuestionResponseModels:function initQuestionResponseModels(e,t){var n=this,i=[];r.a.each(t,(function(t){var a={id:f.a.prototype.getIdForResponseId(t.response_id,this.get("user_id"),this.get("consumer").get("id")),response_id:t.response_id,user_id:this.get("user_id")};t.error&&(a.error=t.error,t.type||(t.type=f.a.prototype.TYPE.UNKNOWN)),a.question=t,a.type=t.type;var s=e[t.type],o=new s.Model(a,{state:n.get("state"),type:n.get("type"),attribute_overrides:n.attributes.attribute_overrides});o.setApiVersion(this.get("apiVersion")),s.hasOwnProperty("View")?o.viewClass=s.View:r.a.isFunction(s.getViewFor)?o.viewClass=s.getViewFor(t):h.a.log("Bundle for question: "+t.type+" does not contain View attribute or getViewFor function"),o.setActivity(this),i.push(o)}),this),this.get("questionResponses").add(i)},initQuestionGroupFeatures:function initQuestionGroupFeatures(e){r.a.each(e,(function(e){e.hasOwnProperty("featureViewsMapEntry")&&(this.qrGroupFeatureViewsMap[e.featureViewsMapEntry.jsonAttribute]=e.featureViewsMapEntry.viewClass)}),this),this.get("questionResponses").each((function(e){var t=e.getGroupJsonAttributes();r.a.each(t,(function(t){var n=r.a.find(this.qrGroupFeatures,(function(e){return e.jsonAttribute===t.name&&e.groupId===t.value}));r.a.isUndefined(n)&&(n=new w(null,{jsonAttribute:t.name,groupId:t.value,viewClass:this.qrGroupFeatureViewsMap[t.name]}),this.qrGroupFeatures.push(n)),n.add(e)}),this)}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return!1},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(e){e()},intialiseFeatures:function intialiseFeatures(e){var t=[];r.a.each(e,(function(e){e.type===E.a.prototype.TYPE.UNKNOWN||r.a.include(t,e.type)||t.push(e.type)})),this.loadFeatureBundles(t,r.a.bind((function(n){if(r.a.isEmpty(n))h.a.log("No bundles were loaded for the required Feature types:"+t.join(", "));else{var i=[],a=this;r.a.each(e,(function(e){var t=r.a.first(a.get("featureModels").where({feature_id:e.feature_id}));if(t)t.trigger(t.EVENT.RE_INIT);else{var s=n[e.type],o=new s.Model(e);s.hasOwnProperty("View")?o.viewClass=s.View:r.a.isFunction(s.getViewFor)?o.viewClass=s.getViewFor(e):h.a.log("Bundle for feature: "+e.type+" does not contain View attribute or getViewFor function"),o.activity=a,i.push(o)}})),this.get("featureModels").add(i),this.initialisationCompleted("features")}}),this))},initialisationCompleted:function initialisationCompleted(e){if("questionResponses"===e){var t=this.get("questionResponses").models;this.questionResponsesReady=!0,t&&r.a.each(t,(function(e){return e.trigger(e.EVENT.READY)}))}else"features"===e&&(this.featuresReady=!0);this.questionResponsesReady&&this.featuresReady&&this.trigger(this.EVENT.READY)},append:function append(e){var t,n;try{if(!r.a.isObject(e))throw new I("First parameter must be an object");if(t=r.a.isArray(e.questions)&&e.questions.length>0,n=r.a.isArray(e.features)&&e.features.length>0,!t&&!n)throw new I("Either questions or features must be provided");t&&(this.validateQuestionsJson(e.questions),this.questionResponsesReady=!1),n&&(this.validateFeaturesJson(e.features),this.featuresReady=!1),t&&this.initialiseQuestionResponses(e.questions,!0),n&&this.intialiseFeatures(e.features)}catch(e){if(!(e instanceof I))throw e;h.a.exception({code:10020,detail:e.message,i18n:this.get("i18n")})}},showQuestionNumbers:function showQuestionNumbers(){return this.get("number_questions")&&this.get("questionResponses").length>1},captureQuestionResponses:function captureQuestionResponses(){},save:function save(e){},discard:function discard(e){},getAttemptedResponseIds:function getAttemptedResponseIds(){return this.get("questionResponses").getAttemptedResponseIds()},safeToUnload:function safeToUnload(){if(this.get("type")!==this.TYPE.LOCAL_PRACTICE){if(this.has("questionResponses")&&this.get("questionResponses").areThereQuestionsModified())return!1;var safeToUnload=!r.a.any(this.hooks.unload,(function(e){return!e()}));return safeToUnload&&!this.saving}return!0},validateQuestionsResponses:function validateQuestionsResponses(e){e=e||{},this.get("questionResponses").each((function(t){r.a.isFunction(t.callValidate)&&t.callValidate(e)}))},getValidResponseIds:function getValidResponseIds(){return this.get("questionResponses").getValidResponseIds()}}),N=O.extend({initialize:function initialize(){O.prototype.initialize.call(this),this.responsesToSet={},this.has("responses")&&(this.responsesToSet=this.get("responses"))},validateActivity:function validateActivity(){if(O.prototype.validateActivity.call(this),this.has("responses")&&this.get("state")!==this.STATE.RESUME&&this.get("state")!==this.STATE.REVIEW)throw new this.ValidationError('"responses" attribute can only be provided if "type" is "'+this.STATE.RESUME+'" or "'+this.STATE.REVIEW+'"');if(this.has("responses")&&!this.get("hasQuestions"))throw new this.ValidationError('"responses" attribute can only be provided if "questions" are provided');r.a.each(this.get("responses"),(function(e,t){var n=r.a.find(this.get("questions"),(function(e){return t===e.response_id}));if(r.a.isUndefined(n))throw new this.ValidationError('The response object provided for "response_id": '+t+" has no matching question object")}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return(this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW)&&!r.a.isEmpty(this.responsesToSet)},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(e){r.a.isEmpty(this.responsesToSet)||r.a.each(this.responsesToSet,(function(e,t){this.get("questionResponses").find((function(e){return t===e.get("response_id")})).update({response:e}),delete this.responsesToSet[t]}),this),e()},append:function append(e){e&&r.a.isObject(e.responses)&&r.a.extend(this.responsesToSet,e.responses),O.prototype.append.call(this,e)},captureQuestionResponses:function captureQuestionResponses(){throw new Error("captureQuestionResponses function not supported for Local Practice activities")},save:function save(){throw new Error("save function not supported for Local Practice activities")},discard:function discard(){throw new Error("discard function not supported for Local Practice activities")}}),k=n(9),P=n(3),L=function IndexedStorage(e){if(!window.indexedDB)throw new Error("Storage Error: IndexedDB is not supported");if(r.a.isEmpty(e)||!r.a.isString(e.name)||!r.a.isNumber(e.version)||e.version<1||!r.a.isArray(e.stores)||0===e.stores.length)throw new Error("Storage Error: incorrect database configuration passed");this.name=e.name,this.version=e.version,this.storeDefinitions=e.stores,this.databasePromise=null};function doObjectStoreAction(e,t,n,i){return r.a.isUndefined(i)||r.a.isNull(i)?e[t](n):e[t](n,i)}r.a.extend(L.prototype,{get:function get(e,t){return this._execute("get",(function(n,i,r){var a=n.transaction(e,"readonly").objectStore(e).get(t);a.onsuccess=function(){i(a.result)}}))},set:function set(e,t,n){return this._execute("set",(function(i,r,a){doObjectStoreAction(i.transaction(e,"readwrite").objectStore(e),"put",t,n).onsuccess=r}))},update:function update(e,t,n,i){return this._execute("set",(function(a,s,o){var u=a.transaction(e,"readwrite").objectStore(e),l=u.get(r.a.isEmpty(n)?t[u.keyPath]:n);l.onsuccess=function(){if(!l.result&&i)return o("Storage Error running update: missing object"),void u.transaction.abort();var e,a=r.a.deepExtend({},l.result,t);r.a.isEmpty(n)||(e=n),doObjectStoreAction(u,"put",a,e).onsuccess=s}}))},add:function add(e,t,n){return this._execute("add",(function(i,r,a){doObjectStoreAction(i.transaction(e,"readwrite").objectStore(e),"add",t,n).onsuccess=r}))},remove:function remove(e,t){return this._execute("remove",(function(n,i,r){n.transaction(e,"readwrite").objectStore(e).delete(t).onsuccess=i}))},clear:function clear(e){return this._execute("clear",(function(t,n,i){t.transaction(e,"readwrite").objectStore(e).clear().onsuccess=n}))},getAll:function getAll(e,t){return this._execute("getAll",(function(n,i,a){if(0!==t.length){var s=0,o=[];t=r.a.sortBy(t),n.transaction(e,"readonly").objectStore(e).openCursor().onsuccess=function(e){var n=e.target.result;if(n){for(var r=n.key;r>t[s];)if((s+=1)===t.length)return void i(o);r===t[s]?(o.push(n.value),n.continue()):n.continue(t[s])}else i(o)}}else i([])}))},setAll:function setAll(e,t,n){return this._execute("setAll",(function(i,a,s){if(r.a.isArray(n)&&t.length!==n.length)s("Storage Error running setAll: keys array provided with different length to values array");else{var o=i.transaction(e,"readwrite").objectStore(e),u=-1;!function insertObject(){var e;(u+=1)<t.length?(r.a.isArray(n)&&(e=n[u]),doObjectStoreAction(o,"put",t[u],e).onsuccess=insertObject):a()}()}}))},addAll:function addAll(e,t,n){return this._execute("addAll",(function(i,a,s){if(r.a.isArray(n)&&t.length!==n.length)s("Storage Error running addAll: keys array provided with different length to values array");else{var o=i.transaction(e,"readwrite").objectStore(e),u=-1;!function insertObject(){var e;(u+=1)<t.length?(r.a.isArray(n)&&(e=n[u]),doObjectStoreAction(o,"add",t[u],e).onsuccess=insertObject):a()}()}}))},updateAll:function updateAll(e,t,n,i){return this._execute("setPartials",(function(a,s,o){var u,l=a.transaction(e,"readwrite").objectStore(e);r.a.isArray(n)&&t.length!==n.length?o("Storage Error running updateAll: keys array provided with different length to partialValues array"):!r.a.isArray(n)||r.a.isEmpty(l.keyPath)?r.a.isArray(n)||!r.a.isEmpty(l.keyPath)?(u=-1,function updateObject(){if((u+=1)<t.length){var e=t[u],a=r.a.isArray(n)?n[u]:e[l.keyPath],c=l.get(a);c.onsuccess=function(){if(!c.result)return o("Storage Error running updateAll: missing object for key: "+a),void l.transaction.abort();var t,s=c.result;r.a.isArray(n)&&(t=a),r.a.isString(i)&&e[i]!==s[i]?updateObject():(s=r.a.deepExtend({},s,e),doObjectStoreAction(l,"put",s,t).onsuccess=updateObject)}}else s()}()):o("Storage Error running updateAll: no keys provided and storage doesn't have keyPath"):o("Storage Error running updateAll: keys array provided but storage is defined with keyPath")}))},getAllByIndex:function getAllByIndex(e,t){return this._execute("getAllByIndex",(function(n,i,r){var a=n.transaction(e,"readonly").objectStore(e).index(t),s=[];a.openCursor().onsuccess=function(){var e=event.target.result;e?(s.push(e.value),e.continue()):i(s)}}))},getWithValue:function getWithValue(e,t){return this._execute("getWithValue",(function(n,i,r){var a=n.transaction(e,"readonly").objectStore(e).get(t);a.onsuccess=function(e){i(e.target.result)},a.onerror=function(e){r(e)}}))},getAllByIndexWithValue:function getAllByIndexWithValue(e,t,n,i){return i=i||"==",this._execute("getAllByIndexWithValue",(function(r,a,s){var o,u=r.transaction(e,"readonly").objectStore(e).index(t),l=[];switch(i){case">":o=window.IDBKeyRange.lowerBound(n,!0);break;case">=":o=window.IDBKeyRange.lowerBound(n);break;case"<":o=window.IDBKeyRange.upperBound(n,!0);break;case"<=":o=window.IDBKeyRange.upperBound(n);break;case"==":default:o=window.IDBKeyRange.only(n)}u.openCursor(o).onsuccess=function(){var e=event.target.result;e?(l.push(e.value),e.continue()):a(l)}}))},getAllByIndexBetweenValues:function getAllByIndexBetweenValues(e,t,n,i,r){return r=!!r,this._execute("getAllByIndexWithValue",(function(a,s,o){var u=a.transaction(e,"readonly").objectStore(e).index(t),l=window.IDBKeyRange.bound(n,i,r,r),c=[];u.openCursor(l).onsuccess=function(){var e=event.target.result;e?(c.push(e.value),e.continue()):s(c)}}))},_execute:function _execute(e,t){return this._openDatabase().then((function(n){return new P.default((function(i,r){n.onerror=function(t){r("Storage Error running "+e+": "+(t.target?t.target.error.name+" "+t.target.error.message:t.message))},t(n,i,r)}))}))},_openDatabase:function _openDatabase(){if(!this.databasePromise){var e=this;this.databasePromise=new P.default((function(t,n){try{var i=window.indexedDB.open(e.name,e.version);i.onerror=function(e){n("Storage Error: database open error: "+(e.target?e.target.error:e.toString()))},i.onsuccess=function(e){t(e.target.result)},i.onupgradeneeded=function(t){var i=t.target.result,a=t.target.transaction,s=r.a.difference(i.objectStoreNames,r.a.pluck(e.storeDefinitions,"name"));try{r.a.each(e.storeDefinitions,(function(e){var t,n;t=r.a.contains(i.objectStoreNames,e.name)?a.objectStore(e.name):i.createObjectStore(e.name,e.optionalParameters),n=r.a.difference(t.indexNames,r.a.pluck(e.indices,"name")),r.a.each(e.indices,(function(e){r.a.contains(t.indexNames,e.name)||t.createIndex(e.name,e.keyPath,{unique:!0===e.unique})})),r.a.each(n,(function(e){t.deleteIndex(e)}))})),r.a.each(s,(function(e){i.deleteObjectStore(e)}))}catch(e){n("Storage Error: database create/upgrade error: "+e.toString())}}}catch(e){n("Storage Error: database open error: "+e.toString())}}))}return this.databasePromise}});var D=L,F="questionresponses",q="sessions",V={init:function init(){if(!this.storage)try{this.storage=new D({name:"LrnQuestionsApi",version:1,stores:[{name:F,optionalParameters:{keyPath:"id"},indices:[{name:"needs_pushing",keyPath:"needs_pushing"},{name:"session_id",keyPath:"session_id"}]},{name:q,optionalParameters:{keyPath:"session_id"},indices:[{name:"needs_pushing",keyPath:"needs_pushing"}]}]})}catch(e){this.initError=e}if(this.initError)throw this.initError;return this},formatQuestionResponses:function formatQuestionResponses(e,t){var n=r.a.filter(e,(function(e){return e.consumer_key===t.consumer_key&&e.user_id===t.user_id}));return{qrsData:r.a.map(n,(function(e){var t,n,i,a;if(e.pushed_once)t={id:e.id,response:e.response,pushed_once:e.pushed_once};else{var s=(t=e).question.metadata;s&&s.prepackaged_question&&delete t.question.metadata.prepackaged_question}return n=r.a.getNested(e.question.metadata,"offline.assets"),t.question&&n&&(delete t.question.metadata.offline,i=JSON.stringify(t.question),r.a.map(n,(function(e){return i=i.replace(new RegExp(e.replacement,"g"),e.url)})),t.question=JSON.parse(i)),t.response&&n&&(a=JSON.stringify(t.response),r.a.map(n,(function(e){return a=a.replace(new RegExp(e.replacement,"g"),e.url)})),t.response=JSON.parse(a)),t})),toBePushed:n,security:t}},getQuestionResponses:function getQuestionResponses(e){return this.storage?this.storage.getAll(F,e):P.default.reject(this.initError?this.initError:"Offline storage not initialised")},saveQuestionResponses:function saveQuestionResponses(e,t,n){if(!this.storage)return P.default.reject(this.initError?this.initError:"Offline storage not initialised");var i=this,a=[],s=[],o=[],u=(new Date).getTime(),l=this.getDateString();return r.a.each(e,(function(e,i){var r;e.isCaptured()?(r={id:e.get("id"),response:e.get("response"),mod_date:l,needs_pushing:"true"},t&&(r.session_id=t),o.push(r)):(r={id:e.get("id"),type:e.get("type"),response_id:e.get("response_id"),user_id:e.get("user_id"),question:e.get("question"),response:e.get("response"),creation_date:l,consumer_key:n,order:u+"_"+i,mod_date:l,needs_pushing:"true",pushed_once:!1},t&&(r.session_id=t),s.push(r),a.push(e))})),this.storage.addAll(F,s).then((function(){return r.a.each(a,(function(e){e.set({creation_date:l},{silent:!0}),e.setAsCaptured()})),i.storage.updateAll(F,o)}))},getSession:function getSession(e){var t=this;return this.validateStorage().then((function(){return t.storage.get(q,e)}))},saveSession:function saveSession(e){if(!this.storage)return P.default.reject(this.initError?this.initError:"Offline storage not initialised");var t=this;return this.storage.get(q,e.session_id).then((function(n){return n&&("true"===n.needs_pushing&&(e.questions=r.a.union(n.questions,e.questions)),e=r.a.deepExtend({},n,e)),e.mod_date=t.getDateString(),e.needs_pushing="true",t.storage.set(q,e)}))},submitQuestionResponses:function submitQuestionResponses(e){var t=e.qrsData,n=e.toBePushed,i=e.security,a=this;return 0===t.length?P.default.resolve():new P.default((function(e,n){k.a.request({url:"/push/questionresponses",action:k.a.ACTION.UPDATE,security:i,data:{questionResponses:t},success:function success(t){e()},failure:function failure(e){var t="Failed pushing sessions: "+(e.status>0?e.status+" - ":"");r.a.isObject(e.response)&&e.response.meta?t+=e.response.meta.message:t+=e.response,n(t)}})})).then((function(){var e=r.a.map(n,(function(e){return{id:e.id,mod_date:e.mod_date,needs_pushing:"false"}}));return a.storage.updateAll(F,e,null,"mod_date")})).then((function(){var e=[];if(r.a.each(n,(function(t){t.pushed_once||e.push({id:t.id,pushed_once:!0})})),e.length>0)return a.storage.updateAll(F,e)}))},needsPushing:function needsPushing(e){return P.default.all([this.storage.getAllByIndexWithValue(q,"needs_pushing","true"),this.storage.getAllByIndexWithValue(F,"needs_pushing","true")]).then((function(t){return{sessions:r.a.pluck(r.a.filter(t[0],(function(t){return t.consumer_key===e.consumer_key&&t.user_id===e.user_id})),"session_id"),questions:r.a.pluck(r.a.filter(t[1],(function(t){return t.consumer_key===e.consumer_key&&t.user_id===e.user_id})),"response_id")}}))},pushBySessionId:function pushBySessionId(e,t){var n=this;return this.validateStorage().then((function(){return n.pushQuestionResponses(e,"session_id",t)})).then((function(){return n.pushSession(e,t)}))},pushAll:function pushAll(e){var t=this;return this.validateStorage().then((function(){return t.pushQuestionResponses(e)})).then((function(){return t.pushSessions(e)}))},pushQuestionResponses:function pushQuestionResponses(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"needs_pushing",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"true";return this.storage.getAllByIndexWithValue(F,n,i).then((function(n){return t.formatQuestionResponses(n,e)})).then((function(e){return t.submitQuestionResponses(e)}))},requestToPushSession:function requestToPushSession(e,t){var n=this,i=r.a.filter(t,(function(t){return t.consumer_key===e.consumer_key&&t.user_id===e.user_id}));return 0===i.length?P.default.resolve():new P.default((function(t,n){k.a.request({url:"/push/sessions",action:k.a.ACTION.UPDATE,security:e,data:{sessions:i},success:function success(e){t()},failure:function failure(e){var t="Failed pushing sessions: "+(e.status>0?e.status+" - ":"");r.a.isObject(e.response)&&e.response.meta?t+=e.response.meta.message:t+=e.response,n(t)}})})).then((function(){var e=r.a.map(i,(function(e){return{session_id:e.session_id,mod_date:e.mod_date,needs_pushing:"false"}}));return n.storage.updateAll(q,e,null,"mod_date")}))},pushSession:function pushSession(e,t){var n=this;return this.storage.getWithValue(q,t).then((function(t){return n.requestToPushSession(e,[t])}))},pushSessions:function pushSessions(e){var t=this;return this.storage.getAllByIndexWithValue(q,"needs_pushing","true").then((function(n){return t.requestToPushSession(e,n)}))},getDateString:function getDateString(){var e,t=new Date;return e=t.getUTCFullYear(),e+="-"+(t.getUTCMonth()+1<10?"0":"")+(t.getUTCMonth()+1),e+="-"+(t.getUTCDate()<10?"0":"")+t.getUTCDate(),e+=" "+(t.getUTCHours()<10?"0":"")+t.getUTCHours(),e+=":"+(t.getUTCMinutes()<10?"0":"")+t.getUTCMinutes(),e+=":"+(t.getUTCSeconds()<10?"0":"")+t.getUTCSeconds()},validateStorage:function validateStorage(){return this.storage?P.default.resolve():P.default.reject(this.initError?this.initError:"Offline storage not initialised")}},U=O.extend({initialize:function initialize(){O.prototype.initialize.call(this),this.saving=!1,this.cachedSaveCallArguments=null,this.retrievedQuestionResponsesCache={}},validateActivity:function validateActivity(){O.prototype.validateActivity.call(this);try{V.init()}catch(e){throw new this.ValidationError("initialising an offline_app type but indexed db is not supported in this browser")}if(this.has("session_id")&&!M.a.check.test(this.get("session_id").toLowerCase()))throw new this.ValidationError('"session_id" attribute is not a valid UUID');if(this.get("renderSubmitButton")&&0===c()(".learnosity-submit-button").length)throw new this.ValidationError('"renderSubmitButton" attribute is true, but no DOM element was found to render');if(this.get("renderSaveButton")&&0===c()(".learnosity-save-button").length)throw new this.ValidationError('"renderSaveButton" attribute is true, but no DOM element was found to render');if(this.has("responses"))throw new this.ValidationError('"responses" attribute found in Activity, but not supported for type: '+this.get("type"))},initialiseQuestionResponses:function initialiseQuestionResponses(e,t){if(this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW){var n=this,i=r.a.map(e,(function(e){return f.a.prototype.getIdForResponseId(e.response_id,this.get("user_id"),this.get("consumer").get("id"))}),this);V.getQuestionResponses(i).then((function(a){return r.a.each(a,(function(e){n.retrievedQuestionResponsesCache[e.id]=e})),!n.has("session_id")&&a.length>0&&r.a.isString(a[0].session_id)&&n.set({session_id:a[0].session_id},{silent:!0}),r.a.map(i,(function(i,s){var o=e[s],u=r.a.findWhere(a,{id:i}),l=1===r.a.keys(o).length;return u?(l||n.get("render_with_captured_questions"))&&(o=u.question):t||n.get("captureOnResumeError")&&!l||(o.error=10005),o}))}),(function(t){return n.get("captureOnResumeError")||r.a.each(e,(function(e){e.error=10005})),h.a.log(t),e})).then((function(e){O.prototype.initialiseQuestionResponses.call(n,e,t)}))}else O.prototype.initialiseQuestionResponses.call(this,e,t)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(e){r.a.each(this.retrievedQuestionResponsesCache,(function(e){if(r.a.isObject(e)){var t=this.get("questionResponses").get(e.id);this.retrievedQuestionResponsesCache[e.id]=!0,t.update({creation_date:e.creation_date,response:e.response,saved:!0})}}),this),e()},save:function save(e){if(this.saving)this.cacheSaveCall(Array.prototype.slice.call(arguments));else{this.saving=!0,this.trigger(this.EVENT.SAVE);var t,n=this.get("questionResponses").getInvalidQuestionResponses();if(n.length>0)return this.saving=!1,void this.saveFailedInvalidQuestions(e,n);var i=this.get("questionResponses").getQuestionResponsesModificationTimes(),r=this;e.submit&&!this.has("session_id")?(this.set({session_id:M.a.v4()},{silent:!0}),t=this.get("questionResponses").models):t=this.get("questionResponses").filter((function(e){return e.toBeSaved()})),V.saveQuestionResponses(t,this.get("session_id"),this.get("consumer").get("key")).then((function(){return r.saveSession(e,r.get("questionResponses").pluck("id"))})).then((function(){r.saving=!1,r.saveComplete(e,t,i)}),(function(t){r.saving=!1,r.saveFailed(e,t)})).then((function(){r.callCachedSaveCall()})),e.submit&&this.get("validateOnSubmit")&&this.validateQuestionsResponses()}},saveSession:function saveSession(e,t){if(e&&e.progress&&e.progress({state:"saving",percentage:90,bytesTotal:0,bytesUploaded:0}),!this.has("session_id")||!this.get("consumer").get("dashboardEnabled"))return P.default.resolve();if(!r.a.isString(this.get("id"))||this.get("id").length>36)return P.default.reject('must initialise with an "id" attribute that doesn\'t exceed 36 characters in length');if(!r.a.isString(this.get("name")))return P.default.reject('must initialise with a "name" attribute');if(this.has("description")&&(!r.a.isString(this.get("description"))||this.get("description").length>800))return P.default.reject('initialised with a "description" attribute that is not a valid string of less than 801 characters');var n={session_id:this.get("session_id"),user_id:this.get("user_id"),activity_id:this.get("id"),activity_name:this.get("name"),course_id:this.get("course_id"),consumer_key:this.get("consumer").get("key"),questions:t};return e.submit&&(n.submit=!0),this.has("description")&&(n.activity_description=this.get("description")),this.has("product_id")&&(n.product_id=this.get("product_id")),r.a.isObject(this.get("metadata"))||r.a.isObject(e.metadata)?n.metadata=r.a.extend({},this.get("metadata"),e.metadata):n.metadata={},n.metadata.user_agent=window.navigator.userAgent,V.saveSession(n)},saveComplete:function saveComplete(e,t,n){r.a.each(t,(function(e){e.getLastModifiedTime()===n[e.id]&&e.setAsSaved()})),e&&e.progress&&e.progress({state:"saving",percentage:100,bytesTotal:0,bytesUploaded:0}),e&&(e.submit?this.trigger(this.EVENT.SUBMITTED):this.trigger(this.EVENT.SAVED),e.success&&e.success(r.a.map(t,(function(e){return e.get("response_id")}))))},saveFailed:function saveFailed(e,t){var n={i18n:this.get("i18n")};r.a.isString(t)&&-1!==t.indexOf("ConstraintError")?(n.code=10002,n.detail="At least one of the response_id has been previously provided"):(n.code=10004,n.detail="Save responses failed"+(t?": "+t.toString():"")),h.a.exception(n,e?e.error:null)},saveFailedInvalidQuestions:function saveFailedInvalidQuestions(e,t){var n=[],i=[];r.a.each(t,(function(e){n.push('Question "'+e.get("response_id")+'" of type "'+e.get("type")+'" has an invalid response'),i.push(e.get("response_id"))})),h.a.exception({code:10013,detail:n.join(", "),response_id:i,i18n:this.get("i18n")},e?e.error:null)},discard:function discard(e){throw new Error('"discard" public method is not supported on type: offline_app')},callCachedSaveCall:function callCachedSaveCall(){if(r.a.isArray(this.cachedSaveCallArguments)){var e=this.cachedSaveCallArguments;this.clearCachedSaveCall(),this.save.apply(this,e)}},cacheSaveCall:function cacheSaveCall(e){this.cachedSaveCallArguments=e},clearCachedSaveCall:function clearCachedSaveCall(){this.cachedSaveCallArguments=null}}),j=O.extend({initialize:function initialize(){O.prototype.initialize.call(this),this.questionsBeingCaptured={},this.questionsToCaptureIfResumeFailed={},this.questionResponseIdsToFetch={},this.fetchedQuestionResponses={},this.saving=!1,this.cachedSaveCallArguments=null,this.on(this.EVENT.READY,(function(){this.get("state")!==this.STATE.INITIAL&&this.get("state")!==this.STATE.RESUME||this.captureQuestionResponses()}),this)},validateActivity:function validateActivity(){if(O.prototype.validateActivity.call(this),this.get("consumer").get("dashboardEnabled")){if(!r.a.isString(this.get("id")))throw new this.ValidationError('Valid "id" attribute missing from Activity');if(this.get("id").length>36)throw new this.ValidationError('"id" attribute should not exceed 36 characters');if(this.get("user_id").length>50)throw new this.ValidationError('"user_id" attribute should not exceed 50 characters');if(!r.a.isString(this.get("name")))throw new this.ValidationError('Valid "name" attribute missing from Activity');if(!r.a.isString(this.get("course_id")))throw new this.ValidationError('Valid "course_id" attribute missing from Activity');if(this.has("description")&&(!r.a.isString(this.get("description"))||this.get("description").length>800))throw new this.ValidationError('Provided "description" attribute is not a valid string of less than 801 characters');if(this.has("session_id")&&!M.a.check.test(this.get("session_id").toLowerCase()))throw new this.ValidationError('"session_id" attribute is not a valid UUID')}if(this.get("renderSubmitButton")&&0===c()(".learnosity-submit-button").length)throw new this.ValidationError('"renderSubmitButton" attribute is true, but no DOM element was found to render');if(this.get("renderSaveButton")&&0===c()(".learnosity-save-button").length)throw new this.ValidationError('"renderSaveButton" attribute is true, but no DOM element was found to render');if(this.has("responses"))throw new this.ValidationError('"responses" attribute found in Activity, but not supported for type: '+this.get("type"))},initialiseQuestionResponses:function initialiseQuestionResponses(e,t){var n=this,i=this.makeQuestionResponseIds(r.a.pluck(e,"response_id")),a=this.haveToFetchQuestionResponses(),s=a&&(this.get("render_with_captured_questions")||r.a.some(e,(function(e){return 1===r.a.keys(e).length})));r.a.each(i,(function(e){a&&(n.questionResponseIdsToFetch[e]=!0),(t||a&&n.get("captureOnResumeError"))&&(n.questionsToCaptureIfResumeFailed[e]=!0)})),s?this.getQuestionResponses(i,(function(){var i=[];r.a.each(n.fetchedQuestionResponses,(function(t){if(r.a.isObject(t)){if(!t.hasOwnProperty("question")){var a=f.a.prototype.getResponseId(t.id,n.get("user_id"),n.get("consumer").get("id")),s=r.a.findWhere(e,{response_id:a});10005===t.error&&n.questionsToCaptureIfResumeFailed[t.id]&&r.a.isObject(s)&&r.a.keys(s).length>1?t.question=s:t.question={response_id:a,error:t.error}}i.push(t.question)}})),O.prototype.initialiseQuestionResponses.call(n,i,t)})):O.prototype.initialiseQuestionResponses.call(this,e,t)},makeQuestionResponseIds:function makeQuestionResponseIds(e){return r.a.map(e,(function(e){return f.a.prototype.getIdForResponseId(e,this.get("user_id"),this.get("consumer").get("id"))}),this)},hasToLoadResponsesIntoQuestionResponses:function hasToLoadResponsesIntoQuestionResponses(){return r.a.some(this.questionResponseIdsToFetch)&&this.haveToFetchQuestionResponses()},loadResponsesIntoQuestionResponses:function loadResponsesIntoQuestionResponses(e){var t=this.get("questionResponses").filter((function(e){return r.a.isUndefined(this.fetchedQuestionResponses[e.get("id")])}),this);if(t.length){var n=r.a.pluck(t,"id");this.getQuestionResponses(n,r.a.bind((function(){this.setResponsesFromQuestionResponsesCache(),e()}),this))}else this.setResponsesFromQuestionResponsesCache(),e()},haveToFetchQuestionResponses:function haveToFetchQuestionResponses(){return this.get("state")===this.STATE.RESUME||this.get("state")===this.STATE.REVIEW},setResponsesFromQuestionResponsesCache:function setResponsesFromQuestionResponsesCache(){r.a.each(this.fetchedQuestionResponses,(function(e){if(r.a.isObject(e)){var t=this.get("questionResponses").get(e.id);this.fetchedQuestionResponses[e.id]=!0,this.questionResponseIdsToFetch[e.id]=!1,t.has("question")&&(delete e.question,delete e.type),10005===e.error&&this.questionsToCaptureIfResumeFailed[e.id]&&t.has("question")&&delete e.error,t.update(e)}}),this)},isCapturingQuestions:function isCapturingQuestions(){return!r.a.isEmpty(this.questionsBeingCaptured)},allQuestionsCaptured:function allQuestionsCaptured(){return this.get("questionResponses").every((function(e){return e.isCaptured()}))},captureQuestionResponses:function captureQuestionResponses(){if(this.questionResponsesReady){var e=this.get("questionResponses").getToBeCapturedQuestionResponseJson();if(0!==(e=r.a.filter(e,(function(e){return!this.questionsBeingCaptured[e.id]}),this)).length){var t=this;r.a.each(e,(function(e){this.questionsBeingCaptured[e.id]=!0}),this);var n=function clearCapturingQuestions(){r.a.each(e,(function(e){delete t.questionsBeingCaptured[e.id]}))};k.a.request({url:"/questionresponses",action:k.a.ACTION.SET,security:this.get("security").getRequestParameters(),data:{questionResponses:e},success:function success(e){t.get("questionResponses").markAsCaptured(e.response.data),n(),t.callCachedSaveCall()},failure:function failure(e){var i,a;r.a.isArray(t.cachedSaveCallArguments)&&t.cachedSaveCallArguments.length>0&&r.a.isFunction(t.cachedSaveCallArguments[0].error)&&(a=t.cachedSaveCallArguments[0].error),n(),t.clearCachedSaveCall(),e&&409===e.status?i={code:10002,detail:"At least one of the response_id has been previously provided",i18n:t.get("i18n")}:(i={code:10016,detail:"There was an error trying to capture the questions",i18n:t.get("i18n")},e&&(i.detail+=": "+e.status+" - ",r.a.isObject(e.response)&&e.response.meta?i.detail+=e.response.meta.message:i.detail+=e.response),t.get("uiErrorOnCaptureFailure")||(i.errorUI="none")),h.a.exception(i,a)}})}}},getQuestionResponses:function getQuestionResponses(e,t){var n=this;r.a.each(e,(function(e){this.fetchedQuestionResponses[e]=!0}),this),k.a.request({url:"/questionresponses",action:k.a.ACTION.GET,security:this.get("security").getRequestParameters(),data:{questionResponseIds:e},success:function success(e){r.a.each(e.response.data,(function(e){n.fetchedQuestionResponses[e.id]=e})),t()},failure:function failure(e){h.a.exception({code:10025,detail:"Status: "+e.status+(-1===e.status?", "+e.response:""),i18n:n.get("i18n")})}})},persistQuestionResponses:function persistQuestionResponses(e,t){var n=this,i={},a=function savedSuccessfully(i){var r=n.EVENT,a={state:"saving",percentage:100,bytesTotal:t.totalBytes,bytesUploaded:t.bytesUploaded};if(e&&e.progress&&e.progress(a),n.trigger(r.SAVE_PROGRESSING,a),e){var s=e.submit;s?n.trigger(r.SUBMITTED,{responseIds:i,submit:s}):n.trigger(r.SAVED,{responseIds:i,submit:s}),e.success&&e.success(i)}n.callCachedSaveCall()},s=e.submit||this.has("session_id");if(s&&(i.submit=e.submit,i.state=this.get("state"),i.user_id=this.get("user_id"),i.activity_id=this.get("id"),i.activity_name=this.get("name"),this.has("description")&&(i.activity_description=this.get("description")),i.course_id=this.get("course_id"),this.has("product_id")&&(i.product_id=this.get("product_id")),this.has("session_id")&&(i.session_id=this.get("session_id")),r.a.isObject(this.get("metadata"))||r.a.isObject(e.metadata)?i.metadata=r.a.extend({},this.get("metadata"),e.metadata):i.metadata={},i.metadata.user_agent=window.navigator.userAgent,i.init_metadata=this.get("initMetadata")),i.questionResponses=this.get("questionResponses").getToBeSavedQuestionResponseJson(),i.submit&&(i.questionResponseIdsForReScore=this.get("questionResponses").getQuestionResponseIdsForReScore()),i.questionResponses.length>0||s){var o=this.get("questionResponses").getQuestionResponsesModificationTimes();k.a.request({url:"/questionresponses",action:k.a.ACTION.UPDATE,security:this.get("security").getRequestParameters(),data:i,success:function success(e){var t=e.response.data;n.saving=!1,n.get("questionResponses").markAsSavedIfModified(t,o),a(n.get("questionResponses").getResponseIds(t))},failure:function failure(t){n.saving=!1;var i=e?e.error:void 0,a={code:10004,detail:"Save responses failed",i18n:n.get("i18n")};t&&(a.detail+=": "+t.status,r.a.isObject(t.response)&&t.response.meta?a.detail+=" - "+t.response.meta.message:a.detail+=" - "+t.response),h.a.exception(a,i),n.callCachedSaveCall()}})}else n.saving=!1,a([])},checkSaveProgressThenPersistQuestionResponses:function checkSaveProgressThenPersistQuestionResponses(e){var t=this.EVENT.SAVE_PROGRESSING,n=!0,i=0,a=0;if(r.a.each(this.hooks.saveProgress,(function(e){if(r.a.isFunction(e)){var t=e();n=n&&t.uploadComplete,i+=t.bytesUploaded,a+=t.totalBytes}})),n){var s={state:"saving",percentage:90,bytesTotal:a,bytesUploaded:i};e.progress&&e.progress(s),this.trigger(t,s),this.persistQuestionResponses(e,{totalBytes:a,bytesUploaded:i})}else{var o=Math.round(i/a*85),u={state:a===i?"saving":"uploading",percentage:o,bytesTotal:a,bytesUploaded:i};e.progress&&e.progress(u),this.trigger(t,u),r.a.delay(r.a.bind(this.checkSaveProgressThenPersistQuestionResponses,this),500,e)}},save:function save(e){if(this.isCapturingQuestions()||this.saving)this.cacheSaveCall(Array.prototype.slice.call(arguments));else if(this.allQuestionsCaptured()){this.saving=!0,this.trigger(this.EVENT.SAVE,{submit:e.submit});var t=this.get("questionResponses").getInvalidQuestionResponses();if(t.length){this.saving=!1;var n=e?e.error:void 0,i=[],a=[];r.a.each(t,(function(e){i.push('Question "'+e.get("response_id")+'" of type "'+e.get("type")+'" has an invalid response'),a.push(e.get("response_id"))})),h.a.exception({code:10013,detail:i.join(", "),response_id:a},n)}else this.checkSaveProgressThenPersistQuestionResponses(e),e.submit&&this.get("validateOnSubmit")&&this.validateQuestionsResponses()}else this.cacheSaveCall(Array.prototype.slice.call(arguments)),this.captureQuestionResponses()},discard:function discard(e){var t=this;k.a.request({url:"/questionresponses",action:k.a.ACTION.DELETE,security:this.get("security").getRequestParameters(),data:{activity_id:this.get("id"),activity_name:this.get("name"),course_id:this.get("course_id"),session_id:this.get("session_id")},success:function success(n){r.a.isFunction(e.success)&&e.success(n),t.trigger(t.EVENT.DISCARDED)},failure:function failure(n){var i=e?e.error:void 0,a={code:10021,detail:"Discard responses failed",i18n:t.get("i18n")};n&&(a.detail+=": "+n.status,r.a.isObject(n.response)&&n.response.meta?a.detail+=" - "+n.response.meta.message:a.detail+=" - "+n.response),h.a.exception(a,i)}})},callCachedSaveCall:function callCachedSaveCall(){if(r.a.isArray(this.cachedSaveCallArguments)){var e=this.cachedSaveCallArguments;this.clearCachedSaveCall(),this.save.apply(this,e)}},cacheSaveCall:function cacheSaveCall(e){this.cachedSaveCallArguments=e},clearCachedSaveCall:function clearCachedSaveCall(){this.cachedSaveCallArguments=null},validateQuestionsJson:function validateQuestionsJson(e){var t=this.get("questionResponses").RESPONSE_ID_MAX_CHAR;O.prototype.validateQuestionsJson.call(this,e),e.forEach((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.response_id&&e.response_id.length>t)throw new I("At least one of the response_id is invalid")}))}}),B=N.prototype.TYPE;var H={getActivity:function getActivity(e){var t;switch(e.type){case B.OFFLINE_APP:t=new U(e);break;case B.SUBMIT_PRACTICE:case B.TEST:t=new j(e);break;default:t=new N(e)}return t}},Q=n(7),z=[],G=[],W=null;function beforeUnloadFunc(){if(p.a.unloadInProgress=!0,setTimeout((function(){setTimeout((function(){p.a.unloadInProgress=!1}),1e3)}),1),!r.a.isNull(W))return W();for(var e=0;e<z.length;e++)if(!z[e]())return G[e].labels.onbeforeunload}var $={init:function unload_init(e){Q.a.isChromeApp||window.onbeforeunload===beforeUnloadFunc||(r.a.isNull(window.onbeforeunload)||(W=window.onbeforeunload),window.onbeforeunload=beforeUnloadFunc)},setSafeToUnload:function setSafeToUnload(e,t){z.push(e),G.push(t)},reset:function unload_reset(){Q.a.isChromeApp||window.onbeforeunload!==beforeUnloadFunc||(window.onbeforeunload=null),z=[],G=[]}},Y=u.a.Model.extend({defaults:{domain:p.a.domain},getRequestParameters:function getRequestParameters(){var e={consumer_key:this.get("consumer_key"),domain:this.get("domain"),timestamp:this.get("timestamp"),user_id:this.get("user_id"),signature:this.get("signature")};return this.has("expires")&&(e.expires=this.get("expires")),e},getTimestamp:function getTimestamp(){var e=this.get("timestamp");return Date.UTC(e.substr(0,4),parseInt(e.substr(4,2),10)-1,e.substr(6,2))}}),J=u.a.Model.extend({initialize:function initialize(){this.set({requireQuestionType:!r.a.contains(["0003","0005","0006","0007","0044","0045"],this.get("id"))})},hasPermissions:function hasPermissions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.get("featureFlags")||{},n=t.video_student,i=!1;switch(e){case"fileupload_video":i=!!this.get("processVideo");break;case"video_student":i=r.a.isBoolean(n)&&n}return i}}),X=n(43),K=n.n(X),Z=u.a.View.extend({template:K.a,progressCalledFirstTime:!1,events:{"click .lrn_btn:not(:disabled)":"persistQuestions"},initialize:function initialize(){var e=this.options.activity,t=e.EVENT;this.activity=e,this.i18n=this.activity.get("i18n"),this.app=this.options.app;var n=".learnosity-save-button";this.options.submit&&(n=".learnosity-submit-button");var i=c()(n+".activity-"+this.activity.get("localActRef"));this.activity.has("localActRef")&&i.length>0?this.setElement(i[0]):this.setElement(r.a.find(c()(n),(function(e){for(var t=e.className.split(/\s+/),n=!1,i=0;i<t.length&&!n;i++)n=n||0===t[i].indexOf("activity-");return!n})));var a=this.activity.get("questionResponses");a.bind(a.EVENT.MODIFIED,this.questionModifiedHandler,this),this.progressHandler=this.progressHandler.bind(this),e.on(t.SAVE,this.persistControlInitialState,this),this.options.submit?e.on(t.SUBMITTED,this.activityPersistHandler,this):e.on(t.SAVED,this.activityPersistHandler,this),this.displayLogic={},this.addRenderingLogic(),this.render()},render:function render(){var e=(this.activity.id?this.activity.id:this.cid)+(this.options.submit?"-submit":"-save"),t=this.$el,n=c()(this.template({id:e,displayLogic:this.displayLogic}));return this.setElement(n),t.replaceWith(n),this},addRenderingLogic:function addRenderingLogic(){var e=this.i18n,t=this.activity,n=this.options.submit,i=t.get("questionResponses");this.displayLogic.submit=n,this.displayLogic.label=n?e.labels.submitButtonLabel:e.labels.saveButtonLabel,this.displayLogic.disabled=n&&"resume"===t.get("state")?!i.areThereQuestionsAnswered():!i.areThereQuestionsModified()},persistControlInitialState:function persistControlInitialState(e){if(this.options.submit===e.submit){var t=this.activity;this.$(".lrn_btn").attr("disabled","disabled"),t.off(t.EVENT.SAVE_PROGRESSING,this.progressHandler).on(t.EVENT.SAVE_PROGRESSING,this.progressHandler)}},questionModifiedHandler:function questionModifiedHandler(){!this.activity.saving&&this.$(".lrn_btn:disabled").length>0&&this.$(".lrn_btn").removeAttr("disabled").children("span").text(this.options.submit?this.i18n.labels.submitButtonLabel:this.i18n.labels.saveButtonLabel)},activityPersistHandler:function activityPersistHandler(e){var t=e.responseIds,n=e.submit,i=this.activity;this.options.submit===n&&this.$(".lrn_btn").attr("disabled","disabled"),i.off(i.EVENT.SAVE_PROGRESSING,this.progressHandler),this.successHandler(t)},persistQuestions:function persistQuestions(){this.options.submit?this.app.submit():this.app.save()},successHandler:function successHandler(e){this.$(".lrn_spinner").remove(),this.$(".lrn_btn span").text(this.options.submit?this.i18n.labels.submitComplete:this.i18n.labels.saveComplete),this.progressCalledFirstTime=!1,this.app.options&&this.app.options.saveSuccess&&this.app.options.saveSuccess(e)},progressHandler:function progressHandler(e){if(0===this.$(".lrn_spinner").length){var t=this.options.submit?this.i18n.labels.submitInProgress:this.i18n.labels.saveInProgress;!this.progressCalledFirstTime&&parseInt(e.percentage,10)>85?(this.$(".lrn_btn").prepend('<div class="lrn_spinner"></div>'),this.$(".lrn_btn span").text(t)):this.$(".lrn_btn span").text(t+" "+e.percentage+"%")}this.progressCalledFirstTime=!0,this.app.options&&this.app.options.saveProgress&&this.app.options.saveProgress(e)}}),ee=n(18),te=n(11),ne=n(12);function hasRequiredStringAttributes(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e&&r.a.isString(t)&&t.length>0}))}function performanceTrackTimingStart(e,t){hasRequiredStringAttributes(e,t)&&ne.a.trackTimingStart(e,t)}function performanceTrackTimingEnd(e,t,n,i){r.a.isObject(e)&&hasRequiredStringAttributes(t,n)&&(r.a.isObject(e._internal)||(e._internal={}),r.a.isArray(e._internal.performanceMetrics)||(e._internal.performanceMetrics=[]),e._internal.performanceMetrics.push(ne.a.trackTimingEnd(t,n,null,null,i)))}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ie=function ActivityRenderer(){this.questionViews={},this.featureViews={},this.qrGroupFeatureViews={},this.submitButtonRendered=!1,this.saveButtonRendered=!1,this.pendingViews={}},re="feature-",ae="question-";r.a.extend(ie.prototype,u.a.Events,{EVENT:{VIEWS_RENDERED:"viewsRendered",READY:"ready"},render:function render(e,t){var n,i,a,s,o=this,u=[],l=e.get("featureModels"),c=e.get("questionResponses"),d=e.qrGroupFeatures,p=new P.default((function(e,t){a=e,s=t})).catch(r.a.noop);if(this.app=t,l=l.filter((function(e){return r.a.isUndefined(this.featureViews[e.get("feature_id")])&&!this.pendingViews[re+e.get("feature_id")]}),this),c=c.filter((function(e){return r.a.isUndefined(this.questionViews[e.id])&&!this.pendingViews[ae+e.id]}),this),d=r.a.filter(d,(function(e){return r.a.isUndefined(this.qrGroupFeatureViews[e.get("groupId")])}),this),i="mathquill"===e.get("math_renderer"),n="mathquill"!==e.get("math_renderer")&&(r.a.any(c,(function(e){var t=e.get("question");return t.is_math&&"mathquill"!==t.math_renderer}))||r.a.any(l,(function(e){return e.get("is_math")&&"mathquill"!==e.get("math_renderer")}))),r.a.each(l,(function(e){this.pendingViews[re+e.get("feature_id")]=!0}),this),r.a.each(c,(function(e){this.pendingViews[ae+e.id]=!0}),this),this.once(this.EVENT.VIEWS_RENDERED,(function(){var e=this;i?(performanceTrackTimingStart("render","MathQuill render"),this.renderMathquill().then((function(){performanceTrackTimingEnd(t,"render","MathQuill render"),e.trigger(e.EVENT.READY),a()}))):n?(performanceTrackTimingStart("render","MathJax render"),te.a.once(te.a.EVENT.RENDERED,(function(){performanceTrackTimingEnd(t,"render","MathJax render"),this.trigger(this.EVENT.READY),a()}),this),te.a.isInitalised()?te.a.render():te.a.init()):(this.trigger(this.EVENT.READY),s())}),this),r.a.each(l,r.a.deferWithContext((function(n){var i=r.a.getNested(n,"attributes.type"),a=n.get("feature_id"),s={el:".learnosity-feature.feature-".concat(a),model:n,i18n:e.get("i18n"),activity:e,initialisationCallback:r.a.bind(o.viewIntialised,o,re+n.get("feature_id"),i,a),mathRenderPromise:p};performanceTrackTimingStart("render","view:render ".concat(i," ").concat(a));var u=new n.viewClass(s);o.featureViews[n.get("feature_id")]=u,u.model.on("destroy",(function(){var e=n.get("feature_id");t.removeFeatureFacade(e),delete o.featureViews[e]})),t.addFeatureFacade(n.get("feature_id"),u.getFacade())}))),r.a.each(c,(function(n,i){if(r.a.defer((function(){var a=r.a.getNested(n,"attributes.type"),s=n.get("response_id"),u={el:".learnosity-response.question-".concat(s),model:n,activity:e,initialisationCallback:r.a.bind(o.viewIntialised,o,ae+n.id,a,s),mathRenderPromise:p,questionNumber:i+1,services:{renderViewSimpleFeatures:function renderViewSimpleFeatures(e){o.simpleFeaturesRenderer&&e.renderSimpleFeatures(o.simpleFeaturesRenderer)}}},l=n.viewClass;performanceTrackTimingStart("render","view:render ".concat(a," ").concat(s));var c=new l(u);o.questionViews[n.id]=c,t.addQuestionFacade(n.get("response_id"),c.getFacade())})),n.has("error")){var a=n.get("response_id");switch(n.get("error")){case 10005:u.push({code:10005,detail:"Response id "+a+" not found.",response_id:a});break;case 10007:u.push({code:10007,detail:"Authorisation failed. User id did not match user id of creator for "+a,response_id:a});break;case 10010:u.push({code:10010,detail:"Audio asset expired. The asset for response_id "+a+" is no longer available.",response_id:a});break;default:h.a.log("Unknown error: "+n.get("error")+" on response_id: "+a)}}})),r.a.each(d,(function(t){var n=t.viewClass;if(r.a.isUndefined(n))h.a.log("Question group feature: "+t.id+" doesn`'t have a View defined");else{var i=new n({id:t.id,collection:t,activity:e});o.qrGroupFeatureViews[t.get("groupId")]=i}})),e.get("renderSubmitButton")&&!this.submitButtonRendered&&(new Z({submit:!0,activity:e,app:t}),this.submitButtonRendered=!0),e.get("renderSaveButton")&&!this.saveButtonRendered&&(new Z({submit:!1,activity:e,app:t}),this.saveButtonRendered=!0),u.length>0)for(var f=e.get("i18n"),g=0;g<u.length;g++)u[g].i18n=f,h.a.exception(u[g]);c.length+l.length===0&&this.trigger(this.EVENT.VIEWS_RENDERED)},renderMathquill:function renderMathquill(){return this.mathquillRenderer||(this.mathquillRenderer=new ee.a),this.mathquillRenderer.render()},viewIntialised:function viewIntialised(e,t,n){performanceTrackTimingEnd(this.app,"render","view:render ".concat(t," ").concat(n),!0),this.pendingViews[e]=!1,r.a.every(this.pendingViews,(function(e){return!e}))&&this.trigger(this.EVENT.VIEWS_RENDERED)},renderSimpleFeaturesInWidgets:function renderSimpleFeaturesInWidgets(e){var t=[].concat(_toConsumableArray(r.a.values(this.questionViews)),_toConsumableArray(r.a.values(this.featureViews)));return r()(t).map((function(t){return t.renderSimpleFeatures(e)}))},reset:function reset(){r.a.each(this.questionViews,(function(e){return e.reset&&e.reset()})),r.a.each(this.featureViews,(function(e){return e.reset&&e.reset()})),this.questionViews={},this.featureViews={}}});var se=ie,oe={namespace:"lrn_",dbName:"LrnKeyedStorage",dbVersion:1},ue=function LrnIndexedDB(e){this.options=r.a.extend({},oe,e),this.initialised=!1};r.a.extend(ue.prototype,{get:function get(e){var t=this;return this._initIndexedDB().then((function(){return new P.default((function(n,i){var r=t._indexedDBTransaction().get(_wrapNamespace(e,t.options));r.onsuccess=function(){n(r.result)},r.onerror=function(e){i("INDEXEDDB_ERR: get error: "+(e.target?e.target.errorCode:e.message))}}))}))},set:function set(e,t){var n=this;return this._initIndexedDB().then((function(){return new P.default((function(i,r){var a=n._indexedDBTransaction().put(t,_wrapNamespace(e,n.options));a.onsuccess=i,a.onerror=function(e){r("INDEXEDDB_ERR: set error: "+(e.target?e.target.errorCode:e.message))}}))}))},remove:function remove(e){var t=this;return this._initIndexedDB().then((function(){return new P.default((function(n,i){var r=t._indexedDBTransaction().delete(_wrapNamespace(e,t.options));r.onsuccess=n,r.onerror=function(e){i("INDEXEDDB_ERR: remove error: "+(e.target?e.target.errorCode:e.message))}}))}))},clear:function clear(){var e=this;return this._initIndexedDB().then((function(){return new P.default((function(t,n){var i=e._indexedDBTransaction().clear();i.onsuccess=function(){t()},i.onerror=function(e){n("INDEXEDDB_ERR: clear error: "+(e.target?e.target.errorCode:e.message))}}))}))},_initIndexedDB:function _initIndexedDB(){var e=this;return this.initialised||(this.initialised=!0,this.status=new P.default((function(t,n){e.storage=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;var i=e.storage.open(e.options.dbName,e.options.dbVersion);i.onupgradeneeded=function(e){var t=e.target.result;try{t.createObjectStore("storage")}catch(t){"ConstraintError"!==t.name&&n("INDEXEDDB_ERR: database create/upgrade error: "+(e.target?e.target.errorCode:e.message))}},i.onerror=function(e){n("INDEXEDDB_ERR: database open error: "+(e.target?e.target.errorCode:e.message))},i.onsuccess=function(n){e.database=n.target.result,t()}}))),this.status},_indexedDBTransaction:function _indexedDBTransaction(){return this.database.transaction(["storage"],"readwrite").objectStore("storage")}});var le=function LrnLocalStorage(e){this.options=r.a.extend({},oe,e),this.storage=window.localStorage,this.isIndexed=!1};function _wrapNamespace(e,t){return(t.namespace||"")+e}r.a.extend(le.prototype,{get:function get(e){var t=this.storage.getItem(_wrapNamespace(e,this.options));return P.default.resolve(function _unserialize(e){if("string"!=typeof e)return;try{return JSON.parse(e)}catch(t){return e}}(t))},set:function set(e,t){var n=this,i=function setValue(i,r){n.storage.setItem(_wrapNamespace(e,n.options),function _serialize(e){return JSON.stringify(e)}(t)),i()};return new P.default(i).then(null,(function(){return n.remove(e),new P.default(i)})).then(null,(function(){return P.default.reject("LOCALSTORAGE_ERR: "+this.options.notInitialisedMessage)}))},remove:function remove(e){return this.storage.removeItem(_wrapNamespace(e,this.options)),P.default.resolve()},clear:function clear(){return this.storage.clear(),P.default.resolve()}});var ce=function _supportsIndexedDB(){try{var e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(e){var t=e.open(oe.dbName+"_",oe.dbVersion);return t.onsuccess=t.onerror=function(){e.deleteDatabase(oe.dbName+"_")},!0}return!1}catch(e){return!1}}()?ue:le;var de={DEFAULT_URL_SCHEME:"//",containsURLScheme:function containsURLScheme(e){return new RegExp("[/]{2}").test(e)},isExternalURL:function isExternalURL(e){return new RegExp(".*\\/.*\\.css").test(e)}},pe="/stylesheets/css/clients/";var he={loadClientCSS:function loadClientCSS(e){var t=de.isExternalURL(e);t?de.containsURLScheme(e)||(e=de.DEFAULT_URL_SCHEME+e):e=pe+e,LearnosityApp._internal.loadCss(e,t)}},fe=function triggerEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={detail:e};try{var n=new CustomEvent("learnosity",t);document.dispatchEvent(n)}catch(t){var i=document.createEvent("CustomEvent");i.initCustomEvent("learnosity",!1,!1,e),document.dispatchEvent(i)}},ge=n(38);function _isString(e){return"[object String]"===Object.prototype.toString.call(e)}function isValidConfig(e){return _isString(e)&&e.length>0&&-1===e.indexOf("{:")}var me={init:function analyticsPrimer_init(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.instance,n=e.config,i=void 0===n?{}:n,r=isValidConfig(e.gtmContainerID)?e.gtmContainerID:"",a=isValidConfig(e.gtmDataLayer)?e.gtmDataLayer:"";window.lrnAnalytics=window.lrnAnalytics||[],_isString(e.app)&&window.lrnAnalytics.push({application:e.app,event:"app_init",instance:t,gtmContainerID:r,dataLayerVariable:a,config:i}),e.disableGTM||function loadGTM(e,t){!window[t]&&e&&t&&function(e,t,n,i,r){e[i]=e[i]||[],e[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],s=t.createElement(n),o="dataLayer"!==i?"&l="+i:"";s.async=!0,s.src="https://www.googletagmanager.com/gtm.js?id="+r+o,a.parentNode.insertBefore(s,a)}(window,document,"script",t,e)}(r,a)}},ve=(n(20),n(48),n(47),n(26),n(21),n(51),n(52),n(28),n(49),n(22),n(53),function App(e,t,n,i,a,s){performanceTrackTimingStart("init","app.js init");var o,u,l=this;e&&(o=r.a.deepExtend({},e)),t&&(u=r.a.deepExtend({},t)),this.resetInstanceVariables(),this.options=u,this.i18n=i;var d=new ce;ne.a.setActivity(o),this.options&&(this.options.saveSuccess&&(this.saveEventHandlers.success=this.options.saveSuccess),this.options.saveError&&(this.saveEventHandlers.error=this.options.saveError),this.options.saveProgress&&(this.saveEventHandlers.progress=this.options.saveProgress),this.options.discardSuccess&&(this.discardEventHanders.success=this.options.discardSuccess),this.options.discardError&&(this.discardEventHanders.error=this.options.discardError),this.options.context&&(ne.a.setContext(this.options.context),ne.a.setFullContext(this.options.analyticsContext),delete this.options.context,delete this.options.analyticsContext),this.options.metricsContext&&(k.a.setMetricsContext(this.options.metricsContext),delete this.options.metricsContext)),$.setSafeToUnload(r.a.bind(this.safeToUnload,this),this.i18n),$.init(!(!this.options||!this.options.customUnload)&&this.options.customUnload);var f=function authenticateSuccess(e){var t=e.consumerData,i=ge.a.getTextDirection();if(r.a.isObject(t)&&r.a.isString(t.id)&&r.a.isString(t.name)){var u={id:t.id,name:t.name,key:o.consumer_key,dashboardEnabled:t.dashboardEnabled,assetMaxSize:t.assetMaxSize,processVideo:t.processVideo,featureFlags:t.featureFlags,audioBitDepth:t.audioBitDepth,audioSampleRate:t.audioSampleRate};r.a.isString(t.cssFile)&&(u.cssFile=t.cssFile);var p=new J(u);l.consumer=p,ne.a.setConsumer(p),LearnosityApp._internal.rollbarInstance&&LearnosityApp._internal.rollbarInstance.configure({payload:{consumer:{featureFlags:p.get("featureFlags"),id:p.get("id"),key:p.get("key"),name:p.get("name")}}}),l.consumer.has("cssFile")&&he.loadClientCSS(p.get("cssFile"));var f={apiVersion:a,requestedApiVersion:s,state:o.state,type:o.type,user_id:o.user_id,number_questions:r.a.isBoolean(o.number_questions)&&o.number_questions,questions:o.questions,features:o.features,responses:o.responses,fontsize:o.fontsize,math_renderer:o.math_renderer,id:o.id,name:o.name,course_id:o.course_id||"none",renderSubmitButton:o.renderSubmitButton,renderSaveButton:o.renderSaveButton,validateOnSubmit:r.a.isBoolean(o.validateOnSubmit)&&o.validateOnSubmit,showCorrectAnswers:o.showCorrectAnswers,allow_negative_scores:o.allow_negative_scores,showInstructorStimulus:o.showInstructorStimulus,security:l.security,consumer:l.consumer,i18n:l.i18n,localActRef:n,htmlCleaner:!r.a.isBoolean(o.htmlCleaner)||o.htmlCleaner,uiErrorOnCaptureFailure:!0,captureOnResumeError:r.a.isBoolean(o.captureOnResumeError)&&o.captureOnResumeError,render_with_captured_questions:r.a.isBoolean(o.render_with_captured_questions)&&o.render_with_captured_questions,beta_flags:r.a.isObject(o.beta_flags)?o.beta_flags:{},initTime:e.initTime,skipHighlightAnimation:r.a.isBoolean(o.skip_highlight_animation)&&o.skip_highlight_animation,attribute_overrides:o.attribute_overrides||{}};o.hasOwnProperty("product_id")&&(f.product_id=o.product_id),o.hasOwnProperty("description")&&(f.description=o.description),o.hasOwnProperty("session_id")&&(f.session_id=o.session_id),r.a.isObject(o.metadata)&&(f.metadata=o.metadata),r.a.isBoolean(o.uiErrorOnCaptureFailure)?f.uiErrorOnCaptureFailure=o.uiErrorOnCaptureFailure:r.a.isBoolean(o.retryCaptureOnFailure)&&(f.uiErrorOnCaptureFailure=!o.retryCaptureOnFailure),l.activity=H.getActivity(f),l.activityRenderer=new se,l.activity.once(l.activity.EVENT.READY,(function(){ne.a.trackPageview(),performanceTrackTimingStart("init","app.js render")})),l.activity.on(l.activity.EVENT.READY,(function(){l.activityRenderer.render(l.activity,l)})),l.activityRenderer.on(l.activityRenderer.EVENT.READY,(function(){"ie"===Q.a.browser&&(c()(".lrn_widget").addClass("lrn-ie"),8!==Q.a.version&&9!==Q.a.version||c()(".lrn_widget").addClass("lrn_ie"+Q.a.version)),r.a.isNull(i)||c()(".lrn_widget").attr("dir",i),performanceTrackTimingEnd(l,"init","app.js render"),performanceTrackTimingEnd(l,"init","app.js init"),l.trigger(l.EVENT.READY,l)})),d.set(LearnosityApp.version+"_"+o.consumer_key+"_auth_response",t),l.activity.init()}else h.a.exception({code:10003,detail:"Authentication failed: consumer retrieved is invalid: "+JSON.stringify(t),i18n:l.i18n})};if(o&&(c()(".learnosity-response, .learnosity-feature").each((function(){"ie"!==Q.a.browser||8!==Q.a.version&&9!==Q.a.version||c()(this).addClass("lrn_ie".concat(Q.a.version)),c()(this).is(":empty")&&c()(this).html(l.i18n.labels.loadingInfo)})),this.security=new Y({consumer_key:o.consumer_key,timestamp:o.timestamp,user_id:o.user_id,signature:o.signature}),o.expires&&this.security.set("expires",o.expires),r.a.isObject(p.a.consumer)?r.a.defer((function(){f({consumerData:p.a.consumer})})):this.authenticateAndPreloadBundles(d,o).then(f).catch((function(e){h.a.exception({code:10003,detail:e,i18n:l.i18n,consumerKey:"*".concat(l.security.get("consumer_key"))})}))),r.a.isObject(p.a.analytics)){var g=p.a.disableGTM||p.a.analytics.disableGTM||!0===p.a.analytics.disable;me.init({app:p.a.appContext,disableGTM:g,gtmContainerID:p.a.analytics.gtmContainerID,gtmDataLayer:p.a.analytics.gtmDataLayer,instance:this})}return this});r.a.extend(ve.prototype,{EXPOSED_METHODS:["append","attemptedQuestions","disable","discard","enable","feature","features","getFeatures","getGroupScore","getMetadata","getQuestions","getResponses","getScores","masking","needsPushing","on","once","off","push","question","questions","renderMath","reset","retryQuestionCapture","safeToUnload","save","setScrollablePassagesContextHeight","submit","stopAllSimpleFeatures","unsaveableQuestions","validateQuestions","validQuestions","_analyticsPush","_getPerformanceMetrics"],EVENT:{READY:"ready"},authenticateAndPreloadBundles:function authenticateAndPreloadBundles(e,t){var n=this,i=function authFromOfflineCache(n,i){e.get("".concat(LearnosityApp.version,"_").concat(t.consumer_key,"_auth_response")).then((function(e){e?n({consumerData:e}):i("Authentication failed: no connection and application not ready to run offline")}))},a=new P.default((function(e,a){t.type===O.prototype.TYPE.OFFLINE_APP?i(e,a):(performanceTrackTimingStart("init","app.js authenticate"),k.a.request({url:"/authenticate",security:n.security.getRequestParameters(),success:function success(t){performanceTrackTimingEnd(n,"init","app.js authenticate");var i={consumerData:t.response.data};r.a.isObject(t.response.meta)&&(i.initTime=t.response.meta.timestamp),e(i)},failure:function failure(t){if(t.status>=400&&t.status<600){var n="Authentication failed: ".concat(t.status);r.a.isObject(t.response)&&t.response.meta?n+=" - ".concat(t.response.meta.message):n+=" - ".concat(t.response),a(n)}else-1!==t.status?i(e,a):a("Authentication failed: ".concat(t.response))}}))})),s=function preloadBundlePromise(e){var i,a="features"===e?E.a.prototype.TYPE:f.a.prototype.TYPE,s="features"===e?d.a.requireBundlesForFeatureTypes:d.a.requireBundlesForQuestionTypes,o=d.a.getBundleOptions(t.beta_flags),u=[];if(r.a.isArray(t[e])&&t[e].length){var l=t[e];r.a.each(l,(function(e){e.type!==a.UNKNOWN&&!r.a.include(u,e.type)&&r.a.include(a,e.type)&&u.push(e.type)}))}var c=u&&u.length;return i=new P.default((function(t,n){c?(performanceTrackTimingStart("init","app.js preloadBundles:".concat(e)),s(u,t,o)):t()})),c&&i.then((function(){return performanceTrackTimingEnd(n,"init","app.js preloadBundles:".concat(e))})),i};return P.default.all([a,s("questions"),s("features")]).then((function(e){return e[0]}))},resetInstanceVariables:function resetInstanceVariables(){this.activity=null,this.options=null,this.security=null,this.consumer=null,this.i18n=null,this.saveEventHandlers={},this.discardEventHanders={},this.questionFacades={},this.featureFacades={}},getFacade:function getFacade(e){var t=this,n={};return this.cachedFacade?n=this.cachedFacade:(r.a.each(t.EXPOSED_METHODS,(function(e){n[e]=function(){return t.facadeCtx||(t.facadeCtx=this),r.a.isObject(t.options)&&r.a.isString(r.a.getNested(t,"options.appParent"))||fe({app:window.LearnosityApp._internal.config.appContext,name:"publicMethod",publicMethod:e,args:arguments}),t[e].apply(t,arguments)}})),this.cachedFacade=n),r.a.isObject(e)&&(n=r.a.extend(e,n)),n},_analyticsPush:function _analyticsPush(e){var t="(not set)",n="";if(e)switch(r.a.isString(e.application)&&(t=e.application),e.event&&(n=e.event),n){case"timing_start":e.timing&&e.timing.category&&e.timing.variable&&ne.a.trackTimingStart(e.timing.category,e.timing.variable,e.timing.timestamp);break;case"timing_end":e.timing&&e.timing.category&&e.timing.variable&&ne.a.trackTimingEnd(e.timing.category,e.timing.variable,e.timing.timestamp,t);break;default:ne.a.push(e)}},_getPerformanceMetrics:function _getPerformanceMetrics(){return this._internal.performanceMetrics},reset:function reset(){this.activity&&r.a.each(this.activity.hooks.reset,(function(e){r.a.isFunction(e)&&e()})),this.activityRenderer&&this.activityRenderer.reset(),this.resetInstanceVariables()},save:r.a.cancellableThrottle((function(e,t){if(this.activity){var n=c.a.extend({},this.saveEventHandlers,e),i=this.activity.get("state");if(n.submit=!!t,this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&i!==this.activity.STATE.REVIEW&&i!==this.activity.STATE.PREVIEW)this.activity.save(n);else{var r="Save responses failed. Save called on an invalid activity type / state";n.submit&&(r="Submit responses failed. Submit called on an invalid activity type / state"),h.a.exception({code:10004,detail:r},n.error)}}else this.saveCallCached||(this.saveCallCached=!0,this.once(this.EVENT.INITIALISED,(function(){this.saveCallCached=!1,this.save(e,t)}),this))}),5e3,!0),setScrollablePassagesContextHeight:function setScrollablePassagesContextHeight(e){this.simpleFeaturesRenderer.setScrollablePassagesContextHeight(e)},submit:function submit(e){this.save.cancel&&this.save.cancel(),this.save(e,!0)},discard:function discard(e){var t=c.a.extend({},this.discardEventHanders,e),n=this.activity.get("state");this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&n!==this.activity.STATE.REVIEW&&n!==this.activity.STATE.PREVIEW?this.activity.discard(t):h.a.exception({code:10021,detail:"Discard responses failed. Discard called on an invalid activity type / state"},t.error)},push:function push(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.a.isObject(e)||(e={}),this&&!e.security&&(e.security=this.security.getRequestParameters()),e.security){e.security.domain=p.a.domain;try{V.init()}catch(t){return void h.a.exception({code:10027,detail:t.toString()},e.error)}V.pushAll(e.security).then(e.success,(function(t){h.a.exception({code:10027,detail:t.toString()},e.error)}))}else h.a.exception({code:10027,detail:"Missing security object"},e.error)},needsPushing:function needsPushing(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.a.isObject(e)||(e={}),this&&!e.security&&(e.security=this.security.getRequestParameters()),e.security)if(e.success){try{V.init()}catch(t){return void h.a.exception({code:10028,detail:t.toString()},e.error)}V.needsPushing(e.security).then(e.success,(function(t){h.a.exception({code:10028,detail:t.toString()},e.error)}))}else h.a.exception({code:10028,detail:"Missing success function"},e.error);else h.a.exception({code:10028,detail:"Missing security object"},e.error)},retryQuestionCapture:function retryQuestionCapture(){this.activity&&this.activity.get("type")!==this.activity.TYPE.LOCAL_PRACTICE&&this.activity.captureQuestionResponses()},safeToUnload:function safeToUnload(){return!this.activity||this.activity.safeToUnload()},attemptedQuestions:function attemptedQuestions(){return this.activity?this.activity.getAttemptedResponseIds():[]},renderMath:function renderMath(e){"mathquill"===e||this.activity&&"mathquill"===this.activity.get("math_renderer")?(new ee.a).render():te.a.isInitalised()?te.a.render():te.a.init()},validateQuestions:function validateQuestions(e){this.activity.validateQuestionsResponses(e)},validQuestions:function validQuestions(e){var t;switch(e){case"detailed":t=this.activity.get("questionResponses").getValidResponses();break;case"detailedWithPartials":t=this.activity.get("questionResponses").getValidResponsesDetailed();break;default:t=this.activity.getValidResponseIds()}return t},unsaveableQuestions:function unsaveableQuestions(){return r.a.map(this.activity.get("questionResponses").getInvalidQuestionResponses(),(function(e){return e.get("response_id")}))},disable:function disable(){if(!this.disableEnableAllowed())return!1;var e=r.a.map(this.questionFacades,(function(e){return e.disable()}));return r.a.contains(e,!0)},enable:function enable(){if(!this.disableEnableAllowed())return!1;var e=r.a.map(this.questionFacades,(function(e){return e.enable()}));return r.a.contains(e,!0)},disableEnableAllowed:function disableEnableAllowed(){var e=this.activity.get("state");return e===this.activity.STATE.INITIAL||e===this.activity.STATE.RESUME},question:function question(e){return this.questionFacades[e]},questions:function questions(){return r.a.clone(this.questionFacades)},feature:function feature(e){return this.featureFacades[e]},features:function features(){return r.a.clone(this.featureFacades)},getResponses:function getResponses(){return!!this.activity&&this.activity.get("questionResponses").getResponsesForClient()},getFeatures:function getFeatures(){return!!this.activity&&this.activity.get("featureModels").getFeaturesJson()},getQuestions:function getQuestions(){return!!this.activity&&this.activity.get("questionResponses").getQuestionsJson()},getMetadata:function getMetadata(){return!!this.activity&&this.activity.get("questionResponses").getQuestionsMetadata()},getScores:function getScores(){return!!this.activity&&this.activity.get("questionResponses").getScores()},getGroupScore:function getGroupScore(e){return!!this.activity&&this.activity.get("questionResponses").getGroupScore(e)},append:function append(e){return this.activity.append(e)},masking:function masking(e){if(this.activity){var t,n=arguments[2];if(r.a.isUndefined(arguments[1]))t=r.a.keys(this.questionFacades);else if(r.a.isString(arguments[1]))t=[arguments[1]];else{if(!r.a.isArray(arguments[1]))return!1;t=arguments[1]}return r.a.each(t,(function(t){this.questionFacades[t].masking(e,n)}),this),!0}return!1},on:function on(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1],i=e[2]||this.facadeCtx||window;return u.a.Events.on.apply(this,[t,n,i]),this.getFacade()},off:function off(){return u.a.Events.off.apply(this,arguments),this.getFacade()},once:function once(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1],i=e[2]||this.facadeCtx||window;return u.a.Events.once.apply(this,[t,n,i]),this.getFacade()},trigger:function trigger(){u.a.Events.trigger.apply(this,arguments)},stopAllSimpleFeatures:function stopAllSimpleFeatures(){this.simpleFeaturesRenderer.stopHideAll()},addQuestionFacade:function addQuestionFacade(e,t){this.questionFacades[e]=t},addFeatureFacade:function addFeatureFacade(e,t){this.featureFacades[e]=t},removeFeatureFacade:function removeFeatureFacade(e){var t=this.featureFacades;t&&delete t[e]}});var ye=ve,be=function Tab(e){this.element=c()(e)},Se=[];function eventHandler(e){var t=c()(this),n=t.data("lrn.tab");"click"!==e.type&&0!==e.keyCode&&32!==e.keyCode||(e.preventDefault(),n||(n=new be(this),t.data("lrn.tab",n),Se.push(n)),n.show())}be.prototype.show=function(){var e,t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("tab-target");i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),e=n.next(".tab-content").find(i),this.activate(t.parent("li"),n),this.activate(e,e.parent())},be.prototype.activate=function(e,t){var n=t.find("> .active");n.find("> .dropdown-menu > .active").addBack().removeClass("active"),e.addClass("active").removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n.removeClass("in")};var Ee=function init(){c()("body").on("click.lrn.tab.data-api keypress.lrn.tab.data-api",'.lrn [data-toggle="tab"], .lrn [data-toggle="pill"]',eventHandler)},_e=function reset(){for(var e=Se.length-1;e>=0;e--)c()(Se[e].element).removeData("lrn.tab");Se=[],c()("body").off("click.lrn.tab.data-api")};function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return n}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function simpleFeaturesRenderer_toConsumableArray(e){return function simpleFeaturesRenderer_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function simpleFeaturesRenderer_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function simpleFeaturesRenderer_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var we=[],Ae=/^data\-(.+)$/;function prepareFeatures(e){var t,n=[],i=r()(E.a.prototype.TYPE).without(E.a.prototype.TYPE.UNKNOWN),a=r()(e).map((function(e){var t,a,s=e.getAttribute("data-type");return r()(i).contains(s)?n.push(s):s=E.a.prototype.TYPE.UNKNOWN,{domNode:e,type:s,dataAttributes:(t=e,a={},r.a.each(t.attributes,(function(e){if(Ae.test(e.nodeName)){var t=e.nodeName.match(Ae)[1];a[t]=e.nodeValue}})),r.a.isUndefined(a.simplefeature_id)&&(a.simplefeature_id=M.a.v4()),a)}}));return(t=we).push.apply(t,simpleFeaturesRenderer_toConsumableArray(e)),[a,r()(n).uniq()]}var Te=function SimpleFeaturesRenderer(){this.initCalled=!1};r.a.extend(Te.prototype,{i18n:null,init:function init(e){this.features=[],this.simpleFeatureFacades={},this.i18n=e,this.initCalled=!0,Ee()},getSimpleFeatureNodes:function getSimpleFeatureNodes(e){return c()(".learnosity-feature",e.$scope).not((function(){return this.className.match(/(^|\s)feature-/)||e.excludeWidgets&&c()(this).closest(".lrn_widget").length})).get()},hasInitBeenCalled:function hasInitBeenCalled(){return this.initCalled},render:function render(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSimpleFeatureNodes({excludeWidgets:!0});e=e||{};var i=new P.default((function(i,a){var s=(n=r()(n).difference(we)).length;if(s){var o=_slicedToArray(prepareFeatures(n),2),u=o[0],l=o[1],c={},p=d.a.getBundleOptions(e);d.a.requireBundlesForFeatureTypes(l,(function(e){r.a.isEmpty(e)?a("No bundles were loaded for the required Feature types: "+l.join(", ")):r()(u).each((function(n){var a=e[n.type],o=new a.View({model:new a.Model(n.dataAttributes),el:n.domNode,i18n:t.i18n,initialisationCallback:function initialisationCallback(){--s||(we=r()(we).without(n.domNode),i(c))}});t.registerFacade(o,c),t.features.push(o)}))}),p)}else i()}));return i.catch(h.a.log),i},registerFacade:function registerFacade(e,t){var n=e.model.get("simplefeature_id");n&&(this.simpleFeatureFacades[n]=t[n]=e.getFacade())},reset:function reset(){r()(this.features).invoke("reset"),this.features=[],this.simpleFeatureFacades={},this.initCalled=!1,_e()},setScrollablePassagesContextHeight:function setScrollablePassagesContextHeight(e){r.a.each(this.features,(function(t){"scrollablepassage"===t.model.get("type")&&t.setContextHeight(e)}))},onAppReady:function onAppReady(){r()(this.features).invoke("postAppReady")},stopHideAll:function stopHideAll(){r.a.each(this.features,(function(e){var t=e.getFacade();t.stop(),t.toggle(!1)}))},unregisterFacades:function unregisterFacades(e){var t=this;r.a.chain(e).keys().each((function(e){delete t.simpleFeatureFacades[e]}))}});var xe={addData:"Add Data",audioplaybackerror:"Unable to play audio asset. Click to try again in a moment.",audioPlayer:"Audio Player",audioRecorder:"Audio Recorder",audioretrievalretry:"Trying to retrieve audio",audioPlayRecording:"Play recording",audioStopPlayback:"Stop playback",audioPausePlayback:"Pause playback",audioContinuePlayback:"Continue playback",audioStopRecording:"Stop recording",audioStartRecording:"Start recording",audioPauseRecording:"Pause recording",audioContinueRecording:"Continue recording",audioAdjustVolume:"Adjust Volume",simpleChartNoData:"No Data Available. Please add a new bar.",simpleChartNewBarDefaultName:"New Bar",calculator:"Calculator",cancel:"Cancel",characterMapCharacters:["¡","¿","Ç","Ñ","ç","ñ","ý","ÿ","á","â","ã","ä","å","æ","À","Á","Â","Ã","Ä","Å","Æ","à","È","É","Ê","Ë","è","é","ê","ë","Ì","Í","Î","Ï","ì","í","î","ï","Ò","Ó","Ô","Õ","Ö","Ø","ð","ò","ó","ô","õ","ö","Ù","Ú","Û","Ü","ù","ú","û","ü"],characterMapIcon:"á",characterMapMathCharacters:["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹","⁺","⁻","₀","₁","₂","₃","₄","₅","₆","₇","₈","₉","₊","₋","½","⅓","⅔","¼","¾","⅕","⅖","⅗","⅘","⅙","⅚","√","∞","≤","≥","±","μ","σ","∫","Δ","∪","∩","≡","Σ","°"],characterMapMathIcon:"Σ",characterMapTitle:"Special Characters",characterMathMapTitle:"Math Characters",checkAnswer:"Check Answer",checkAnswers:"Check Answers",clear:"Clear",clickToRecord:"Click on record to start",clickToStartPlayback:"Click on play to start playback",closeThisWindow:"Close this window",color:"color",colorPicker:"Color Picker",confirmrecordoverwrite:"A previous audio recording exists. If you continue it will be replaced.",confirmVideoOverwrite:"A previous video recording exists. If you continue it will be replaced.",continuelabel:"Continue",copy:"Copy",correctAnswer:"Correct answer",correctAnswers:"Correct answers",counterTemplate:"Beginning in {num} seconds...",cut:"Cut",downloadAudio:"Download",downloadVideo:"Download video file",draggableItem:"Draggable item",editorBoldIcon:"B",editorBoldTitle:"Bold",editorBulletdListTitle:"Bulleted list",editorItalicsIcon:"I",editorItalicsTitle:"Italics",editorNumberedListTitle:"Numbered list",editorRemoveFormatTitle:"Clear formatting",editorSubscriptTitle:"Subscript",editorSuperscriptTitle:"Superscript",editorUnderlineIcon:"U",editorUnderlineTitle:"Underline",error:"Error",fileUpload:{deleteFileMode:"Delete File Mode",fileLimit:"File Limit",fileFormatsSupported:"file formats supported",notification:{couldNotUpload:"could not be uploaded. Please try again.",invalidFileType:"has an invalid file type. Allowed file extensions are:",maxFilesReached:"The maximum number of files have been selected.",tooLarge:"is too large. Please select files less than",tooManyFilesSelected:"Too many files selected, the maximum allowed is",alreadySelected:" has already been selected."},uploadFiles:"Upload files",uploadFailed:"upload failed",photoCapture:{launch:"Capture photo",accessToCamera:{title:"Waiting for camera access",description:"Before capturing, we will ask for access to the camera.",denied:"No camera found. Please check your browser settings or refresh the page to try again."},countdownCapturingIn:"Capturing in...",chooseName:"Name your photo",defaultFileName:"photo",confirmDelete:"Delete current image?",capture:"Capture",retake:"Retake",accept:"Accept",save:"Save",cancel:"Cancel",delete:"Delete",close:"Close"}},graphingTools:{move:"Move",point:"Point",line:"Line",ray:"Ray",segment:"Segment",vector:"Vector",circle:"Circle",parabola:"Parabola",sine:"Sine",polygon:"Polygon",delete:"Delete",label:"Label"},handwritingApiError:"Unable to recognise handwriting. Please try again later.",imageUpload:{deleteMode:"Delete Mode",addAnnotation:"Add Annotation",rotateImage:"Rotate Image",configureImage:"Configure Image",uploadNewImage:"Upload a new image",replaceImage:"Replace current image",uploadImage:"Upload an image",enterAnnotation:"Enter an annotation",noResponse:"No content entered",removeAllAnnotations:"Remove all annotations when uploading the image"},imageTool:"Image Tool",imageValidationArea:"Image validation area",incorrectAnswer:"Incorrect answer",incorrectAnswers:"Incorrect answers",itemPositionTemplate:"Item {num} of {length}",lineChartNewPointDefaultName:"New Point",lineReader:"Line Reader",lineReaderClose:"Close Line Reader",lineReaderDescription:"Show or hide the Line Reader, a visual assistive tool for showing one line of text and masking surrounding text.",lineReaderResizeMask:"Resize Line Reader mask",lineReaderResizeWindow:"Resize Line Reader window",listen:"Listen",loading:"Loading",loadingInfo:"<div class='lrn_spinner'><div class='lrn_bounce1'></div><div class='lrn_bounce2'></div><div class='lrn_bounce3'></div></div>",maxPlayAttempts:"You reached the playback limit",maxRecordAttempts:"You used all your recording attempts",microphoneDeviceMissing:"Microphone device missing error.",microphoneDeviceNoAuth:"Microphone not authorised",noAudio:"No audio to playback",ok:"OK",onbeforeunload:"You have unsaved responses. If you continue you will lose these responses.",orderListChangeTemplate:"Item {start} moved to position {end}.",paste:"Paste",pause:"Pause",play:"Play",silenceDetected:"Recording stopped due to silence detected",paginationCountOf:"of",playback:"Playback",playbackPaused:"Playback paused",playbackUnavailable:"Playback unavailable",playconversation:"Play Conversation",playConversationTitle:"Playing Question ",playing:"Playing",progress:"Progress",ratingInfoIcon:"i",ready:"Ready",record:"Record",recordAudioStatusLine:"Click to change microphone access settings.",recordAudioStatusTitle:"Audio Status",recordAuthRememberTitle:"Microphone permission",recordAuthRememberHtml:"Select <strong>remember</strong> before clicking <strong>allow</strong>. This will allow you to record audio and stop this pop-up box being shown again.",recordAuthRememberTroubleLink:'Having trouble? <a target="_blank" href="https://www.learnosity.com/guide/audioTroubleshooting.php">Click here</a>.',recordChromeAuthTitle:"Additional browser permissions",recordChromeAuth1st:"Click <strong>allow</strong> above, in the top right of your browser window:",recordChromeAuth1stB:"Click the <strong>allow</strong> button to enable microphone permissions.",recordChromeAuth2nd:"<strong>Close</strong> this window",recordChromeAuthTroubleLink:"If the button is not displayed, refer to <a target='_blank' href='https://www.learnosity.com/guide/audioTroubleshooting.php'>this guide</a>.",recordMobileTroubleLink:"If you're using a mobile device, refer to <a target='_blank' href='https://www.learnosity.com/guide/audioTroubleshooting.php'>this guide</a>.",recording:"Recording",recordingComplete:"Recording complete",recordingCounterPreload:"Recording will begin in ...",recordingPaused:"Recording paused",recordingTooLong:"Recording too long. The maximum recording length is {maxLength} seconds.",recordingUnavailable:"Recording unavailable",recordSwfErrorLine1:"We've been unable to access flash. Please ensure a blocker",recordSwfErrorLine2:"is not enabled and that you have the latest version of flash.",redo:"Redo",replay:"Replay",reset:"Reset",resume:"Resume",delete:"Delete",givenResponses:"Given responses",response:"Response",responseArea:"Response area",retry:"Retry",rightClickAudioDownload:"Click to save audio file.",saveButtonLabel:"Save Answers",saveComplete:"Saved",saveInProgress:"Saving...",seekTo:"Skip to",showAllResponses:"Show all responses",source:"Source",stimulus:"Stimulus",stop:"Stop",stopconversation:"Stop Conversation",submitButtonLabel:"Submit Answers",submitComplete:"Submitted",submitInProgress:"Submitting...",tapToStartPlayback:"Tap to start playback",target:"Target",uierrorfeedback:"A problem occurred. Please try again later. If the problem persists contact your administrator.",unableToPlayAsset:"Unable to play, asset not available.",unavailable:"Unavailable",undo:"Undo",unsupportedBrowser:"Sorry, this item cannot be displayed because your browser is not supported.",unsupportedCompatibilityMode:"Sorry, this item cannot be displayed because your browser is in an unsupported compatibility view.",videoplayerTextAlternativeCaption:"Captions",videoOptimizing:"Optimizing your video",videoOptimizingSubheader:"You can continue authoring during this process.",videoNotReady:"Video playback is not yet ready",videoNotReadySubheader:"Save your work and refresh your browser, or come back later.",videoPlaybackError:"Playback error",videoFormatUnsupported:"Your browser does not support this video format.",volume:"volume",word:"Word(s)",wordLength:"Word Limit",editor:{toolbar:{bold:"Bold",italic:"Italic",underline:"Underline",removeFormat:"Clear formatting",orderedList:"Numbered list",unorderedList:"Bullet list",alignLeft:"Align left",alignCenter:"Align center",alignRight:"Align right",alignJustify:"Align justify",indentIncrease:"Increase indent",indentDecrease:"Decrease indent",insertHorizontalRule:"Insert horizontal rule",subscript:"Subscript",superscript:"Superscript",textDirectionLtr:"Text direction left to right",textDirectionRtl:"Text direction right to left",charactermap:"Character map",table:"Table",blockquote:"Block quote",undo:"Undo",redo:"Redo"},modals:{tableTitle:"Table",editTableTitle:"Edit table",apply:"Apply",columns:"Columns",rows:"Rows",insertColumnBefore:"Insert before",insertColumnAfter:"Insert after",insertRowAbove:"Insert above",insertRowBelow:"Insert below",deleteTable:"Delete table",deleteColumn:"Delete column",deleteRow:"Delete row"},inputAriaLabel:"Enter your response to the question here",editTable:"Edit table"},drawing:{toolbar:{straightedge:"Line",scribble:"Scribble",compass:"Compass",eraser:"Eraser",clear:"Clear",undo:"Undo",redo:"Redo"}},mathKeyboardSymbols:{empty:"",x:"x",y:"y",z:"z",a:"a",b:"b",c:"c",d:"d",f:"f",abc:"abc",prime:"Prime/Arcminute",doubleprime:"Double Prime/Arcsecond",dollars:"Dollars",plus:"Plus",minus:"Minus",times:"Multiply",div:"Divide",pm:"Plus or minus",equals:"Equals",greater:"Greater than",less:"Less than",ge:"Greater than or equal to",le:"Less than or equal to",ne:"Not equal to",approx:"Approximately equal to",perp:"Perpendicular to",propto:"Proportional to",mid:"Vertical line",ngtr:"Not greater than",nless:"Not less than",parentheses:"Group in parentheses",brackets:"Group in brackets",curlybraces:"Group in curly braces",leftbraces:"Group in odd braces",rightbraces:"Group in odd braces",leftbracket:"Left square bracket",rightbracket:"Right square bracket",exponent:"Exponent",square:"Square",subscript:"Subscript",frac:"Fraction using previous expression as numerator",fraction:"Fraction",ratio:"Ratio",percentage:"Percentage",abs:"Absolute value",sqrt:"Square root",cube:"Cube root",nthroot:"Nth root",int:"Integral",sum:"Summation",partial:"Partial Derivative",limit:"Limit x to",vector:"Vector",mathbb:"Real number set",mathbbq:"Q",mathbbn:"N",mathbbz:"Z",mathbbi:"I",mathbbc:"C",imaginary:"Imaginary Number",euler:"Euler Number",alpha:"Alpha",beta:"Beta",gamma:"Gamma",delta:"Delta",epsilon:"Epsilon",zeta:"Zeta",eta:"Eta",theta:"Theta",iota:"Iota",kappa:"Kappa",lambda:"Lambda",mu:"Mu",nu:"Nu",xi:"Xi",omicron:"Omicron",pi:"Pi",rho:"Rho",sigma:"Sigma",tau:"Tau",upsilon:"Upsilon",phi:"Phi",chi:"Chi",psi:"Psi",omega:"Omega",ALPHA:"Alpha (uppercase)",BETA:"Beta (uppercase)",GAMMA:"Gamma (uppercase)",DELTA:"Delta (uppercase)",EPSILON:"Epsilon (uppercase)",ZETA:"Zeta (uppercase)",ETA:"Eta (uppercase)",THETA:"Theta (uppercase)",IOTA:"Iota (uppercase)",KAPPA:"Kappa (uppercase)",LAMBDA:"Lambda (uppercase)",MU:"Mu (uppercase)",NU:"Nu (uppercase)",XI:"Xi (uppercase)",OMICRON:"Omicron (uppercase)",PI:"Pi (uppercase)",RHO:"Rho (uppercase)",SIGMA:"Sigma (uppercase)",TAU:"Tau (uppercase)",UPI:"Upsilon (uppercase)",PHI:"Phi (uppercase)",CHI:"Chi (uppercase)",PSI:"Psi (uppercase)",OMEGA:"Omega (uppercase)",sin:"Sine",cos:"Cosine",tan:"Tangent",arcsin:"Inverse sine",arccos:"Inverse cosine",arctan:"Inverse tangent",cap:"Intersection",union:"Union",in:"Member of",notin:"Not member of",ni:"Contains",subseteq:"Subset",supseteq:"Superset",subset:"Subset (strict)",supset:"Superset (strict)",notsubset:"Not subset (strict)",notsupset:"Not superset (strict)",notsubseteq:"Not subset",notsupseteq:"Not superset",notni:"Does not contain",backslash:"Backslash",slash:"Forward slash",factorial:"Factorial",angle:"Angle",measuredangle:"Measure of angle",parallel:"Parallel to",nparallel:"Not parallel to",sim:"Similar to",cong:"Congruent to",degree:"Degree symbol",triangle:"Triangle",circledot:"Circle",parallelogram:"Parallelogram",overarc:"Arc",leftarrow:"Leftwards arrow",rightarrow:"Rightwards arrow",leftrightarrow:"Left/right arrow",longleftrightarrow:"Long left/right arrow",rightdoublearrow:"Implies equivalence",leftrightdoublearrow:"Material equivalence",overrightarrow:"Ray",overleftarrow:"Left ray",overleftrightarrow:"Line",overline:"Line segment",dot:"Recurring Decimal",longdiv:"Long division",overset:"Oxidation",therefore:"Therefore",infty:"Infinity",matrix:"Matrix",pmatrix:"Matrix bounded by parentheses",bmatrix:"2 x 2 Matrix bounded by brackets",threebmatrix:"3 x 3 Matrix bounded by brackets",inequalities:"System of equations/inequalities",singlebmatrix:"Single Matrix bounded by brackets",Bmatrix:"Matrix bounded by braces",vmatrix:"Matrix bounded by vertical lines",Vmatrix:"Matrix bounded by double vertical lines",ldots:"Horizontal dots (baseline)",cdots:"Horizontal dots (centered)",ddots:"Diagonal dots",vdots:"Vertical dots",cdot:"Dot multiplier",cdotp:"Center dot (punctuation)",response:"Editable {{response}} area",addmatrixcol:"Insert column",addmatrixrow:"Insert row",gram:"Gram",cg:"Centigram",kg:"Kilogram",mg:"Milligram",ng:"Nanogram",meter:"Meter",cm:"Centimeter",km:"Kilometer",mm:"Millimeter",nm:"Nanometer",second:"Second",cs:"Centisecond",ks:"Kilosecond",ms:"Millisecond",ns:"Nanosecond",liter:"Liter",ml:"Millitliter",ug:"Microgram",inch:"Inch",ft:"Foot",mi:"Mile",fl:"Fluid Ounce",cup:"Cup",pt:"Pint",qt:"Quart",gal:"Gallon",oz:"Ounce",lb:"Pound",mug:"Microgram",mus:"Microsecond",mum:"Micrometer",mul:"Microlitre",mol:"Mole",atomic:"Atomic symbol",polyatomic:"Polyatomic ion",superscript:"Superscript",molar:"Molar mass",rightleftharpoons:"Right / left harpoons",leftrightharpoons:"Left / right harpoons",singlebond:"Single bond",doublebond:"Double bond",triplebond:"Triple bond",threedotbond:"Three dot bond",fourdotbond:"Four dot bond",rightarrowbond:"Right arrow bond",leftarrowbond:"Left arrow bond",xrightarrow:"Arrow with superscript and subscript",lfloor:"Left floor",rfloor:"Right floor",lceil:"Left ceiling",rceil:"Right ceiling",uparrow:"Up arrow",equiv:"Equivalence",and:"And",not:"Not",or:"Or",exist:"Exist",exists:"Exists",forall:"Forall",oplus:"Circled plus",zero:"Zero",one:"One",two:"Two",three:"Three",four:"Four",five:"Five",six:"Six",seven:"Seven",eight:"Eight",nine:"Nine",divide:"Divided by",multiply:"Multiplied by",decimal:"Decimal",comma:"Comma",left:"Left",right:"Right",backspace:"Backspace",responseContainerIcon:"Response Container"},mathKeyboardHelp:{title:"Keyboard Shortcuts",disclaimer:"Keyboard shortcut combinations may differ from one region to another. These were created using an English: United States keyboard."},mathKeyboardTitle:{handwriting:"Handwriting",qwerty:"Keyboard",basic:"Basic",basic_junior:"Basic Junior",basic_author:"Basic",algebra:"Algebra",comparison:"Comparison",geometry:"Geometry",matrices:"Matrices",trigonometry:"Trigonometry",sets:"Sets",units_si:"Units (SI)",units_us:"Units (US Customary)",greek:"Greek letters",chemistry:"Chemistry",chemistry_author:"Chemistry",grouping:"Grouping Symbols",calculus:"Calculus",misc:"Miscellaneous",discrete:"Discrete",general:"General"},ariaLiveText:{clozeAssociation:{activatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been grabbed. Press tab to choose where to drop it. Drop it by pressing the spacebar key. Cancel the operation by pressing escape.',activatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been grabbed from position {{dropzoneNumber}} of {{totalDropzones}}. Press tab to choose where to drop it. Drop it by pressing the spacebar key. Cancel the operation by pressing escape.',deactivatedResponse:'The operation has been cancelled. The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been released. You are no longer dragging any option.',deactivatedResponseInDropzone:'The operation has been cancelled. The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been released back into position {{dropzoneNumber}} of {{totalDropzones}}. You are no longer dragging any option.',droppedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been dropped in position {{dropzoneNumber}} of {{totalDropzones}}. You are no longer dragging an option.',droppedResponseBackInList:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been dropped back in the option list. You are no longer dragging an option.'},association:{activatedResponse:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been grabbed. Press tab to choose where to drop it. Drop it by pressing the spacebar key. Cancel the operation by pressing escape.',activatedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been grabbed from "{{dropzoneLabel}}" drop zone. Press tab to choose where to drop it. Drop it by pressing the spacebar key. Cancel the operation by pressing escape.',deactivatedResponse:'The operation has been cancelled. The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been released. You are no longer dragging any option.',deactivatedResponseInDropzone:'The operation has been cancelled. The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been released back into position {{dropzoneNumber}} of {{totalDropzones}} which corresponds to "{{dropzoneLabel}}". You are no longer dragging any option.',droppedResponseInDropzone:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been dropped in "{{dropzoneLabel}}" drop zone. You are no longer dragging an option.',droppedResponseBackInList:'The option "{{response}}" ({{responseNumber}} of {{totalResponses}}) has been dropped back in the option list. You are no longer dragging an option.'}},ariaRoleDescription:{clozeAssociation:{dropzone:"Drop response in position {{dropzoneNumber}} of {{totalDropzones}}.",dropzoneWithResponse:'Drop response in position {{dropzoneNumber}} of {{totalDropzones}}, which currently contains the option "{{response}}" ({{responseNumber}} of {{totalResponses}}).',dropzoneReadOnly:"Empty response in position {{dropzoneNumber}} of {{totalDropzones}}.",dropzoneReadOnlyWithResponse:'Option "{{response}}" ({{responseNumber}} of {{totalResponses}}) in position {{dropzoneNumber}} of {{totalDropzones}}.'},association:{dropzone:'"{{dropzoneLabel}}" drop zone.',dropzoneWithResponse:'"{{dropzoneLabel}}" drop zone, which currently contains the option "{{response}}".',dropzoneReadOnly:'Empty response in "{{dropzoneLabel}}" drop zone.',dropzoneReadOnlyWithResponse:'Option "{{response}}" in "{{dropzoneLabel}}" drop zone.'}},masking:{ariaLabelMask:"Mask",ariaLabelUnmask:"Unmask"}},Re=["recordAuthRememberHtml","recordAuthRememberTroubleLink"];var Ce=function exportLabels(e){(function sanitise(e){r.a.each(e,(function(t,n){r.a.isString(t)||r.a.isNumber(t)?r.a.contains(Re,n)?e[n]=C.a.sanitizeHTML(t):e[n]=r.a.escape(c()("<div>").append(t).text()):(c.a.isPlainObject(t)||r.a.isArray(t))&&sanitise(t)}))})(e=e||{}),this.labels=r.a.deepExtend({},xe,e),this.sameLabels=function(e){return r.a.isEqual(this.labels,e)}};function initOfflineStorage(e){return new Promise((function(t,n){if(e){e.domain=p.a.domain;try{V.init(),t()}catch(e){n({event:{code:10027,detail:e.toString()}})}}else n({event:{code:10027,detail:"Missing security object"}})}))}function appController_toConsumableArray(e){return function appController_arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function appController_iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function appController_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function getAppStub(e){var t={};return e&&(t=e),r.a.each(ye.prototype.EXPOSED_METHODS,(function(e){t[e]=function(){throw new Error("You have called ".concat(e," on an App stub, please Init the API with an activity JSON object"))}})),t}var Me=new Te,Ie=[],Oe={};function getDefaultApp(){return Ie.length>0?Ie[0]:getAppStub()}function executeCachedExposedMethodsCalls(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.app,n=e.appStub,i=e.eventsOnly,a=LearnosityApp._internal._cachedAppInstanceMethodCalls,s=function executeCall(e){return t[e.method].apply(t,appController_toConsumableArray(e.args))};a.forEach((function(e,t){e.appStub===n&&(r.a.contains(["on","off","once"],e.method)?(s(e),a[t]=null):i||(s(e),a[t]=null))})),LearnosityApp._internal._cachedAppInstanceMethodCalls=a.filter((function(e){return!!e}))}function whenReady(e,t){r.a.isFunction(t)&&P.default.all(e).then((function(){return r.a.defer(t)}))}var Ne={_internal:void 0,version:void 0,errors:[],init:function appController_init(){var e,t,n,i,a,s,o=[];if(!function checkBrowserCompat(){var e,t;return!("ie"===Q.a.browser&&Q.a.version<8)||(Q.a.compatibilityMode?(t=10018,e="Detected browser is supported but currently running in an unsupported compatibility mode ".concat(Q.a.browser," version ").concat(Q.a.version)):(t=10015,e="Detected browser ".concat(Q.a.browser," version ").concat(Q.a.version)),h.a.exception({code:t,detail:e,i18n:new Ce}),!1)}())return!1;!function validateDocType(){Q.a.isValidDOCTYPE(document)||h.a.warning("This html file's DOCTYPE is invalid or missing. Learnosity's UI may be impacted until this is fixed.")}(),r.a.each(arguments,(function(a){r.a.isString(a)?n=a:r.a.isObject(a)&&(a.hasOwnProperty("consumer_key")?e=a:a.hasOwnProperty("appStub")?i=a.appStub:t=a)})),i||(i={},window.LearnosityApp._internal.addCachedPublicMethodsHandler(window.LearnosityApp._internal.cacheableInstanceMethods,i)),0!==Ie.length||Q.a.isChromeApp||ne.a.init(p.a.analytics),h.a.setErrorListener(t&&t.errorListener);var u=t&&t.readyListener,l=function getLabelBundle(e,t){var n=t&&r.a.isObject(t.labelBundle)&&t.labelBundle,i=e&&r.a.isObject(e.labelBundle)&&e.labelBundle;return r.a.extend({},n,i)}(e,t);Me.hasInitBeenCalled()||(r.a.isUndefined(a)&&(a=new Ce(l)),Me.init(a));var c=e&&e.beta_flags;return o.push(Me.render(c)),e?(a=new Ce(l),s=new ye(e,t,n,a,this.version,this.requestedApiVersion),r.a.defer((function(){executeCachedExposedMethodsCalls({app:s,appStub:i,eventsOnly:!0})})),s.on(s.EVENT.READY,(function(e){var t=e.activityRenderer.renderSimpleFeaturesInWidgets(Me);executeCachedExposedMethodsCalls({app:e,appStub:i}),e=e.getFacade(i),P.default.all(t).then((function(){Me.onAppReady(),o.push(Me.render(c)),whenReady(o,u),r.a.chain(Ie).without(e).each((function(e){var t=e&&e.activityRenderer;t&&t.renderSimpleFeaturesInWidgets(Me)}))}))})),s.simpleFeaturesRenderer=Me,Ie.push(s),n&&(Oe[n]=s)):(whenReady(o,u),s=getAppStub(i)),i},reset:function appController_reset(){r.a.each(Ie,(function(e){e&&e.reset&&e.reset()})),h.a.reset(),$.reset();var e=LearnosityApp._internal.audioApi;e&&e.reset(),Ie=[],Oe={},Me.reset()},save:function appController_save(){ye.prototype.save.apply(getDefaultApp(),arguments)},submit:function appController_submit(){ye.prototype.submit.apply(getDefaultApp(),arguments)},safeToUnload:function appController_safeToUnload(){return ye.prototype.safeToUnload.apply(getDefaultApp(),arguments)},attemptedQuestions:function attemptedQuestions(){return ye.prototype.attemptedQuestions.apply(getDefaultApp(),arguments)},renderMath:function appController_renderMath(){return ye.prototype.renderMath.apply(getDefaultApp(),arguments)},simpleFeature:function simpleFeature(e){return Me.simpleFeatureFacades[e]},simpleFeatures:function simpleFeatures(){return r.a.clone(Me.simpleFeatureFacades)},push:function appController_push(){return ye.prototype.push.apply(null,arguments)},needsPushing:function appController_needsPushing(){return ye.prototype.needsPushing.apply(null,arguments)},offline:function offline(e){var t=function getOfflineFacade(){return{getSession:function getSession(e,t){return initOfflineStorage(e).then((function(){return V.getSession(t)}))},push:function push(e,t){return initOfflineStorage(e).then((function(){return V.pushBySessionId(e,t)}))}}}();return r.a.isFunction(e)?e(t):t}};n.p=window.LearnosityApp._internal.config.assetsHost+"/dist/",function init(){var e,t;if(window.LearnosityApp._internal._cachedInitCalls&&(e=window.LearnosityApp._internal._cachedInitCalls,delete window.LearnosityApp._internal._cachedInitCalls),window.LearnosityApp._internal._cachedGlobalApiMethodCalls&&(t=window.LearnosityApp._internal._cachedGlobalApiMethodCalls,delete window.LearnosityApp._internal._cachedGlobalApiMethodCalls),Ne._internal=window.LearnosityApp._internal,Ne.version=window.LearnosityApp.version,Ne.versions=window.LearnosityApp.versions,Ne.requestedApiVersion=window.LearnosityApp.requestedApiVersion,window.LearnosityApp=Ne,e&&s.each(e,(function(e){e.args.push({appStub:e.appStub}),window.LearnosityApp.init.apply(window.LearnosityApp,e.args)})),t)for(var n=0;n<t.length;n++)Ne[t[n].method].apply(Ne,t[n].args)}()}]);